/**
 * vuex v3.1.2
 * (c) 2019 Evan You
 * @license MIT
 */
!function(t,e){"object"==typeof exports&&"undefined"!=typeof module?module.exports=e():"function"==typeof define&&define.amd?define(e):(t=t||self).Vuex=e()}(this,function(){"use strict";var t=("undefined"!=typeof window?window:"undefined"!=typeof global?global:{}).__VUE_DEVTOOLS_GLOBAL_HOOK__;function e(t,e){Object.keys(t).forEach(function(n){return e(t[n],n)})}function n(t){return null!==t&&"object"==typeof t}var o=function(t,e){this.runtime=e,this._children=Object.create(null),this._rawModule=t;var n=t.state;this.state=("function"==typeof n?n():n)||{}},i={namespaced:{configurable:!0}};i.namespaced.get=function(){return!!this._rawModule.namespaced},o.prototype.addChild=function(t,e){this._children[t]=e},o.prototype.removeChild=function(t){delete this._children[t]},o.prototype.getChild=function(t){return this._children[t]},o.prototype.update=function(t){this._rawModule.namespaced=t.namespaced,t.actions&&(this._rawModule.actions=t.actions),t.mutations&&(this._rawModule.mutations=t.mutations),t.getters&&(this._rawModule.getters=t.getters)},o.prototype.forEachChild=function(t){e(this._children,t)},o.prototype.forEachGetter=function(t){this._rawModule.getters&&e(this._rawModule.getters,t)},o.prototype.forEachAction=function(t){this._rawModule.actions&&e(this._rawModule.actions,t)},o.prototype.forEachMutation=function(t){this._rawModule.mutations&&e(this._rawModule.mutations,t)},Object.defineProperties(o.prototype,i);var r,s=function(t){this.register([],t,!1)};s.prototype.get=function(t){return t.reduce(function(t,e){return t.getChild(e)},this.root)},s.prototype.getNamespace=function(t){var e=this.root;return t.reduce(function(t,n){return t+((e=e.getChild(n)).namespaced?n+"/":"")},"")},s.prototype.update=function(t){!function t(e,n,o){n.update(o);if(o.modules)for(var i in o.modules){if(!n.getChild(i))return;t(e.concat(i),n.getChild(i),o.modules[i])}}([],this.root,t)},s.prototype.register=function(t,n,i){var r=this;void 0===i&&(i=!0);var s=new o(n,i);0===t.length?this.root=s:this.get(t.slice(0,-1)).addChild(t[t.length-1],s);n.modules&&e(n.modules,function(e,n){r.register(t.concat(n),e,i)})},s.prototype.unregister=function(t){var e=this.get(t.slice(0,-1)),n=t[t.length-1];e.getChild(n).runtime&&e.removeChild(n)};var a=function(e){var n=this;void 0===e&&(e={}),!r&&"undefined"!=typeof window&&window.Vue&&m(window.Vue);var o=e.plugins;void 0===o&&(o=[]);var i=e.strict;void 0===i&&(i=!1),this._committing=!1,this._actions=Object.create(null),this._actionSubscribers=[],this._mutations=Object.create(null),this._wrappedGetters=Object.create(null),this._modules=new s(e),this._modulesNamespaceMap=Object.create(null),this._subscribers=[],this._watcherVM=new r,this._makeLocalGettersCache=Object.create(null);var a=this,c=this.dispatch,u=this.commit;this.dispatch=function(t,e){return c.call(a,t,e)},this.commit=function(t,e,n){return u.call(a,t,e,n)},this.strict=i;var f=this._modules.root.state;p(this,f,[],this._modules.root),h(this,f),o.forEach(function(t){return t(n)}),(void 0!==e.devtools?e.devtools:r.config.devtools)&&function(e){t&&(e._devtoolHook=t,t.emit("vuex:init",e),t.on("vuex:travel-to-state",function(t){e.replaceState(t)}),e.subscribe(function(e,n){t.emit("vuex:mutation",e,n)}))}(this)},c={state:{configurable:!0}};function u(t,e){return e.indexOf(t)<0&&e.push(t),function(){var n=e.indexOf(t);n>-1&&e.splice(n,1)}}function f(t,e){t._actions=Object.create(null),t._mutations=Object.create(null),t._wrappedGetters=Object.create(null),t._modulesNamespaceMap=Object.create(null);var n=t.state;p(t,n,[],t._modules.root,!0),h(t,n,e)}function h(t,n,o){var i=t._vm;t.getters={},t._makeLocalGettersCache=Object.create(null);var s=t._wrappedGetters,a={};e(s,function(e,n){a[n]=function(t,e){return function(){return t(e)}}(e,t),Object.defineProperty(t.getters,n,{get:function(){return t._vm[n]},enumerable:!0})});var c=r.config.silent;r.config.silent=!0,t._vm=new r({data:{$$state:n},computed:a}),r.config.silent=c,t.strict&&function(t){t._vm.$watch(function(){return this._data.$$state},function(){},{deep:!0,sync:!0})}(t),i&&(o&&t._withCommit(function(){i._data.$$state=null}),r.nextTick(function(){return i.$destroy()}))}function p(t,e,n,o,i){var s=!n.length,a=t._modules.getNamespace(n);if(o.namespaced&&(t._modulesNamespaceMap[a],t._modulesNamespaceMap[a]=o),!s&&!i){var c=l(e,n.slice(0,-1)),u=n[n.length-1];t._withCommit(function(){r.set(c,u,o.state)})}var f=o.context=function(t,e,n){var o=""===e,i={dispatch:o?t.dispatch:function(n,o,i){var r=d(n,o,i),s=r.payload,a=r.options,c=r.type;return a&&a.root||(c=e+c),t.dispatch(c,s)},commit:o?t.commit:function(n,o,i){var r=d(n,o,i),s=r.payload,a=r.options,c=r.type;a&&a.root||(c=e+c),t.commit(c,s,a)}};return Object.defineProperties(i,{getters:{get:o?function(){return t.getters}:function(){return function(t,e){if(!t._makeLocalGettersCache[e]){var n={},o=e.length;Object.keys(t.getters).forEach(function(i){if(i.slice(0,o)===e){var r=i.slice(o);Object.defineProperty(n,r,{get:function(){return t.getters[i]},enumerable:!0})}}),t._makeLocalGettersCache[e]=n}return t._makeLocalGettersCache[e]}(t,e)}},state:{get:function(){return l(t.state,n)}}}),i}(t,a,n);o.forEachMutation(function(e,n){!function(t,e,n,o){(t._mutations[e]||(t._mutations[e]=[])).push(function(e){n.call(t,o.state,e)})}(t,a+n,e,f)}),o.forEachAction(function(e,n){var o=e.root?n:a+n,i=e.handler||e;!function(t,e,n,o){(t._actions[e]||(t._actions[e]=[])).push(function(e){var i,r=n.call(t,{dispatch:o.dispatch,commit:o.commit,getters:o.getters,state:o.state,rootGetters:t.getters,rootState:t.state},e);return(i=r)&&"function"==typeof i.then||(r=Promise.resolve(r)),t._devtoolHook?r.catch(function(e){throw t._devtoolHook.emit("vuex:error",e),e}):r})}(t,o,i,f)}),o.forEachGetter(function(e,n){!function(t,e,n,o){if(t._wrappedGetters[e])return;t._wrappedGetters[e]=function(t){return n(o.state,o.getters,t.state,t.getters)}}(t,a+n,e,f)}),o.forEachChild(function(o,r){p(t,e,n.concat(r),o,i)})}function l(t,e){return e.length?e.reduce(function(t,e){return t[e]},t):t}function d(t,e,o){return n(t)&&t.type&&(o=e,e=t,t=t.type),{type:t,payload:e,options:o}}function m(t){r&&t===r||function(t){if(Number(t.version.split(".")[0])>=2)t.mixin({beforeCreate:n});else{var e=t.prototype._init;t.prototype._init=function(t){void 0===t&&(t={}),t.init=t.init?[n].concat(t.init):n,e.call(this,t)}}function n(){var t=this.$options;t.store?this.$store="function"==typeof t.store?t.store():t.store:t.parent&&t.parent.$store&&(this.$store=t.parent.$store)}}(r=t)}c.state.get=function(){return this._vm._data.$$state},c.state.set=function(t){},a.prototype.commit=function(t,e,n){var o=this,i=d(t,e,n),r=i.type,s=i.payload,a={type:r,payload:s},c=this._mutations[r];c&&(this._withCommit(function(){c.forEach(function(t){t(s)})}),this._subscribers.forEach(function(t){return t(a,o.state)}))},a.prototype.dispatch=function(t,e){var n=this,o=d(t,e),i=o.type,r=o.payload,s={type:i,payload:r},a=this._actions[i];if(a){try{this._actionSubscribers.filter(function(t){return t.before}).forEach(function(t){return t.before(s,n.state)})}catch(t){}return(a.length>1?Promise.all(a.map(function(t){return t(r)})):a[0](r)).then(function(t){try{n._actionSubscribers.filter(function(t){return t.after}).forEach(function(t){return t.after(s,n.state)})}catch(t){}return t})}},a.prototype.subscribe=function(t){return u(t,this._subscribers)},a.prototype.subscribeAction=function(t){return u("function"==typeof t?{before:t}:t,this._actionSubscribers)},a.prototype.watch=function(t,e,n){var o=this;return this._watcherVM.$watch(function(){return t(o.state,o.getters)},e,n)},a.prototype.replaceState=function(t){var e=this;this._withCommit(function(){e._vm._data.$$state=t})},a.prototype.registerModule=function(t,e,n){void 0===n&&(n={}),"string"==typeof t&&(t=[t]),this._modules.register(t,e),p(this,this.state,t,this._modules.get(t),n.preserveState),h(this,this.state)},a.prototype.unregisterModule=function(t){var e=this;"string"==typeof t&&(t=[t]),this._modules.unregister(t),this._withCommit(function(){var n=l(e.state,t.slice(0,-1));r.delete(n,t[t.length-1])}),f(this)},a.prototype.hotUpdate=function(t){this._modules.update(t),f(this,!0)},a.prototype._withCommit=function(t){var e=this._committing;this._committing=!0,t(),this._committing=e},Object.defineProperties(a.prototype,c);var v=w(function(t,e){var n={};return b(e).forEach(function(e){var o=e.key,i=e.val;n[o]=function(){var e=this.$store.state,n=this.$store.getters;if(t){var o=$(this.$store,"mapState",t);if(!o)return;e=o.context.state,n=o.context.getters}return"function"==typeof i?i.call(this,e,n):e[i]},n[o].vuex=!0}),n}),_=w(function(t,e){var n={};return b(e).forEach(function(e){var o=e.key,i=e.val;n[o]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var o=this.$store.commit;if(t){var r=$(this.$store,"mapMutations",t);if(!r)return;o=r.context.commit}return"function"==typeof i?i.apply(this,[o].concat(e)):o.apply(this.$store,[i].concat(e))}}),n}),y=w(function(t,e){var n={};return b(e).forEach(function(e){var o=e.key,i=e.val;i=t+i,n[o]=function(){if(!t||$(this.$store,"mapGetters",t))return this.$store.getters[i]},n[o].vuex=!0}),n}),g=w(function(t,e){var n={};return b(e).forEach(function(e){var o=e.key,i=e.val;n[o]=function(){for(var e=[],n=arguments.length;n--;)e[n]=arguments[n];var o=this.$store.dispatch;if(t){var r=$(this.$store,"mapActions",t);if(!r)return;o=r.context.dispatch}return"function"==typeof i?i.apply(this,[o].concat(e)):o.apply(this.$store,[i].concat(e))}}),n});function b(t){return function(t){return Array.isArray(t)||n(t)}(t)?Array.isArray(t)?t.map(function(t){return{key:t,val:t}}):Object.keys(t).map(function(e){return{key:e,val:t[e]}}):[]}function w(t){return function(e,n){return"string"!=typeof e?(n=e,e=""):"/"!==e.charAt(e.length-1)&&(e+="/"),t(e,n)}}function $(t,e,n){return t._modulesNamespaceMap[n]}return{Store:a,install:m,version:"3.1.2",mapState:v,mapMutations:_,mapGetters:y,mapActions:g,createNamespacedHelpers:function(t){return{mapState:v.bind(null,t),mapGetters:y.bind(null,t),mapMutations:_.bind(null,t),mapActions:g.bind(null,t)}}}});
!function(t,n){"object"==typeof exports&&"undefined"!=typeof module?n(exports):"function"==typeof define&&define.amd?define(["exports"],n):n(t.R={})}(this,function(t){"use strict";function n(t){return null!=t&&"object"==typeof t&&!0===t["@@functional/placeholder"]}function r(t){return function r(e){return 0===arguments.length||n(e)?r:t.apply(this,arguments)}}function e(t){return function e(u,i){switch(arguments.length){case 0:return e;case 1:return n(u)?e:r(function(n){return t(u,n)});default:return n(u)&&n(i)?e:n(u)?r(function(n){return t(n,i)}):n(i)?r(function(n){return t(u,n)}):t(u,i)}}}var u=e(function(t,n){return+t+ +n});function i(t,n){var r,e=(t=t||[]).length,u=(n=n||[]).length,i=[];for(r=0;e>r;)i[i.length]=t[r],r+=1;for(r=0;u>r;)i[i.length]=n[r],r+=1;return i}function o(t,n){switch(t){case 0:return function(){return n.apply(this,arguments)};case 1:return function(t){return n.apply(this,arguments)};case 2:return function(t,r){return n.apply(this,arguments)};case 3:return function(t,r,e){return n.apply(this,arguments)};case 4:return function(t,r,e,u){return n.apply(this,arguments)};case 5:return function(t,r,e,u,i){return n.apply(this,arguments)};case 6:return function(t,r,e,u,i,o){return n.apply(this,arguments)};case 7:return function(t,r,e,u,i,o,c){return n.apply(this,arguments)};case 8:return function(t,r,e,u,i,o,c,a){return n.apply(this,arguments)};case 9:return function(t,r,e,u,i,o,c,a,s){return n.apply(this,arguments)};case 10:return function(t,r,e,u,i,o,c,a,s,f){return n.apply(this,arguments)};default:throw Error("First argument to _arity must be a non-negative integer no greater than ten")}}function c(t,r,e){return function(){for(var u=[],i=0,a=t,s=0;r.length>s||arguments.length>i;){var f;s>=r.length||n(r[s])&&arguments.length>i?(f=arguments[i],i+=1):f=r[s],u[s]=f,n(f)||(a-=1),s+=1}return a>0?o(a,c(t,u,e)):e.apply(this,u)}}var a=e(function(t,n){return 1===t?r(n):o(t,c(t,[],n))}),s=r(function(t){return a(t.length,function(){var n=0,r=arguments[0],e=arguments[arguments.length-1],u=Array.prototype.slice.call(arguments,0);return u[0]=function(){var t=r.apply(this,i(arguments,[n,e]));return n+=1,t},t.apply(this,u)})});function f(t){return function u(i,o,c){switch(arguments.length){case 0:return u;case 1:return n(i)?u:e(function(n,r){return t(i,n,r)});case 2:return n(i)&&n(o)?u:n(i)?e(function(n,r){return t(n,o,r)}):n(o)?e(function(n,r){return t(i,n,r)}):r(function(n){return t(i,o,n)});default:return n(i)&&n(o)&&n(c)?u:n(i)&&n(o)?e(function(n,r){return t(n,r,c)}):n(i)&&n(c)?e(function(n,r){return t(n,o,r)}):n(o)&&n(c)?e(function(n,r){return t(i,n,r)}):n(i)?r(function(n){return t(n,o,c)}):n(o)?r(function(n){return t(i,n,c)}):n(c)?r(function(n){return t(i,o,n)}):t(i,o,c)}}}var l=f(function(t,n,r){if(t>=r.length||-r.length>t)return r;var e=(0>t?r.length:0)+t,u=i(r);return u[e]=n(r[e]),u}),p=Array.isArray||function(t){return null!=t&&t.length>=0&&"[object Array]"===Object.prototype.toString.call(t)};function h(t){return null!=t&&"function"==typeof t["@@transducer/step"]}function y(t,n,r){return function(){if(0===arguments.length)return r();var e=Array.prototype.slice.call(arguments,0),u=e.pop();if(!p(u)){for(var i=0;t.length>i;){if("function"==typeof u[t[i]])return u[t[i]].apply(u,e);i+=1}if(h(u))return n.apply(null,e)(u)}return r.apply(this,arguments)}}function d(t){return t&&t["@@transducer/reduced"]?t:{"@@transducer/value":t,"@@transducer/reduced":!0}}var g={init:function(){return this.xf["@@transducer/init"]()},result:function(t){return this.xf["@@transducer/result"](t)}};function v(t,n){this.xf=n,this.f=t,this.all=!0}v.prototype["@@transducer/init"]=g.init,v.prototype["@@transducer/result"]=function(t){return this.all&&(t=this.xf["@@transducer/step"](t,!0)),this.xf["@@transducer/result"](t)},v.prototype["@@transducer/step"]=function(t,n){return this.f(n)||(this.all=!1,t=d(this.xf["@@transducer/step"](t,!1))),t};var m=e(function(t,n){return new v(t,n)}),b=e(y(["all"],m,function(t,n){for(var r=0;n.length>r;){if(!t(n[r]))return!1;r+=1}return!0})),x=e(function(t,n){return n>t?n:t});function w(t,n){for(var r=0,e=n.length,u=Array(e);e>r;)u[r]=t(n[r]),r+=1;return u}function j(t){return"[object String]"===Object.prototype.toString.call(t)}var A=r(function(t){return!!p(t)||!!t&&("object"==typeof t&&(!j(t)&&(1===t.nodeType?!!t.length:0===t.length||t.length>0&&(t.hasOwnProperty(0)&&t.hasOwnProperty(t.length-1)))))});function O(t){this.f=t}function S(t){return new O(t)}O.prototype["@@transducer/init"]=function(){throw Error("init not implemented on XWrap")},O.prototype["@@transducer/result"]=function(t){return t},O.prototype["@@transducer/step"]=function(t,n){return this.f(t,n)};var E=e(function(t,n){return o(t.length,function(){return t.apply(n,arguments)})});function _(t,n,r){for(var e=r.next();!e.done;){if((n=t["@@transducer/step"](n,e.value))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}e=r.next()}return t["@@transducer/result"](n)}function q(t,n,r,e){return t["@@transducer/result"](r[e](E(t["@@transducer/step"],t),n))}var k="undefined"!=typeof Symbol?Symbol.iterator:"@@iterator";function N(t,n,r){if("function"==typeof t&&(t=S(t)),A(r))return function(t,n,r){for(var e=0,u=r.length;u>e;){if((n=t["@@transducer/step"](n,r[e]))&&n["@@transducer/reduced"]){n=n["@@transducer/value"];break}e+=1}return t["@@transducer/result"](n)}(t,n,r);if("function"==typeof r["fantasy-land/reduce"])return q(t,n,r,"fantasy-land/reduce");if(null!=r[k])return _(t,n,r[k]());if("function"==typeof r.next)return _(t,n,r);if("function"==typeof r.reduce)return q(t,n,r,"reduce");throw new TypeError("reduce: list must be array or iterable")}function W(t,n){this.xf=n,this.f=t}W.prototype["@@transducer/init"]=g.init,W.prototype["@@transducer/result"]=g.result,W.prototype["@@transducer/step"]=function(t,n){return this.xf["@@transducer/step"](t,this.f(n))};var I=e(function(t,n){return new W(t,n)});function P(t,n){return Object.prototype.hasOwnProperty.call(n,t)}var T=Object.prototype.toString,C=function(){return"[object Arguments]"===T.call(arguments)?function(t){return"[object Arguments]"===T.call(t)}:function(t){return P("callee",t)}}(),B=!{toString:null}.propertyIsEnumerable("toString"),F=["constructor","valueOf","isPrototypeOf","toString","propertyIsEnumerable","hasOwnProperty","toLocaleString"],R=function(){return arguments.propertyIsEnumerable("length")}(),U=function(t,n){for(var r=0;t.length>r;){if(t[r]===n)return!0;r+=1}return!1},D=r("function"!=typeof Object.keys||R?function(t){if(Object(t)!==t)return[];var n,r,e=[],u=R&&C(t);for(n in t)!P(n,t)||u&&"length"===n||(e[e.length]=n);if(B)for(r=F.length-1;r>=0;)P(n=F[r],t)&&!U(e,n)&&(e[e.length]=n),r-=1;return e}:function(t){return Object(t)!==t?[]:Object.keys(t)}),z=e(y(["fantasy-land/map","map"],I,function(t,n){switch(Object.prototype.toString.call(n)){case"[object Function]":return a(n.length,function(){return t.call(this,n.apply(this,arguments))});case"[object Object]":return N(function(r,e){return r[e]=t(n[e]),r},{},D(n));default:return w(t,n)}})),M=e(function(t,n){for(var r=n,e=0;t.length>e;){if(null==r)return;r=r[t[e]],e+=1}return r}),L=e(function(t,n){return M([t],n)}),K=e(function(t,n){return z(L(t),n)}),V=f(N),$=r(function(t){return a(V(x,0,K("length",t)),function(){for(var n=0,r=t.length;r>n;){if(!t[n].apply(this,arguments))return!1;n+=1}return!0})}),H=r(function(t){return function(){return t}}),J=e(function(t,n){return t&&n});function X(t,n){this.xf=n,this.f=t,this.any=!1}X.prototype["@@transducer/init"]=g.init,X.prototype["@@transducer/result"]=function(t){return this.any||(t=this.xf["@@transducer/step"](t,!1)),this.xf["@@transducer/result"](t)},X.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.any=!0,t=d(this.xf["@@transducer/step"](t,!0))),t};var Y=e(function(t,n){return new X(t,n)}),Z=e(y(["any"],Y,function(t,n){for(var r=0;n.length>r;){if(t(n[r]))return!0;r+=1}return!1})),G=r(function(t){return a(V(x,0,K("length",t)),function(){for(var n=0,r=t.length;r>n;){if(t[n].apply(this,arguments))return!0;n+=1}return!1})}),Q=e(function(t,n){return"function"==typeof n["fantasy-land/ap"]?n["fantasy-land/ap"](t):"function"==typeof t.ap?t.ap(n):"function"==typeof t?function(r){return t(r)(n(r))}:N(function(t,r){return i(t,z(r,n))},[],t)});function tt(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=Array(t)}tt.prototype["@@transducer/init"]=g.init,tt.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},tt.prototype["@@transducer/step"]=function(t,n){return this.store(n),this.full?this.xf["@@transducer/step"](t,this.getCopy()):t},tt.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)},tt.prototype.getCopy=function(){return i(Array.prototype.slice.call(this.acc,this.pos),Array.prototype.slice.call(this.acc,0,this.pos))};var nt=e(function(t,n){return new tt(t,n)}),rt=e(y([],nt,function(t,n){for(var r=0,e=n.length-(t-1),u=Array(0>e?0:e);e>r;)u[r]=Array.prototype.slice.call(n,r,r+t),r+=1;return u})),et=e(function(t,n){return i(n,[t])}),ut=e(function(t,n){return t.apply(this,n)}),it=r(function(t){for(var n=D(t),r=n.length,e=[],u=0;r>u;)e[u]=t[n[u]],u+=1;return e});function ot(t,n){return D(n).reduce(function(r,e){return r[e]=t(n[e]),r},{})}var ct=r(function t(n){return n=ot(function(n){return"function"==typeof n?n:t(n)},n),a(V(x,0,K("length",it(n))),function(){var t=arguments;return ot(function(n){return ut(n,t)},n)})}),at=e(function(t,n){return n(t)}),st=f(function(t,n,r){var e=t(n),u=t(r);return u>e?-1:e>u?1:0}),ft=f(function(t,n,r){var e={};for(var u in r)e[u]=r[u];return e[t]=n,e}),lt=Number.isInteger||function(t){return t<<0===t},pt=r(function(t){return null==t}),ht=f(function t(n,r,e){if(0===n.length)return r;var u=n[0];if(n.length>1){var i=!pt(e)&&P(u,e)?e[u]:lt(n[1])?[]:{};r=t(Array.prototype.slice.call(n,1),r,i)}if(lt(u)&&p(e)){var o=[].concat(e);return o[u]=r,o}return ft(u,r,e)}),yt=e(function(t,n){switch(t){case 0:return function(){return n.call(this)};case 1:return function(t){return n.call(this,t)};case 2:return function(t,r){return n.call(this,t,r)};case 3:return function(t,r,e){return n.call(this,t,r,e)};case 4:return function(t,r,e,u){return n.call(this,t,r,e,u)};case 5:return function(t,r,e,u,i){return n.call(this,t,r,e,u,i)};case 6:return function(t,r,e,u,i,o){return n.call(this,t,r,e,u,i,o)};case 7:return function(t,r,e,u,i,o,c){return n.call(this,t,r,e,u,i,o,c)};case 8:return function(t,r,e,u,i,o,c,a){return n.call(this,t,r,e,u,i,o,c,a)};case 9:return function(t,r,e,u,i,o,c,a,s){return n.call(this,t,r,e,u,i,o,c,a,s)};case 10:return function(t,r,e,u,i,o,c,a,s,f){return n.call(this,t,r,e,u,i,o,c,a,s,f)};default:throw Error("First argument to nAry must be a non-negative integer no greater than ten")}}),dt=r(function(t){return yt(2,t)});function gt(t){return"[object Function]"===Object.prototype.toString.call(t)}var vt=e(function(t,n){var r=a(t,n);return a(t,function(){return N(Q,z(r,arguments[0]),Array.prototype.slice.call(arguments,1))})}),mt=r(function(t){return vt(t.length,t)}),bt=e(function(t,n){return gt(t)?function(){return t.apply(this,arguments)&&n.apply(this,arguments)}:mt(J)(t,n)}),xt=r(function(t){return a(t.length,t)}),wt=xt(function(t){return t.apply(this,Array.prototype.slice.call(arguments,1))});function jt(t){return function n(r){for(var e,u,i,o=[],c=0,a=r.length;a>c;){if(A(r[c]))for(i=0,u=(e=t?n(r[c]):r[c]).length;u>i;)o[o.length]=e[i],i+=1;else o[o.length]=r[c];c+=1}return o}}var At=function(t){var n=function(t){return{"@@transducer/init":g.init,"@@transducer/result":function(n){return t["@@transducer/result"](n)},"@@transducer/step":function(n,r){var e=t["@@transducer/step"](n,r);return e["@@transducer/reduced"]?{"@@transducer/value":e,"@@transducer/reduced":!0}:e}}}(t);return{"@@transducer/init":g.init,"@@transducer/result":function(t){return n["@@transducer/result"](t)},"@@transducer/step":function(t,r){return A(r)?N(n,t,r):N(n,t,[r])}}},Ot=e(function(t,n){return z(t,At(n))}),St=e(y(["fantasy-land/chain","chain"],Ot,function(t,n){return"function"==typeof n?function(r){return t(n(r))(r)}:jt(!1)(z(t,n))})),Et=f(function(t,n,r){if(t>n)throw Error("min must not be greater than max in clamp(min, max, value)");return t>r?t:r>n?n:r});function _t(t){return RegExp(t.source,(t.global?"g":"")+(t.ignoreCase?"i":"")+(t.multiline?"m":"")+(t.sticky?"y":"")+(t.unicode?"u":""))}var qt=r(function(t){return null===t?"Null":void 0===t?"Undefined":Object.prototype.toString.call(t).slice(8,-1)});function kt(t,n,r,e){var u=function(u){for(var i=n.length,o=0;i>o;){if(t===n[o])return r[o];o+=1}for(var c in n[o+1]=t,r[o+1]=u,t)u[c]=e?kt(t[c],n,r,!0):t[c];return u};switch(qt(t)){case"Object":return u({});case"Array":return u([]);case"Date":return new Date(t.valueOf());case"RegExp":return _t(t);default:return t}}var Nt=r(function(t){return null!=t&&"function"==typeof t.clone?t.clone():kt(t,[],[],!0)}),Wt=r(function(t){return function(n,r){return t(n,r)?-1:t(r,n)?1:0}}),It=r(function(t){return!t}),Pt=mt(It);function Tt(t,n){return function(){return n.call(this,t.apply(this,arguments))}}function Ct(t,n){return function(){var r=arguments.length;if(0===r)return n();var e=arguments[r-1];return p(e)||"function"!=typeof e[t]?n.apply(this,arguments):e[t].apply(e,Array.prototype.slice.call(arguments,0,r-1))}}var Bt=f(Ct("slice",function(t,n,r){return Array.prototype.slice.call(r,t,n)})),Ft=r(Ct("tail",Bt(1,1/0)));function Rt(){if(0===arguments.length)throw Error("pipe requires at least one argument");return o(arguments[0].length,V(Tt,arguments[0],Ft(arguments)))}var Ut=r(function(t){return j(t)?t.split("").reverse().join(""):Array.prototype.slice.call(t,0).reverse()});function Dt(){if(0===arguments.length)throw Error("compose requires at least one argument");return Rt.apply(this,Ut(arguments))}function zt(){if(0===arguments.length)throw Error("composeK requires at least one argument");var t=Array.prototype.slice.call(arguments),n=t.pop();return Dt(Dt.apply(this,z(St,t)),n)}function Mt(t,n){return function(){var r=this;return t.apply(r,arguments).then(function(t){return n.call(r,t)})}}function Lt(){if(0===arguments.length)throw Error("pipeP requires at least one argument");return o(arguments[0].length,V(Mt,arguments[0],Ft(arguments)))}var Kt=e(function(t,n){var r=0>t?n.length+t:t;return j(n)?n.charAt(r):n[r]}),Vt=Kt(0);function $t(t){return t}var Ht=r($t),Jt=e(function(t,n){if(0>=n.length)return Ht;var r=Vt(n),e=Ft(n);return o(r.length,function(){return N(function(n,r){return t.call(this,r,n)},r.apply(this,arguments),e)})}),Xt=e(function(t,n){return Jt.call(this,t,Ut(n))});function Yt(t){for(var n,r=[];!(n=t.next()).done;)r.push(n.value);return r}function Zt(t,n,r){for(var e=0,u=r.length;u>e;){if(t(n,r[e]))return!0;e+=1}return!1}var Gt="function"==typeof Object.is?Object.is:function(t,n){return t===n?0!==t||1/t==1/n:t!=t&&n!=n};function Qt(t,n,r,e){var u=Yt(t);function i(t,n){return tn(t,n,r.slice(),e.slice())}return!Zt(function(t,n){return!Zt(i,n,t)},Yt(n),u)}function tn(t,n,r,e){if(Gt(t,n))return!0;var u,i=qt(t);if(i!==qt(n))return!1;if(null==t||null==n)return!1;if("function"==typeof t["fantasy-land/equals"]||"function"==typeof n["fantasy-land/equals"])return"function"==typeof t["fantasy-land/equals"]&&t["fantasy-land/equals"](n)&&"function"==typeof n["fantasy-land/equals"]&&n["fantasy-land/equals"](t);if("function"==typeof t.equals||"function"==typeof n.equals)return"function"==typeof t.equals&&t.equals(n)&&"function"==typeof n.equals&&n.equals(t);switch(i){case"Arguments":case"Array":case"Object":if("function"==typeof t.constructor&&"Promise"===(null==(u=(t.constructor+"").match(/^function (\w*)/))?"":u[1]))return t===n;break;case"Boolean":case"Number":case"String":if(typeof t!=typeof n||!Gt(t.valueOf(),n.valueOf()))return!1;break;case"Date":if(!Gt(t.valueOf(),n.valueOf()))return!1;break;case"Error":return t.name===n.name&&t.message===n.message;case"RegExp":if(t.source!==n.source||t.global!==n.global||t.ignoreCase!==n.ignoreCase||t.multiline!==n.multiline||t.sticky!==n.sticky||t.unicode!==n.unicode)return!1}for(var o=r.length-1;o>=0;){if(r[o]===t)return e[o]===n;o-=1}switch(i){case"Map":return t.size===n.size&&Qt(t.entries(),n.entries(),r.concat([t]),e.concat([n]));case"Set":return t.size===n.size&&Qt(t.values(),n.values(),r.concat([t]),e.concat([n]));case"Arguments":case"Array":case"Object":case"Boolean":case"Number":case"String":case"Date":case"Error":case"RegExp":case"Int8Array":case"Uint8Array":case"Uint8ClampedArray":case"Int16Array":case"Uint16Array":case"Int32Array":case"Uint32Array":case"Float32Array":case"Float64Array":case"ArrayBuffer":break;default:return!1}var c=D(t);if(c.length!==D(n).length)return!1;var a=r.concat([t]),s=e.concat([n]);for(o=c.length-1;o>=0;){var f=c[o];if(!P(f,n)||!tn(n[f],t[f],a,s))return!1;o-=1}return!0}var nn=e(function(t,n){return tn(t,n,[],[])});function rn(t,n,r){var e,u;if("function"==typeof t.indexOf)switch(typeof n){case"number":if(0===n){for(e=1/n;t.length>r;){if(0===(u=t[r])&&1/u===e)return r;r+=1}return-1}if(n!=n){for(;t.length>r;){if("number"==typeof(u=t[r])&&u!=u)return r;r+=1}return-1}return t.indexOf(n,r);case"string":case"boolean":case"function":case"undefined":return t.indexOf(n,r);case"object":if(null===n)return t.indexOf(n,r)}for(;t.length>r;){if(nn(t[r],n))return r;r+=1}return-1}function en(t,n){return rn(n,t,0)>=0}function un(t){return'"'+t.replace(/\\/g,"\\\\").replace(/[\b]/g,"\\b").replace(/\f/g,"\\f").replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\v/g,"\\v").replace(/\0/g,"\\0").replace(/"/g,'\\"')+'"'}var on=function(t){return(10>t?"0":"")+t},cn="function"==typeof Date.prototype.toISOString?function(t){return t.toISOString()}:function(t){return t.getUTCFullYear()+"-"+on(t.getUTCMonth()+1)+"-"+on(t.getUTCDate())+"T"+on(t.getUTCHours())+":"+on(t.getUTCMinutes())+":"+on(t.getUTCSeconds())+"."+(t.getUTCMilliseconds()/1e3).toFixed(3).slice(2,5)+"Z"};function an(t){return function(){return!t.apply(this,arguments)}}function sn(t,n){for(var r=0,e=n.length,u=[];e>r;)t(n[r])&&(u[u.length]=n[r]),r+=1;return u}function fn(t){return"[object Object]"===Object.prototype.toString.call(t)}function ln(t,n){this.xf=n,this.f=t}ln.prototype["@@transducer/init"]=g.init,ln.prototype["@@transducer/result"]=g.result,ln.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):t};var pn=e(function(t,n){return new ln(t,n)}),hn=e(y(["filter"],pn,function(t,n){return fn(n)?N(function(r,e){return t(n[e])&&(r[e]=n[e]),r},{},D(n)):sn(t,n)})),yn=e(function(t,n){return hn(an(t),n)});function dn(t,n){var r=function(r){var e=n.concat([t]);return en(r,e)?"<Circular>":dn(r,e)},e=function(t,n){return w(function(n){return un(n)+": "+r(t[n])},n.slice().sort())};switch(Object.prototype.toString.call(t)){case"[object Arguments]":return"(function() { return arguments; }("+w(r,t).join(", ")+"))";case"[object Array]":return"["+w(r,t).concat(e(t,yn(function(t){return/^\d+$/.test(t)},D(t)))).join(", ")+"]";case"[object Boolean]":return"object"==typeof t?"new Boolean("+r(t.valueOf())+")":""+t;case"[object Date]":return"new Date("+(isNaN(t.valueOf())?r(NaN):un(cn(t)))+")";case"[object Null]":return"null";case"[object Number]":return"object"==typeof t?"new Number("+r(t.valueOf())+")":1/t==-1/0?"-0":t.toString(10);case"[object String]":return"object"==typeof t?"new String("+r(t.valueOf())+")":un(t);case"[object Undefined]":return"undefined";default:if("function"==typeof t.toString){var u=""+t;if("[object Object]"!==u)return u}return"{"+e(t,D(t)).join(", ")+"}"}}var gn=r(function(t){return dn(t,[])}),vn=e(function(t,n){if(p(t)){if(p(n))return t.concat(n);throw new TypeError(gn(n)+" is not an array")}if(j(t)){if(j(n))return t+n;throw new TypeError(gn(n)+" is not a string")}if(null!=t&&gt(t["fantasy-land/concat"]))return t["fantasy-land/concat"](n);if(null!=t&&gt(t.concat))return t.concat(n);throw new TypeError(gn(t)+' does not have a method named "concat" or "fantasy-land/concat"')}),mn=r(function(t){return o(V(x,0,z(function(t){return t[0].length},t)),function(){for(var n=0;t.length>n;){if(t[n][0].apply(this,arguments))return t[n][1].apply(this,arguments);n+=1}})}),bn=e(function(t,n){if(t>10)throw Error("Constructor with greater than ten arguments");return 0===t?function(){return new n}:xt(yt(t,function(t,r,e,u,i,o,c,a,s,f){switch(arguments.length){case 1:return new n(t);case 2:return new n(t,r);case 3:return new n(t,r,e);case 4:return new n(t,r,e,u);case 5:return new n(t,r,e,u,i);case 6:return new n(t,r,e,u,i,o);case 7:return new n(t,r,e,u,i,o,c);case 8:return new n(t,r,e,u,i,o,c,a);case 9:return new n(t,r,e,u,i,o,c,a,s);case 10:return new n(t,r,e,u,i,o,c,a,s,f)}}))}),xn=r(function(t){return bn(t.length,t)}),wn=e(en),jn=e(function(t,n){return a(V(x,0,K("length",n)),function(){var r=arguments,e=this;return t.apply(e,w(function(t){return t.apply(e,r)},n))})});function An(t,n,r,e){this.valueFn=t,this.valueAcc=n,this.keyFn=r,this.xf=e,this.inputs={}}An.prototype["@@transducer/init"]=g.init,An.prototype["@@transducer/result"]=function(t){var n;for(n in this.inputs)if(P(n,this.inputs)&&(t=this.xf["@@transducer/step"](t,this.inputs[n]))["@@transducer/reduced"]){t=t["@@transducer/value"];break}return this.inputs=null,this.xf["@@transducer/result"](t)},An.prototype["@@transducer/step"]=function(t,n){var r=this.keyFn(n);return this.inputs[r]=this.inputs[r]||[r,this.valueAcc],this.inputs[r][1]=this.valueFn(this.inputs[r][1],n),t};var On=c(4,[],function(t,n,r,e){return new An(t,n,r,e)}),Sn=c(4,[],y([],On,function(t,n,r,e){return N(function(e,u){var i=r(u);return e[i]=t(P(i,e)?e[i]:n,u),e},{},e)})),En=Sn(function(t,n){return t+1},0),_n=u(-1),qn=e(function(t,n){return null==n||n!=n?t:n}),kn=f(function(t,n,r){var e=t(n),u=t(r);return e>u?-1:u>e?1:0});function Nn(){this._nativeSet="function"==typeof Set?new Set:null,this._items={}}function Wn(t,n,r){var e,u=typeof t;switch(u){case"string":case"number":return 0===t&&1/t==-1/0?!!r._items["-0"]||(n&&(r._items["-0"]=!0),!1):null!==r._nativeSet?n?(e=r._nativeSet.size,r._nativeSet.add(t),r._nativeSet.size===e):r._nativeSet.has(t):u in r._items?t in r._items[u]||(n&&(r._items[u][t]=!0),!1):(n&&(r._items[u]={},r._items[u][t]=!0),!1);case"boolean":if(u in r._items){var i=t?1:0;return!!r._items[u][i]||(n&&(r._items[u][i]=!0),!1)}return n&&(r._items[u]=t?[!1,!0]:[!0,!1]),!1;case"function":return null!==r._nativeSet?n?(e=r._nativeSet.size,r._nativeSet.add(t),r._nativeSet.size===e):r._nativeSet.has(t):u in r._items?!!en(t,r._items[u])||(n&&r._items[u].push(t),!1):(n&&(r._items[u]=[t]),!1);case"undefined":return!!r._items[u]||(n&&(r._items[u]=!0),!1);case"object":if(null===t)return!!r._items.null||(n&&(r._items.null=!0),!1);default:return(u=Object.prototype.toString.call(t))in r._items?!!en(t,r._items[u])||(n&&r._items[u].push(t),!1):(n&&(r._items[u]=[t]),!1)}}Nn.prototype.add=function(t){return!Wn(t,!0,this)},Nn.prototype.has=function(t){return Wn(t,!1,this)};var In=e(function(t,n){for(var r=[],e=0,u=t.length,i=n.length,o=new Nn,c=0;i>c;c+=1)o.add(n[c]);for(;u>e;)o.add(t[e])&&(r[r.length]=t[e]),e+=1;return r}),Pn=f(function(t,n,r){for(var e=[],u=0,i=n.length;i>u;)Zt(t,n[u],r)||Zt(t,n[u],e)||e.push(n[u]),u+=1;return e}),Tn=e(function(t,n){var r={};for(var e in n)r[e]=n[e];return delete r[t],r}),Cn=f(function(t,n,r){var e=Array.prototype.slice.call(r,0);return e.splice(t,n),e}),Bn=f(function(t,n,r){return l(t,H(n),r)}),Fn=e(function t(n,r){switch(n.length){case 0:return r;case 1:return lt(n[0])&&p(r)?Cn(n[0],1,r):Tn(n[0],r);default:var e=n[0],u=Array.prototype.slice.call(n,1);return null==r[e]?r:lt(e)&&p(r)?Bn(e,t(u,r[e]),r):ft(e,t(u,r[e]),r)}}),Rn=e(function(t,n){return t/n});function Un(t,n){this.xf=n,this.n=t}Un.prototype["@@transducer/init"]=g.init,Un.prototype["@@transducer/result"]=g.result,Un.prototype["@@transducer/step"]=function(t,n){return this.n>0?(this.n-=1,t):this.xf["@@transducer/step"](t,n)};var Dn=e(function(t,n){return new Un(t,n)}),zn=e(y(["drop"],Dn,function(t,n){return Bt(Math.max(0,t),1/0,n)}));function Mn(t,n){this.xf=n,this.n=t,this.i=0}Mn.prototype["@@transducer/init"]=g.init,Mn.prototype["@@transducer/result"]=g.result,Mn.prototype["@@transducer/step"]=function(t,n){this.i+=1;var r=0===this.n?t:this.xf["@@transducer/step"](t,n);return 0>this.n||this.n>this.i?r:d(r)};var Ln=e(function(t,n){return new Mn(t,n)}),Kn=e(y(["take"],Ln,function(t,n){return Bt(0,0>t?1/0:t,n)}));function Vn(t,n){this.xf=n,this.pos=0,this.full=!1,this.acc=Array(t)}Vn.prototype["@@transducer/init"]=g.init,Vn.prototype["@@transducer/result"]=function(t){return this.acc=null,this.xf["@@transducer/result"](t)},Vn.prototype["@@transducer/step"]=function(t,n){return this.full&&(t=this.xf["@@transducer/step"](t,this.acc[this.pos])),this.store(n),t},Vn.prototype.store=function(t){this.acc[this.pos]=t,this.pos+=1,this.pos===this.acc.length&&(this.pos=0,this.full=!0)};var $n=e(function(t,n){return new Vn(t,n)}),Hn=e(y([],$n,function(t,n){return Kn(n.length>t?n.length-t:0,n)}));function Jn(t,n){this.f=t,this.retained=[],this.xf=n}Jn.prototype["@@transducer/init"]=g.init,Jn.prototype["@@transducer/result"]=function(t){return this.retained=null,this.xf["@@transducer/result"](t)},Jn.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.retain(t,n):this.flush(t,n)},Jn.prototype.flush=function(t,n){return t=N(this.xf["@@transducer/step"],t,this.retained),this.retained=[],this.xf["@@transducer/step"](t,n)},Jn.prototype.retain=function(t,n){return this.retained.push(n),t};var Xn=e(function(t,n){return new Jn(t,n)}),Yn=e(y([],Xn,function(t,n){for(var r=n.length-1;r>=0&&t(n[r]);)r-=1;return Bt(0,r+1,n)}));function Zn(t,n){this.xf=n,this.pred=t,this.lastValue=void 0,this.seenFirstValue=!1}Zn.prototype["@@transducer/init"]=g.init,Zn.prototype["@@transducer/result"]=g.result,Zn.prototype["@@transducer/step"]=function(t,n){var r=!1;return this.seenFirstValue?this.pred(this.lastValue,n)&&(r=!0):this.seenFirstValue=!0,this.lastValue=n,r?t:this.xf["@@transducer/step"](t,n)};var Gn=e(function(t,n){return new Zn(t,n)}),Qn=Kt(-1),tr=e(y([],Gn,function(t,n){var r=[],e=1,u=n.length;if(0!==u)for(r[0]=n[0];u>e;)t(Qn(r),n[e])||(r[r.length]=n[e]),e+=1;return r})),nr=r(y([],Gn(nn),tr(nn)));function rr(t,n){this.xf=n,this.f=t}rr.prototype["@@transducer/init"]=g.init,rr.prototype["@@transducer/result"]=g.result,rr.prototype["@@transducer/step"]=function(t,n){if(this.f){if(this.f(n))return t;this.f=null}return this.xf["@@transducer/step"](t,n)};var er=e(function(t,n){return new rr(t,n)}),ur=e(y(["dropWhile"],er,function(t,n){for(var r=0,e=n.length;e>r&&t(n[r]);)r+=1;return Bt(r,1/0,n)})),ir=e(function(t,n){return t||n}),or=e(function(t,n){return gt(t)?function(){return t.apply(this,arguments)||n.apply(this,arguments)}:mt(ir)(t,n)}),cr=r(function(t){return null!=t&&"function"==typeof t["fantasy-land/empty"]?t["fantasy-land/empty"]():null!=t&&null!=t.constructor&&"function"==typeof t.constructor["fantasy-land/empty"]?t.constructor["fantasy-land/empty"]():null!=t&&"function"==typeof t.empty?t.empty():null!=t&&null!=t.constructor&&"function"==typeof t.constructor.empty?t.constructor.empty():p(t)?[]:j(t)?"":fn(t)?{}:C(t)?function(){return arguments}():void 0}),ar=e(function(t,n){return zn(0>t?0:n.length-t,n)}),sr=e(function(t,n){return nn(ar(t.length,n),t)}),fr=f(function(t,n,r){return nn(t(n),t(r))}),lr=f(function(t,n,r){return nn(n[t],r[t])}),pr=e(function t(n,r){var e,u,i,o=r instanceof Array?[]:{};for(u in r)o[u]="function"===(i=typeof(e=n[u]))?e(r[u]):e&&"object"===i?t(e,r[u]):r[u];return o});function hr(t,n){this.xf=n,this.f=t,this.found=!1}hr.prototype["@@transducer/init"]=g.init,hr.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,void 0)),this.xf["@@transducer/result"](t)},hr.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.found=!0,t=d(this.xf["@@transducer/step"](t,n))),t};var yr=e(function(t,n){return new hr(t,n)}),dr=e(y(["find"],yr,function(t,n){for(var r=0,e=n.length;e>r;){if(t(n[r]))return n[r];r+=1}}));function gr(t,n){this.xf=n,this.f=t,this.idx=-1,this.found=!1}gr.prototype["@@transducer/init"]=g.init,gr.prototype["@@transducer/result"]=function(t){return this.found||(t=this.xf["@@transducer/step"](t,-1)),this.xf["@@transducer/result"](t)},gr.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.found=!0,t=d(this.xf["@@transducer/step"](t,this.idx))),t};var vr=e(function(t,n){return new gr(t,n)}),mr=e(y([],vr,function(t,n){for(var r=0,e=n.length;e>r;){if(t(n[r]))return r;r+=1}return-1}));function br(t,n){this.xf=n,this.f=t}br.prototype["@@transducer/init"]=g.init,br.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.last))},br.prototype["@@transducer/step"]=function(t,n){return this.f(n)&&(this.last=n),t};var xr=e(function(t,n){return new br(t,n)}),wr=e(y([],xr,function(t,n){for(var r=n.length-1;r>=0;){if(t(n[r]))return n[r];r-=1}}));function jr(t,n){this.xf=n,this.f=t,this.idx=-1,this.lastIdx=-1}jr.prototype["@@transducer/init"]=g.init,jr.prototype["@@transducer/result"]=function(t){return this.xf["@@transducer/result"](this.xf["@@transducer/step"](t,this.lastIdx))},jr.prototype["@@transducer/step"]=function(t,n){return this.idx+=1,this.f(n)&&(this.lastIdx=this.idx),t};var Ar=e(function(t,n){return new jr(t,n)}),Or=e(y([],Ar,function(t,n){for(var r=n.length-1;r>=0;){if(t(n[r]))return r;r-=1}return-1})),Sr=r(jt(!0)),Er=r(function(t){return a(t.length,function(n,r){var e=Array.prototype.slice.call(arguments,0);return e[0]=r,e[1]=n,t.apply(this,e)})}),_r=e(Ct("forEach",function(t,n){for(var r=n.length,e=0;r>e;)t(n[e]),e+=1;return n})),qr=e(function(t,n){for(var r=D(n),e=0;r.length>e;){var u=r[e];t(n[u],u,n),e+=1}return n}),kr=r(function(t){for(var n={},r=0;t.length>r;)n[t[r][0]]=t[r][1],r+=1;return n}),Nr=e(Ct("groupBy",Sn(function(t,n){return null==t&&(t=[]),t.push(n),t},null))),Wr=e(function(t,n){for(var r=[],e=0,u=n.length;u>e;){for(var i=e+1;u>i&&t(n[i-1],n[i]);)i+=1;r.push(n.slice(e,i)),e=i}return r}),Ir=e(function(t,n){return t>n}),Pr=e(function(t,n){return t>=n}),Tr=e(function(t,n){if(0===t.length)return!1;for(var r=n,e=0;t.length>e;){if(!P(t[e],r))return!1;r=r[t[e]],e+=1}return!0}),Cr=e(function(t,n){return Tr([t],n)}),Br=e(function(t,n){return t in n}),Fr=e(Gt),Rr=f(function(t,n,r){return a(Math.max(t.length,n.length,r.length),function(){return t.apply(this,arguments)?n.apply(this,arguments):r.apply(this,arguments)})}),Ur=u(1),Dr=e(en),zr=Sn(function(t,n){return n},null),Mr=e(function(t,n){return"function"!=typeof n.indexOf||p(n)?rn(n,t,0):n.indexOf(t)}),Lr=Bt(0,-1),Kr=f(function(t,n,r){return sn(function(n){return Zt(t,n,r)},n)}),Vr=f(function(t,n,r){t=r.length>t&&t>=0?t:r.length;var e=Array.prototype.slice.call(r,0);return e.splice(t,0,n),e}),$r=f(function(t,n,r){return[].concat(Array.prototype.slice.call(r,0,t=r.length>t&&t>=0?t:r.length),n,Array.prototype.slice.call(r,t))}),Hr=e(function(t,n){for(var r,e,u=new Nn,i=[],o=0;n.length>o;)r=t(e=n[o]),u.add(r)&&i.push(e),o+=1;return i}),Jr=Hr(Ht),Xr=e(function(t,n){var r,e;return t.length>n.length?(r=t,e=n):(r=n,e=t),Jr(sn(Er(en)(r),e))}),Yr=e(Ct("intersperse",function(t,n){for(var r=[],e=0,u=n.length;u>e;)e===u-1?r.push(n[e]):r.push(n[e],t),e+=1;return r}));var Zr="function"==typeof Object.assign?Object.assign:function(t){if(null==t)throw new TypeError("Cannot convert undefined or null to object");for(var n=Object(t),r=1,e=arguments.length;e>r;){var u=arguments[r];if(null!=u)for(var i in u)P(i,u)&&(n[i]=u[i]);r+=1}return n},Gr=e(function(t,n){var r={};return r[t]=n,r}),Qr={"@@transducer/init":Array,"@@transducer/step":function(t,n){return t.push(n),t},"@@transducer/result":$t},te={"@@transducer/init":String,"@@transducer/step":function(t,n){return t+n},"@@transducer/result":$t},ne={"@@transducer/init":Object,"@@transducer/step":function(t,n){return Zr(t,A(n)?Gr(n[0],n[1]):n)},"@@transducer/result":$t};var re=f(function(t,n,r){return h(t)?N(n(t),t["@@transducer/init"](),r):N(n(function(t){if(h(t))return t;if(A(t))return Qr;if("string"==typeof t)return te;if("object"==typeof t)return ne;throw Error("Cannot create transformer for "+t)}(t)),kt(t,[],[],!1),r)}),ee=r(function(t){for(var n=D(t),r=n.length,e=0,u={};r>e;){var i=n[e],o=t[i],c=P(o,u)?u[o]:u[o]=[];c[c.length]=i,e+=1}return u}),ue=r(function(t){for(var n=D(t),r=n.length,e=0,u={};r>e;){var i=n[e];u[t[i]]=i,e+=1}return u}),ie=e(function(t,n){return a(t+1,function(){var r=arguments[t];if(null!=r&&gt(r[n]))return r[n].apply(r,Array.prototype.slice.call(arguments,0,t));throw new TypeError(gn(r)+' does not have a method named "'+n+'"')})}),oe=e(function(t,n){return null!=n&&n.constructor===t||n instanceof t}),ce=r(function(t){return null!=t&&nn(t,cr(t))}),ae=ie(1,"join"),se=r(function(t){return jn(function(){return Array.prototype.slice.call(arguments,0)},t)}),fe=r(function(t){var n,r=[];for(n in t)r[r.length]=n;return r}),le=e(function(t,n){if("function"!=typeof n.lastIndexOf||p(n)){for(var r=n.length-1;r>=0;){if(nn(n[r],t))return r;r-=1}return-1}return n.lastIndexOf(t)});function pe(t){return"[object Number]"===Object.prototype.toString.call(t)}var he=r(function(t){return null!=t&&pe(t.length)?t.length:NaN}),ye=e(function(t,n){return function(r){return function(e){return z(function(t){return n(t,e)},r(t(e)))}}}),de=r(function(t){return ye(Kt(t),Bn(t))}),ge=r(function(t){return ye(M(t),ht(t))}),ve=r(function(t){return ye(L(t),ft(t))}),me=e(function(t,n){return n>t}),be=e(function(t,n){return n>=t}),xe=f(function(t,n,r){for(var e=0,u=r.length,i=[],o=[n];u>e;)o=t(o[0],r[e]),i[e]=o[1],e+=1;return[o[0],i]}),we=f(function(t,n,r){for(var e=r.length-1,u=[],i=[n];e>=0;)i=t(i[0],r[e]),u[e]=i[1],e-=1;return[i[0],u]}),je=e(function(t,n){return N(function(r,e){return r[e]=t(n[e],e,n),r},{},D(n))}),Ae=e(function(t,n){return n.match(t)||[]}),Oe=e(function(t,n){return lt(t)?!lt(n)||1>n?NaN:(t%n+n)%n:NaN}),Se=f(function(t,n,r){return t(r)>t(n)?r:n}),Ee=V(u,0),_e=r(function(t){return Ee(t)/t.length}),qe=r(function(t){var n=t.length;if(0===n)return NaN;var r=2-n%2,e=(n-r)/2;return _e(Array.prototype.slice.call(t,0).sort(function(t,n){return n>t?-1:t>n?1:0}).slice(e,e+r))}),ke=e(function(t,n){var r={};return o(n.length,function(){var e=t.apply(this,arguments);return P(e,r)||(r[e]=n.apply(this,arguments)),r[e]})}),Ne=e(function(t,n){return Zr({},t,n)}),We=r(function(t){return Zr.apply(null,[{}].concat(t))}),Ie=f(function(t,n,r){var e,u={};for(e in n)P(e,n)&&(u[e]=P(e,r)?t(e,n[e],r[e]):n[e]);for(e in r)P(e,r)&&!P(e,u)&&(u[e]=r[e]);return u}),Pe=f(function t(n,r,e){return Ie(function(r,e,u){return fn(e)&&fn(u)?t(n,e,u):n(r,e,u)},r,e)}),Te=e(function(t,n){return Pe(function(t,n,r){return n},t,n)}),Ce=e(function(t,n){return Pe(function(t,n,r){return r},t,n)}),Be=f(function(t,n,r){return Pe(function(n,r,e){return t(r,e)},n,r)}),Fe=e(function(t,n){return Zr({},n,t)}),Re=e(function(t,n){return Zr({},t,n)}),Ue=f(function(t,n,r){return Ie(function(n,r,e){return t(r,e)},n,r)}),De=e(function(t,n){return t>n?n:t}),ze=f(function(t,n,r){return t(r)<t(n)?r:n}),Me=e(function(t,n){return t%n}),Le=f(function(t,n,r){var e=r.length,u=r.slice(),i=0>t?e+t:t,o=0>n?e+n:n,c=u.splice(i,1);return 0>i||i>=r.length||0>o||o>=r.length?r:[].concat(u.slice(0,o)).concat(c).concat(u.slice(o,r.length))}),Ke=e(function(t,n){return t*n}),Ve=r(function(t){return-t}),$e=e(function(t,n){return b(an(t),n)}),He=r(function(t){return a(0>t?1:t+1,function(){return Kt(t,arguments)})}),Je=f(function(t,n,r){return t(n(r))});var Xe=r(function(t){return[t]}),Ye=e(function(t,n){for(var r={},e={},u=0,i=t.length;i>u;)e[t[u]]=1,u+=1;for(var o in n)e.hasOwnProperty(o)||(r[o]=n[o]);return r}),Ze=r(function(t){var n,r=!1;return o(t.length,function(){return r?n:(r=!0,n=t.apply(this,arguments))})});function Ge(t,n){if(null==n||!gt(n.then))throw new TypeError("`"+t+"` expected a Promise, received "+dn(n,[]))}var Qe=e(function(t,n){return Ge("otherwise",n),n.then(null,t)}),tu=function(t){return{value:t,map:function(n){return tu(n(t))}}},nu=f(function(t,n,r){return t(function(t){return tu(n(t))})(r).value}),ru=e(function(t,n){return[t,n]});function eu(t){return e(function(n,r){return o(Math.max(0,n.length-r.length),function(){return n.apply(this,t(r,arguments))})})}var uu=eu(i),iu=eu(Er(i)),ou=se([hn,yn]),cu=f(function(t,n,r){return nn(M(t,r),n)}),au=f(function(t,n,r){return qn(t,M(n,r))}),su=f(function(t,n,r){return n.length>0&&t(M(n,r))}),fu=e(function(t,n){for(var r={},e=0;t.length>e;)t[e]in n&&(r[t[e]]=n[t[e]]),e+=1;return r}),lu=e(function(t,n){for(var r={},e=0,u=t.length;u>e;){var i=t[e];r[i]=n[i],e+=1}return r}),pu=e(function(t,n){var r={};for(var e in n)t(n[e],e,n)&&(r[e]=n[e]);return r});var hu=e(function(t,n){return i([t],n)}),yu=V(Ke,1),du=e(function(t,n){return a(n.length,function(){for(var r=[],e=0;n.length>e;)r.push(n[e].call(this,arguments[e])),e+=1;return t.apply(this,r.concat(Array.prototype.slice.call(arguments,n.length)))})}),gu=du(w,[lu,Ht]),vu=f(function(t,n,r){return nn(n,r[t])}),mu=f(function(t,n,r){return oe(t,r[n])}),bu=f(function(t,n,r){return au(t,[n],r)}),xu=f(function(t,n,r){return t(r[n])}),wu=e(function(t,n){for(var r=t.length,e=[],u=0;r>u;)e[u]=n[t[u]],u+=1;return e}),ju=e(function(t,n){if(!pe(t)||!pe(n))throw new TypeError("Both arguments to range must be numbers");for(var r=[],e=t;n>e;)r.push(e),e+=1;return r}),Au=f(function(t,n,r){for(var e=r.length-1;e>=0;)n=t(r[e],n),e-=1;return n}),Ou=c(4,[],function(t,n,r,e){return N(function(r,e){return t(r,e)?n(r,e):d(r)},r,e)}),Su=r(d),Eu=e(function(t,n){var r,e=+n,u=0;if(0>e||isNaN(e))throw new RangeError("n must be a non-negative number");for(r=Array(e);e>u;)r[u]=t(u),u+=1;return r}),_u=e(function(t,n){return Eu(H(t),n)}),qu=f(function(t,n,r){return r.replace(t,n)}),ku=f(function(t,n,r){for(var e=0,u=r.length,i=[n];u>e;)n=t(n,r[e]),i[e+1]=n,e+=1;return i}),Nu=e(function(t,n){return"function"==typeof n.sequence?n.sequence(t):Au(function(t,n){return Q(z(hu,t),n)},t([]),n)}),Wu=f(function(t,n,r){return nu(t,H(n),r)}),Iu=e(function(t,n){return Array.prototype.slice.call(n,0).sort(t)}),Pu=e(function(t,n){return Array.prototype.slice.call(n,0).sort(function(n,r){var e=t(n),u=t(r);return u>e?-1:e>u?1:0})}),Tu=e(function(t,n){return Array.prototype.slice.call(n,0).sort(function(n,r){for(var e=0,u=0;0===e&&t.length>u;)e=t[u](n,r),u+=1;return e})}),Cu=ie(1,"split"),Bu=e(function(t,n){return[Bt(0,t,n),Bt(t,he(n),n)]}),Fu=e(function(t,n){if(0>=t)throw Error("First argument to splitEvery must be a positive integer");for(var r=[],e=0;n.length>e;)r.push(Bt(e,e+=t,n));return r}),Ru=e(function(t,n){for(var r=0,e=n.length,u=[];e>r&&!t(n[r]);)u.push(n[r]),r+=1;return[u,Array.prototype.slice.call(n,r)]}),Uu=e(function(t,n){return nn(Kn(t.length,n),t)}),Du=e(function(t,n){return+t-+n}),zu=e(function(t,n){return vn(In(t,n),In(n,t))}),Mu=f(function(t,n,r){return vn(Pn(t,n,r),Pn(t,r,n))}),Lu=e(function(t,n){for(var r=n.length-1;r>=0&&t(n[r]);)r-=1;return Bt(r+1,1/0,n)});function Ku(t,n){this.xf=n,this.f=t}Ku.prototype["@@transducer/init"]=g.init,Ku.prototype["@@transducer/result"]=g.result,Ku.prototype["@@transducer/step"]=function(t,n){return this.f(n)?this.xf["@@transducer/step"](t,n):d(t)};var Vu=e(function(t,n){return new Ku(t,n)}),$u=e(y(["takeWhile"],Vu,function(t,n){for(var r=0,e=n.length;e>r&&t(n[r]);)r+=1;return Bt(0,r,n)}));function Hu(t,n){this.xf=n,this.f=t}Hu.prototype["@@transducer/init"]=g.init,Hu.prototype["@@transducer/result"]=g.result,Hu.prototype["@@transducer/step"]=function(t,n){return this.f(n),this.xf["@@transducer/step"](t,n)};var Ju=e(function(t,n){return new Hu(t,n)}),Xu=e(y([],Ju,function(t,n){return t(n),n}));var Yu=e(function(t,n){if("[object RegExp]"!==Object.prototype.toString.call(t))throw new TypeError("‘test’ requires a value of type RegExp as its first argument; received "+gn(t));return _t(t).test(n)}),Zu=e(function(t,n){return Ge("then",n),n.then(t)}),Gu=ie(0,"toLowerCase"),Qu=r(function(t){var n=[];for(var r in t)P(r,t)&&(n[n.length]=[r,t[r]]);return n}),ti=r(function(t){var n=[];for(var r in t)n[n.length]=[r,t[r]];return n}),ni=ie(0,"toUpperCase"),ri=a(4,function(t,n,r,e){return N(t("function"==typeof n?S(n):n),r,e)}),ei=r(function(t){for(var n=0,r=[];t.length>n;){for(var e=t[n],u=0;e.length>u;)void 0===r[u]&&(r[u]=[]),r[u].push(e[u]),u+=1;n+=1}return r}),ui=f(function(t,n,r){return"function"==typeof r["fantasy-land/traverse"]?r["fantasy-land/traverse"](n,t):Nu(t,z(n,r))}),ii="\t\n\v\f\r   ᠎             　\u2028\u2029\ufeff",oi=!("function"==typeof String.prototype.trim)||ii.trim()?r(function(t){var n=RegExp("^["+ii+"]["+ii+"]*"),r=RegExp("["+ii+"]["+ii+"]*$");return t.replace(n,"").replace(r,"")}):r(function(t){return t.trim()}),ci=e(function(t,n){return o(t.length,function(){try{return t.apply(this,arguments)}catch(t){return n.apply(this,i([t],arguments))}})}),ai=r(function(t){return function(){return t(Array.prototype.slice.call(arguments,0))}}),si=r(function(t){return yt(1,t)}),fi=e(function(t,n){return a(t,function(){for(var r,e=1,u=n,i=0;t>=e&&"function"==typeof u;)u=u.apply(this,Array.prototype.slice.call(arguments,i,r=e===t?arguments.length:i+u.length)),e+=1,i=r;return u})}),li=e(function(t,n){for(var r=t(n),e=[];r&&r.length;)e[e.length]=r[0],r=t(r[1]);return e}),pi=e(Dt(Jr,i)),hi=e(function(t,n){for(var r,e=0,u=n.length,i=[];u>e;)Zt(t,r=n[e],i)||(i[i.length]=r),e+=1;return i}),yi=f(function(t,n,r){return hi(t,i(n,r))}),di=f(function(t,n,r){return t(r)?r:n(r)}),gi=St($t),vi=f(function(t,n,r){for(var e=r;!t(e);)e=n(e);return e}),mi=r(function(t){var n,r=[];for(n in t)r[r.length]=t[n];return r}),bi=function(t){return{value:t,"fantasy-land/map":function(){return this}}},xi=e(function(t,n){return t(bi)(n).value}),wi=f(function(t,n,r){return t(r)?n(r):r}),ji=e(function(t,n){for(var r in t)if(P(r,t)&&!t[r](n[r]))return!1;return!0}),Ai=e(function(t,n){return ji(z(nn,t),n)}),Oi=e(function(t,n){return yn(Er(en)(t),n)}),Si=e(function(t,n){for(var r,e=0,u=t.length,i=n.length,o=[];u>e;){for(r=0;i>r;)o[o.length]=[t[e],n[r]],r+=1;e+=1}return o}),Ei=e(function(t,n){for(var r=[],e=0,u=Math.min(t.length,n.length);u>e;)r[e]=[t[e],n[e]],e+=1;return r}),_i=e(function(t,n){for(var r=0,e=Math.min(t.length,n.length),u={};e>r;)u[t[r]]=n[r],r+=1;return u}),qi=f(function(t,n,r){for(var e=[],u=0,i=Math.min(n.length,r.length);i>u;)e[u]=t(n[u],r[u]),u+=1;return e}),ki=r(function(t){return a(t.length,function(){var n=arguments;return function(){return t.apply(this,n)}})});t.F=function(){return!1},t.T=function(){return!0},t.__={"@@functional/placeholder":!0},t.add=u,t.addIndex=s,t.adjust=l,t.all=b,t.allPass=$,t.always=H,t.and=J,t.any=Z,t.anyPass=G,t.ap=Q,t.aperture=rt,t.append=et,t.apply=ut,t.applySpec=ct,t.applyTo=at,t.ascend=st,t.assoc=ft,t.assocPath=ht,t.binary=dt,t.bind=E,t.both=bt,t.call=wt,t.chain=St,t.clamp=Et,t.clone=Nt,t.comparator=Wt,t.complement=Pt,t.compose=Dt,t.composeK=zt,t.composeP=function(){if(0===arguments.length)throw Error("composeP requires at least one argument");return Lt.apply(this,Ut(arguments))},t.composeWith=Xt,t.concat=vn,t.cond=mn,t.construct=xn,t.constructN=bn,t.contains=wn,t.converge=jn,t.countBy=En,t.curry=xt,t.curryN=a,t.dec=_n,t.defaultTo=qn,t.descend=kn,t.difference=In,t.differenceWith=Pn,t.dissoc=Tn,t.dissocPath=Fn,t.divide=Rn,t.drop=zn,t.dropLast=Hn,t.dropLastWhile=Yn,t.dropRepeats=nr,t.dropRepeatsWith=tr,t.dropWhile=ur,t.either=or,t.empty=cr,t.endsWith=sr,t.eqBy=fr,t.eqProps=lr,t.equals=nn,t.evolve=pr,t.filter=hn,t.find=dr,t.findIndex=mr,t.findLast=wr,t.findLastIndex=Or,t.flatten=Sr,t.flip=Er,t.forEach=_r,t.forEachObjIndexed=qr,t.fromPairs=kr,t.groupBy=Nr,t.groupWith=Wr,t.gt=Ir,t.gte=Pr,t.has=Cr,t.hasIn=Br,t.hasPath=Tr,t.head=Vt,t.identical=Fr,t.identity=Ht,t.ifElse=Rr,t.inc=Ur,t.includes=Dr,t.indexBy=zr,t.indexOf=Mr,t.init=Lr,t.innerJoin=Kr,t.insert=Vr,t.insertAll=$r,t.intersection=Xr,t.intersperse=Yr,t.into=re,t.invert=ee,t.invertObj=ue,t.invoker=ie,t.is=oe,t.isEmpty=ce,t.isNil=pt,t.join=ae,t.juxt=se,t.keys=D,t.keysIn=fe,t.last=Qn,t.lastIndexOf=le,t.length=he,t.lens=ye,t.lensIndex=de,t.lensPath=ge,t.lensProp=ve,t.lift=mt,t.liftN=vt,t.lt=me,t.lte=be,t.map=z,t.mapAccum=xe,t.mapAccumRight=we,t.mapObjIndexed=je,t.match=Ae,t.mathMod=Oe,t.max=x,t.maxBy=Se,t.mean=_e,t.median=qe,t.memoizeWith=ke,t.merge=Ne,t.mergeAll=We,t.mergeDeepLeft=Te,t.mergeDeepRight=Ce,t.mergeDeepWith=Be,t.mergeDeepWithKey=Pe,t.mergeLeft=Fe,t.mergeRight=Re,t.mergeWith=Ue,t.mergeWithKey=Ie,t.min=De,t.minBy=ze,t.modulo=Me,t.move=Le,t.multiply=Ke,t.nAry=yt,t.negate=Ve,t.none=$e,t.not=It,t.nth=Kt,t.nthArg=He,t.o=Je,t.objOf=Gr,t.of=Xe,t.omit=Ye,t.once=Ze,t.or=ir,t.otherwise=Qe,t.over=nu,t.pair=ru,t.partial=uu,t.partialRight=iu,t.partition=ou,t.path=M,t.pathEq=cu,t.pathOr=au,t.pathSatisfies=su,t.pick=fu,t.pickAll=lu,t.pickBy=pu,t.pipe=Rt,t.pipeK=function(){if(0===arguments.length)throw Error("pipeK requires at least one argument");return zt.apply(this,Ut(arguments))},t.pipeP=Lt,t.pipeWith=Jt,t.pluck=K,t.prepend=hu,t.product=yu,t.project=gu,t.prop=L,t.propEq=vu,t.propIs=mu,t.propOr=bu,t.propSatisfies=xu,t.props=wu,t.range=ju,t.reduce=V,t.reduceBy=Sn,t.reduceRight=Au,t.reduceWhile=Ou,t.reduced=Su,t.reject=yn,t.remove=Cn,t.repeat=_u,t.replace=qu,t.reverse=Ut,t.scan=ku,t.sequence=Nu,t.set=Wu,t.slice=Bt,t.sort=Iu,t.sortBy=Pu,t.sortWith=Tu,t.split=Cu,t.splitAt=Bu,t.splitEvery=Fu,t.splitWhen=Ru,t.startsWith=Uu,t.subtract=Du,t.sum=Ee,t.symmetricDifference=zu,t.symmetricDifferenceWith=Mu,t.tail=Ft,t.take=Kn,t.takeLast=ar,t.takeLastWhile=Lu,t.takeWhile=$u,t.tap=Xu,t.test=Yu,t.then=Zu,t.times=Eu,t.toLower=Gu,t.toPairs=Qu,t.toPairsIn=ti,t.toString=gn,t.toUpper=ni,t.transduce=ri,t.transpose=ei,t.traverse=ui,t.trim=oi,t.tryCatch=ci,t.type=qt,t.unapply=ai,t.unary=si,t.uncurryN=fi,t.unfold=li,t.union=pi,t.unionWith=yi,t.uniq=Jr,t.uniqBy=Hr,t.uniqWith=hi,t.unless=di,t.unnest=gi,t.until=vi,t.update=Bn,t.useWith=du,t.values=it,t.valuesIn=mi,t.view=xi,t.when=wi,t.where=ji,t.whereEq=Ai,t.without=Oi,t.xprod=Si,t.zip=Ei,t.zipObj=_i,t.zipWith=qi,t.thunkify=ki,Object.defineProperty(t,"__esModule",{value:!0})});

/**
 * @license
 * Lodash lodash.com/license | Underscore.js 1.8.3 underscorejs.org/LICENSE
 */
;(function(){function n(n,t,r){switch(r.length){case 0:return n.call(t);case 1:return n.call(t,r[0]);case 2:return n.call(t,r[0],r[1]);case 3:return n.call(t,r[0],r[1],r[2])}return n.apply(t,r)}function t(n,t,r,e){for(var u=-1,i=null==n?0:n.length;++u<i;){var o=n[u];t(e,o,r(o),n)}return e}function r(n,t){for(var r=-1,e=null==n?0:n.length;++r<e&&false!==t(n[r],r,n););return n}function e(n,t){for(var r=null==n?0:n.length;r--&&false!==t(n[r],r,n););return n}function u(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(!t(n[r],r,n))return false;
return true}function i(n,t){for(var r=-1,e=null==n?0:n.length,u=0,i=[];++r<e;){var o=n[r];t(o,r,n)&&(i[u++]=o)}return i}function o(n,t){return!(null==n||!n.length)&&-1<v(n,t,0)}function f(n,t,r){for(var e=-1,u=null==n?0:n.length;++e<u;)if(r(t,n[e]))return true;return false}function c(n,t){for(var r=-1,e=null==n?0:n.length,u=Array(e);++r<e;)u[r]=t(n[r],r,n);return u}function a(n,t){for(var r=-1,e=t.length,u=n.length;++r<e;)n[u+r]=t[r];return n}function l(n,t,r,e){var u=-1,i=null==n?0:n.length;for(e&&i&&(r=n[++u]);++u<i;)r=t(r,n[u],u,n);
return r}function s(n,t,r,e){var u=null==n?0:n.length;for(e&&u&&(r=n[--u]);u--;)r=t(r,n[u],u,n);return r}function h(n,t){for(var r=-1,e=null==n?0:n.length;++r<e;)if(t(n[r],r,n))return true;return false}function p(n,t,r){var e;return r(n,function(n,r,u){if(t(n,r,u))return e=r,false}),e}function _(n,t,r,e){var u=n.length;for(r+=e?1:-1;e?r--:++r<u;)if(t(n[r],r,n))return r;return-1}function v(n,t,r){if(t===t)n:{--r;for(var e=n.length;++r<e;)if(n[r]===t){n=r;break n}n=-1}else n=_(n,d,r);return n}function g(n,t,r,e){
--r;for(var u=n.length;++r<u;)if(e(n[r],t))return r;return-1}function d(n){return n!==n}function y(n,t){var r=null==n?0:n.length;return r?m(n,t)/r:F}function b(n){return function(t){return null==t?T:t[n]}}function x(n){return function(t){return null==n?T:n[t]}}function j(n,t,r,e,u){return u(n,function(n,u,i){r=e?(e=false,n):t(r,n,u,i)}),r}function w(n,t){var r=n.length;for(n.sort(t);r--;)n[r]=n[r].c;return n}function m(n,t){for(var r,e=-1,u=n.length;++e<u;){var i=t(n[e]);i!==T&&(r=r===T?i:r+i)}return r;
}function A(n,t){for(var r=-1,e=Array(n);++r<n;)e[r]=t(r);return e}function E(n,t){return c(t,function(t){return[t,n[t]]})}function k(n){return function(t){return n(t)}}function S(n,t){return c(t,function(t){return n[t]})}function O(n,t){return n.has(t)}function I(n,t){for(var r=-1,e=n.length;++r<e&&-1<v(t,n[r],0););return r}function R(n,t){for(var r=n.length;r--&&-1<v(t,n[r],0););return r}function z(n){return"\\"+Un[n]}function W(n){var t=-1,r=Array(n.size);return n.forEach(function(n,e){r[++t]=[e,n];
}),r}function B(n,t){return function(r){return n(t(r))}}function L(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){var o=n[r];o!==t&&"__lodash_placeholder__"!==o||(n[r]="__lodash_placeholder__",i[u++]=r)}return i}function U(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=n}),r}function C(n){var t=-1,r=Array(n.size);return n.forEach(function(n){r[++t]=[n,n]}),r}function D(n){if(Rn.test(n)){for(var t=On.lastIndex=0;On.test(n);)++t;n=t}else n=Qn(n);return n}function M(n){return Rn.test(n)?n.match(On)||[]:n.split("");
}var T,$=1/0,F=NaN,N=[["ary",128],["bind",1],["bindKey",2],["curry",8],["curryRight",16],["flip",512],["partial",32],["partialRight",64],["rearg",256]],P=/\b__p\+='';/g,Z=/\b(__p\+=)''\+/g,q=/(__e\(.*?\)|\b__t\))\+'';/g,V=/&(?:amp|lt|gt|quot|#39);/g,K=/[&<>"']/g,G=RegExp(V.source),H=RegExp(K.source),J=/<%-([\s\S]+?)%>/g,Y=/<%([\s\S]+?)%>/g,Q=/<%=([\s\S]+?)%>/g,X=/\.|\[(?:[^[\]]*|(["'])(?:(?!\1)[^\\]|\\.)*?\1)\]/,nn=/^\w*$/,tn=/[^.[\]]+|\[(?:(-?\d+(?:\.\d+)?)|(["'])((?:(?!\2)[^\\]|\\.)*?)\2)\]|(?=(?:\.|\[\])(?:\.|\[\]|$))/g,rn=/[\\^$.*+?()[\]{}|]/g,en=RegExp(rn.source),un=/^\s+|\s+$/g,on=/^\s+/,fn=/\s+$/,cn=/\{(?:\n\/\* \[wrapped with .+\] \*\/)?\n?/,an=/\{\n\/\* \[wrapped with (.+)\] \*/,ln=/,? & /,sn=/[^\x00-\x2f\x3a-\x40\x5b-\x60\x7b-\x7f]+/g,hn=/\\(\\)?/g,pn=/\$\{([^\\}]*(?:\\.[^\\}]*)*)\}/g,_n=/\w*$/,vn=/^[-+]0x[0-9a-f]+$/i,gn=/^0b[01]+$/i,dn=/^\[object .+?Constructor\]$/,yn=/^0o[0-7]+$/i,bn=/^(?:0|[1-9]\d*)$/,xn=/[\xc0-\xd6\xd8-\xf6\xf8-\xff\u0100-\u017f]/g,jn=/($^)/,wn=/['\n\r\u2028\u2029\\]/g,mn="[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?(?:\\u200d(?:[^\\ud800-\\udfff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])[\\ufe0e\\ufe0f]?(?:[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|\\ud83c[\\udffb-\\udfff])?)*",An="(?:[\\u2700-\\u27bf]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff])"+mn,En="(?:[^\\ud800-\\udfff][\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]?|[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]|(?:\\ud83c[\\udde6-\\uddff]){2}|[\\ud800-\\udbff][\\udc00-\\udfff]|[\\ud800-\\udfff])",kn=RegExp("['\u2019]","g"),Sn=RegExp("[\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff]","g"),On=RegExp("\\ud83c[\\udffb-\\udfff](?=\\ud83c[\\udffb-\\udfff])|"+En+mn,"g"),In=RegExp(["[A-Z\\xc0-\\xd6\\xd8-\\xde]?[a-z\\xdf-\\xf6\\xf8-\\xff]+(?:['\u2019](?:d|ll|m|re|s|t|ve))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde]|$)|(?:[A-Z\\xc0-\\xd6\\xd8-\\xde]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?(?=[\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000]|[A-Z\\xc0-\\xd6\\xd8-\\xde](?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])|$)|[A-Z\\xc0-\\xd6\\xd8-\\xde]?(?:[a-z\\xdf-\\xf6\\xf8-\\xff]|[^\\ud800-\\udfff\\xac\\xb1\\xd7\\xf7\\x00-\\x2f\\x3a-\\x40\\x5b-\\x60\\x7b-\\xbf\\u2000-\\u206f \\t\\x0b\\f\\xa0\\ufeff\\n\\r\\u2028\\u2029\\u1680\\u180e\\u2000\\u2001\\u2002\\u2003\\u2004\\u2005\\u2006\\u2007\\u2008\\u2009\\u200a\\u202f\\u205f\\u3000\\d+\\u2700-\\u27bfa-z\\xdf-\\xf6\\xf8-\\xffA-Z\\xc0-\\xd6\\xd8-\\xde])+(?:['\u2019](?:d|ll|m|re|s|t|ve))?|[A-Z\\xc0-\\xd6\\xd8-\\xde]+(?:['\u2019](?:D|LL|M|RE|S|T|VE))?|\\d*(?:1ST|2ND|3RD|(?![123])\\dTH)(?=\\b|[a-z_])|\\d*(?:1st|2nd|3rd|(?![123])\\dth)(?=\\b|[A-Z_])|\\d+",An].join("|"),"g"),Rn=RegExp("[\\u200d\\ud800-\\udfff\\u0300-\\u036f\\ufe20-\\ufe2f\\u20d0-\\u20ff\\ufe0e\\ufe0f]"),zn=/[a-z][A-Z]|[A-Z]{2}[a-z]|[0-9][a-zA-Z]|[a-zA-Z][0-9]|[^a-zA-Z0-9 ]/,Wn="Array Buffer DataView Date Error Float32Array Float64Array Function Int8Array Int16Array Int32Array Map Math Object Promise RegExp Set String Symbol TypeError Uint8Array Uint8ClampedArray Uint16Array Uint32Array WeakMap _ clearTimeout isFinite parseInt setTimeout".split(" "),Bn={};
Bn["[object Float32Array]"]=Bn["[object Float64Array]"]=Bn["[object Int8Array]"]=Bn["[object Int16Array]"]=Bn["[object Int32Array]"]=Bn["[object Uint8Array]"]=Bn["[object Uint8ClampedArray]"]=Bn["[object Uint16Array]"]=Bn["[object Uint32Array]"]=true,Bn["[object Arguments]"]=Bn["[object Array]"]=Bn["[object ArrayBuffer]"]=Bn["[object Boolean]"]=Bn["[object DataView]"]=Bn["[object Date]"]=Bn["[object Error]"]=Bn["[object Function]"]=Bn["[object Map]"]=Bn["[object Number]"]=Bn["[object Object]"]=Bn["[object RegExp]"]=Bn["[object Set]"]=Bn["[object String]"]=Bn["[object WeakMap]"]=false;
var Ln={};Ln["[object Arguments]"]=Ln["[object Array]"]=Ln["[object ArrayBuffer]"]=Ln["[object DataView]"]=Ln["[object Boolean]"]=Ln["[object Date]"]=Ln["[object Float32Array]"]=Ln["[object Float64Array]"]=Ln["[object Int8Array]"]=Ln["[object Int16Array]"]=Ln["[object Int32Array]"]=Ln["[object Map]"]=Ln["[object Number]"]=Ln["[object Object]"]=Ln["[object RegExp]"]=Ln["[object Set]"]=Ln["[object String]"]=Ln["[object Symbol]"]=Ln["[object Uint8Array]"]=Ln["[object Uint8ClampedArray]"]=Ln["[object Uint16Array]"]=Ln["[object Uint32Array]"]=true,
Ln["[object Error]"]=Ln["[object Function]"]=Ln["[object WeakMap]"]=false;var Un={"\\":"\\","'":"'","\n":"n","\r":"r","\u2028":"u2028","\u2029":"u2029"},Cn=parseFloat,Dn=parseInt,Mn=typeof global=="object"&&global&&global.Object===Object&&global,Tn=typeof self=="object"&&self&&self.Object===Object&&self,$n=Mn||Tn||Function("return this")(),Fn=typeof exports=="object"&&exports&&!exports.nodeType&&exports,Nn=Fn&&typeof module=="object"&&module&&!module.nodeType&&module,Pn=Nn&&Nn.exports===Fn,Zn=Pn&&Mn.process,qn=function(){
try{var n=Nn&&Nn.f&&Nn.f("util").types;return n?n:Zn&&Zn.binding&&Zn.binding("util")}catch(n){}}(),Vn=qn&&qn.isArrayBuffer,Kn=qn&&qn.isDate,Gn=qn&&qn.isMap,Hn=qn&&qn.isRegExp,Jn=qn&&qn.isSet,Yn=qn&&qn.isTypedArray,Qn=b("length"),Xn=x({"\xc0":"A","\xc1":"A","\xc2":"A","\xc3":"A","\xc4":"A","\xc5":"A","\xe0":"a","\xe1":"a","\xe2":"a","\xe3":"a","\xe4":"a","\xe5":"a","\xc7":"C","\xe7":"c","\xd0":"D","\xf0":"d","\xc8":"E","\xc9":"E","\xca":"E","\xcb":"E","\xe8":"e","\xe9":"e","\xea":"e","\xeb":"e","\xcc":"I",
"\xcd":"I","\xce":"I","\xcf":"I","\xec":"i","\xed":"i","\xee":"i","\xef":"i","\xd1":"N","\xf1":"n","\xd2":"O","\xd3":"O","\xd4":"O","\xd5":"O","\xd6":"O","\xd8":"O","\xf2":"o","\xf3":"o","\xf4":"o","\xf5":"o","\xf6":"o","\xf8":"o","\xd9":"U","\xda":"U","\xdb":"U","\xdc":"U","\xf9":"u","\xfa":"u","\xfb":"u","\xfc":"u","\xdd":"Y","\xfd":"y","\xff":"y","\xc6":"Ae","\xe6":"ae","\xde":"Th","\xfe":"th","\xdf":"ss","\u0100":"A","\u0102":"A","\u0104":"A","\u0101":"a","\u0103":"a","\u0105":"a","\u0106":"C",
"\u0108":"C","\u010a":"C","\u010c":"C","\u0107":"c","\u0109":"c","\u010b":"c","\u010d":"c","\u010e":"D","\u0110":"D","\u010f":"d","\u0111":"d","\u0112":"E","\u0114":"E","\u0116":"E","\u0118":"E","\u011a":"E","\u0113":"e","\u0115":"e","\u0117":"e","\u0119":"e","\u011b":"e","\u011c":"G","\u011e":"G","\u0120":"G","\u0122":"G","\u011d":"g","\u011f":"g","\u0121":"g","\u0123":"g","\u0124":"H","\u0126":"H","\u0125":"h","\u0127":"h","\u0128":"I","\u012a":"I","\u012c":"I","\u012e":"I","\u0130":"I","\u0129":"i",
"\u012b":"i","\u012d":"i","\u012f":"i","\u0131":"i","\u0134":"J","\u0135":"j","\u0136":"K","\u0137":"k","\u0138":"k","\u0139":"L","\u013b":"L","\u013d":"L","\u013f":"L","\u0141":"L","\u013a":"l","\u013c":"l","\u013e":"l","\u0140":"l","\u0142":"l","\u0143":"N","\u0145":"N","\u0147":"N","\u014a":"N","\u0144":"n","\u0146":"n","\u0148":"n","\u014b":"n","\u014c":"O","\u014e":"O","\u0150":"O","\u014d":"o","\u014f":"o","\u0151":"o","\u0154":"R","\u0156":"R","\u0158":"R","\u0155":"r","\u0157":"r","\u0159":"r",
"\u015a":"S","\u015c":"S","\u015e":"S","\u0160":"S","\u015b":"s","\u015d":"s","\u015f":"s","\u0161":"s","\u0162":"T","\u0164":"T","\u0166":"T","\u0163":"t","\u0165":"t","\u0167":"t","\u0168":"U","\u016a":"U","\u016c":"U","\u016e":"U","\u0170":"U","\u0172":"U","\u0169":"u","\u016b":"u","\u016d":"u","\u016f":"u","\u0171":"u","\u0173":"u","\u0174":"W","\u0175":"w","\u0176":"Y","\u0177":"y","\u0178":"Y","\u0179":"Z","\u017b":"Z","\u017d":"Z","\u017a":"z","\u017c":"z","\u017e":"z","\u0132":"IJ","\u0133":"ij",
"\u0152":"Oe","\u0153":"oe","\u0149":"'n","\u017f":"s"}),nt=x({"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;"}),tt=x({"&amp;":"&","&lt;":"<","&gt;":">","&quot;":'"',"&#39;":"'"}),rt=function x(mn){function An(n){if(yu(n)&&!ff(n)&&!(n instanceof Un)){if(n instanceof On)return n;if(oi.call(n,"__wrapped__"))return Fe(n)}return new On(n)}function En(){}function On(n,t){this.__wrapped__=n,this.__actions__=[],this.__chain__=!!t,this.__index__=0,this.__values__=T}function Un(n){this.__wrapped__=n,
this.__actions__=[],this.__dir__=1,this.__filtered__=false,this.__iteratees__=[],this.__takeCount__=4294967295,this.__views__=[]}function Mn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Tn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Fn(n){var t=-1,r=null==n?0:n.length;for(this.clear();++t<r;){var e=n[t];this.set(e[0],e[1])}}function Nn(n){var t=-1,r=null==n?0:n.length;for(this.__data__=new Fn;++t<r;)this.add(n[t]);
}function Zn(n){this.size=(this.__data__=new Tn(n)).size}function qn(n,t){var r,e=ff(n),u=!e&&of(n),i=!e&&!u&&af(n),o=!e&&!u&&!i&&_f(n),u=(e=e||u||i||o)?A(n.length,ni):[],f=u.length;for(r in n)!t&&!oi.call(n,r)||e&&("length"==r||i&&("offset"==r||"parent"==r)||o&&("buffer"==r||"byteLength"==r||"byteOffset"==r)||Se(r,f))||u.push(r);return u}function Qn(n){var t=n.length;return t?n[ir(0,t-1)]:T}function et(n,t){return De(Ur(n),pt(t,0,n.length))}function ut(n){return De(Ur(n))}function it(n,t,r){(r===T||lu(n[t],r))&&(r!==T||t in n)||st(n,t,r);
}function ot(n,t,r){var e=n[t];oi.call(n,t)&&lu(e,r)&&(r!==T||t in n)||st(n,t,r)}function ft(n,t){for(var r=n.length;r--;)if(lu(n[r][0],t))return r;return-1}function ct(n,t,r,e){return uo(n,function(n,u,i){t(e,n,r(n),i)}),e}function at(n,t){return n&&Cr(t,Wu(t),n)}function lt(n,t){return n&&Cr(t,Bu(t),n)}function st(n,t,r){"__proto__"==t&&Ai?Ai(n,t,{configurable:true,enumerable:true,value:r,writable:true}):n[t]=r}function ht(n,t){for(var r=-1,e=t.length,u=Ku(e),i=null==n;++r<e;)u[r]=i?T:Ru(n,t[r]);return u;
}function pt(n,t,r){return n===n&&(r!==T&&(n=n<=r?n:r),t!==T&&(n=n>=t?n:t)),n}function _t(n,t,e,u,i,o){var f,c=1&t,a=2&t,l=4&t;if(e&&(f=i?e(n,u,i,o):e(n)),f!==T)return f;if(!du(n))return n;if(u=ff(n)){if(f=me(n),!c)return Ur(n,f)}else{var s=vo(n),h="[object Function]"==s||"[object GeneratorFunction]"==s;if(af(n))return Ir(n,c);if("[object Object]"==s||"[object Arguments]"==s||h&&!i){if(f=a||h?{}:Ae(n),!c)return a?Mr(n,lt(f,n)):Dr(n,at(f,n))}else{if(!Ln[s])return i?n:{};f=Ee(n,s,c)}}if(o||(o=new Zn),
i=o.get(n))return i;o.set(n,f),pf(n)?n.forEach(function(r){f.add(_t(r,t,e,r,n,o))}):sf(n)&&n.forEach(function(r,u){f.set(u,_t(r,t,e,u,n,o))});var a=l?a?ve:_e:a?Bu:Wu,p=u?T:a(n);return r(p||n,function(r,u){p&&(u=r,r=n[u]),ot(f,u,_t(r,t,e,u,n,o))}),f}function vt(n){var t=Wu(n);return function(r){return gt(r,n,t)}}function gt(n,t,r){var e=r.length;if(null==n)return!e;for(n=Qu(n);e--;){var u=r[e],i=t[u],o=n[u];if(o===T&&!(u in n)||!i(o))return false}return true}function dt(n,t,r){if(typeof n!="function")throw new ti("Expected a function");
return bo(function(){n.apply(T,r)},t)}function yt(n,t,r,e){var u=-1,i=o,a=true,l=n.length,s=[],h=t.length;if(!l)return s;r&&(t=c(t,k(r))),e?(i=f,a=false):200<=t.length&&(i=O,a=false,t=new Nn(t));n:for(;++u<l;){var p=n[u],_=null==r?p:r(p),p=e||0!==p?p:0;if(a&&_===_){for(var v=h;v--;)if(t[v]===_)continue n;s.push(p)}else i(t,_,e)||s.push(p)}return s}function bt(n,t){var r=true;return uo(n,function(n,e,u){return r=!!t(n,e,u)}),r}function xt(n,t,r){for(var e=-1,u=n.length;++e<u;){var i=n[e],o=t(i);if(null!=o&&(f===T?o===o&&!wu(o):r(o,f)))var f=o,c=i;
}return c}function jt(n,t){var r=[];return uo(n,function(n,e,u){t(n,e,u)&&r.push(n)}),r}function wt(n,t,r,e,u){var i=-1,o=n.length;for(r||(r=ke),u||(u=[]);++i<o;){var f=n[i];0<t&&r(f)?1<t?wt(f,t-1,r,e,u):a(u,f):e||(u[u.length]=f)}return u}function mt(n,t){return n&&oo(n,t,Wu)}function At(n,t){return n&&fo(n,t,Wu)}function Et(n,t){return i(t,function(t){return _u(n[t])})}function kt(n,t){t=Sr(t,n);for(var r=0,e=t.length;null!=n&&r<e;)n=n[Me(t[r++])];return r&&r==e?n:T}function St(n,t,r){return t=t(n),
ff(n)?t:a(t,r(n))}function Ot(n){if(null==n)n=n===T?"[object Undefined]":"[object Null]";else if(mi&&mi in Qu(n)){var t=oi.call(n,mi),r=n[mi];try{n[mi]=T;var e=true}catch(n){}var u=ai.call(n);e&&(t?n[mi]=r:delete n[mi]),n=u}else n=ai.call(n);return n}function It(n,t){return n>t}function Rt(n,t){return null!=n&&oi.call(n,t)}function zt(n,t){return null!=n&&t in Qu(n)}function Wt(n,t,r){for(var e=r?f:o,u=n[0].length,i=n.length,a=i,l=Ku(i),s=1/0,h=[];a--;){var p=n[a];a&&t&&(p=c(p,k(t))),s=Ci(p.length,s),
l[a]=!r&&(t||120<=u&&120<=p.length)?new Nn(a&&p):T}var p=n[0],_=-1,v=l[0];n:for(;++_<u&&h.length<s;){var g=p[_],d=t?t(g):g,g=r||0!==g?g:0;if(v?!O(v,d):!e(h,d,r)){for(a=i;--a;){var y=l[a];if(y?!O(y,d):!e(n[a],d,r))continue n}v&&v.push(d),h.push(g)}}return h}function Bt(n,t,r){var e={};return mt(n,function(n,u,i){t(e,r(n),u,i)}),e}function Lt(t,r,e){return r=Sr(r,t),t=2>r.length?t:kt(t,hr(r,0,-1)),r=null==t?t:t[Me(Ve(r))],null==r?T:n(r,t,e)}function Ut(n){return yu(n)&&"[object Arguments]"==Ot(n)}function Ct(n){
return yu(n)&&"[object ArrayBuffer]"==Ot(n)}function Dt(n){return yu(n)&&"[object Date]"==Ot(n)}function Mt(n,t,r,e,u){if(n===t)t=true;else if(null==n||null==t||!yu(n)&&!yu(t))t=n!==n&&t!==t;else n:{var i=ff(n),o=ff(t),f=i?"[object Array]":vo(n),c=o?"[object Array]":vo(t),f="[object Arguments]"==f?"[object Object]":f,c="[object Arguments]"==c?"[object Object]":c,a="[object Object]"==f,o="[object Object]"==c;if((c=f==c)&&af(n)){if(!af(t)){t=false;break n}i=true,a=false}if(c&&!a)u||(u=new Zn),t=i||_f(n)?se(n,t,r,e,Mt,u):he(n,t,f,r,e,Mt,u);else{
if(!(1&r)&&(i=a&&oi.call(n,"__wrapped__"),f=o&&oi.call(t,"__wrapped__"),i||f)){n=i?n.value():n,t=f?t.value():t,u||(u=new Zn),t=Mt(n,t,r,e,u);break n}if(c)t:if(u||(u=new Zn),i=1&r,f=_e(n),o=f.length,c=_e(t).length,o==c||i){for(a=o;a--;){var l=f[a];if(!(i?l in t:oi.call(t,l))){t=false;break t}}if((c=u.get(n))&&u.get(t))t=c==t;else{c=true,u.set(n,t),u.set(t,n);for(var s=i;++a<o;){var l=f[a],h=n[l],p=t[l];if(e)var _=i?e(p,h,l,t,n,u):e(h,p,l,n,t,u);if(_===T?h!==p&&!Mt(h,p,r,e,u):!_){c=false;break}s||(s="constructor"==l);
}c&&!s&&(r=n.constructor,e=t.constructor,r!=e&&"constructor"in n&&"constructor"in t&&!(typeof r=="function"&&r instanceof r&&typeof e=="function"&&e instanceof e)&&(c=false)),u.delete(n),u.delete(t),t=c}}else t=false;else t=false}}return t}function Tt(n){return yu(n)&&"[object Map]"==vo(n)}function $t(n,t,r,e){var u=r.length,i=u,o=!e;if(null==n)return!i;for(n=Qu(n);u--;){var f=r[u];if(o&&f[2]?f[1]!==n[f[0]]:!(f[0]in n))return false}for(;++u<i;){var f=r[u],c=f[0],a=n[c],l=f[1];if(o&&f[2]){if(a===T&&!(c in n))return false;
}else{if(f=new Zn,e)var s=e(a,l,c,n,t,f);if(s===T?!Mt(l,a,3,e,f):!s)return false}}return true}function Ft(n){return!(!du(n)||ci&&ci in n)&&(_u(n)?hi:dn).test(Te(n))}function Nt(n){return yu(n)&&"[object RegExp]"==Ot(n)}function Pt(n){return yu(n)&&"[object Set]"==vo(n)}function Zt(n){return yu(n)&&gu(n.length)&&!!Bn[Ot(n)]}function qt(n){return typeof n=="function"?n:null==n?$u:typeof n=="object"?ff(n)?Jt(n[0],n[1]):Ht(n):Zu(n)}function Vt(n){if(!ze(n))return Li(n);var t,r=[];for(t in Qu(n))oi.call(n,t)&&"constructor"!=t&&r.push(t);
return r}function Kt(n,t){return n<t}function Gt(n,t){var r=-1,e=su(n)?Ku(n.length):[];return uo(n,function(n,u,i){e[++r]=t(n,u,i)}),e}function Ht(n){var t=xe(n);return 1==t.length&&t[0][2]?We(t[0][0],t[0][1]):function(r){return r===n||$t(r,n,t)}}function Jt(n,t){return Ie(n)&&t===t&&!du(t)?We(Me(n),t):function(r){var e=Ru(r,n);return e===T&&e===t?zu(r,n):Mt(t,e,3)}}function Yt(n,t,r,e,u){n!==t&&oo(t,function(i,o){if(u||(u=new Zn),du(i)){var f=u,c=Le(n,o),a=Le(t,o),l=f.get(a);if(l)it(n,o,l);else{
var l=e?e(c,a,o+"",n,t,f):T,s=l===T;if(s){var h=ff(a),p=!h&&af(a),_=!h&&!p&&_f(a),l=a;h||p||_?ff(c)?l=c:hu(c)?l=Ur(c):p?(s=false,l=Ir(a,true)):_?(s=false,l=zr(a,true)):l=[]:xu(a)||of(a)?(l=c,of(c)?l=Ou(c):du(c)&&!_u(c)||(l=Ae(a))):s=false}s&&(f.set(a,l),Yt(l,a,r,e,f),f.delete(a)),it(n,o,l)}}else f=e?e(Le(n,o),i,o+"",n,t,u):T,f===T&&(f=i),it(n,o,f)},Bu)}function Qt(n,t){var r=n.length;if(r)return t+=0>t?r:0,Se(t,r)?n[t]:T}function Xt(n,t,r){var e=-1;return t=c(t.length?t:[$u],k(ye())),n=Gt(n,function(n){return{
a:c(t,function(t){return t(n)}),b:++e,c:n}}),w(n,function(n,t){var e;n:{e=-1;for(var u=n.a,i=t.a,o=u.length,f=r.length;++e<o;){var c=Wr(u[e],i[e]);if(c){e=e>=f?c:c*("desc"==r[e]?-1:1);break n}}e=n.b-t.b}return e})}function nr(n,t){return tr(n,t,function(t,r){return zu(n,r)})}function tr(n,t,r){for(var e=-1,u=t.length,i={};++e<u;){var o=t[e],f=kt(n,o);r(f,o)&&lr(i,Sr(o,n),f)}return i}function rr(n){return function(t){return kt(t,n)}}function er(n,t,r,e){var u=e?g:v,i=-1,o=t.length,f=n;for(n===t&&(t=Ur(t)),
r&&(f=c(n,k(r)));++i<o;)for(var a=0,l=t[i],l=r?r(l):l;-1<(a=u(f,l,a,e));)f!==n&&xi.call(f,a,1),xi.call(n,a,1);return n}function ur(n,t){for(var r=n?t.length:0,e=r-1;r--;){var u=t[r];if(r==e||u!==i){var i=u;Se(u)?xi.call(n,u,1):xr(n,u)}}}function ir(n,t){return n+Ii(Ti()*(t-n+1))}function or(n,t){var r="";if(!n||1>t||9007199254740991<t)return r;do t%2&&(r+=n),(t=Ii(t/2))&&(n+=n);while(t);return r}function fr(n,t){return xo(Be(n,t,$u),n+"")}function cr(n){return Qn(Uu(n))}function ar(n,t){var r=Uu(n);
return De(r,pt(t,0,r.length))}function lr(n,t,r,e){if(!du(n))return n;t=Sr(t,n);for(var u=-1,i=t.length,o=i-1,f=n;null!=f&&++u<i;){var c=Me(t[u]),a=r;if(u!=o){var l=f[c],a=e?e(l,c,f):T;a===T&&(a=du(l)?l:Se(t[u+1])?[]:{})}ot(f,c,a),f=f[c]}return n}function sr(n){return De(Uu(n))}function hr(n,t,r){var e=-1,u=n.length;for(0>t&&(t=-t>u?0:u+t),r=r>u?u:r,0>r&&(r+=u),u=t>r?0:r-t>>>0,t>>>=0,r=Ku(u);++e<u;)r[e]=n[e+t];return r}function pr(n,t){var r;return uo(n,function(n,e,u){return r=t(n,e,u),!r}),!!r}
function _r(n,t,r){var e=0,u=null==n?e:n.length;if(typeof t=="number"&&t===t&&2147483647>=u){for(;e<u;){var i=e+u>>>1,o=n[i];null!==o&&!wu(o)&&(r?o<=t:o<t)?e=i+1:u=i}return u}return vr(n,t,$u,r)}function vr(n,t,r,e){t=r(t);for(var u=0,i=null==n?0:n.length,o=t!==t,f=null===t,c=wu(t),a=t===T;u<i;){var l=Ii((u+i)/2),s=r(n[l]),h=s!==T,p=null===s,_=s===s,v=wu(s);(o?e||_:a?_&&(e||h):f?_&&h&&(e||!p):c?_&&h&&!p&&(e||!v):p||v?0:e?s<=t:s<t)?u=l+1:i=l}return Ci(i,4294967294)}function gr(n,t){for(var r=-1,e=n.length,u=0,i=[];++r<e;){
var o=n[r],f=t?t(o):o;if(!r||!lu(f,c)){var c=f;i[u++]=0===o?0:o}}return i}function dr(n){return typeof n=="number"?n:wu(n)?F:+n}function yr(n){if(typeof n=="string")return n;if(ff(n))return c(n,yr)+"";if(wu(n))return ro?ro.call(n):"";var t=n+"";return"0"==t&&1/n==-$?"-0":t}function br(n,t,r){var e=-1,u=o,i=n.length,c=true,a=[],l=a;if(r)c=false,u=f;else if(200<=i){if(u=t?null:so(n))return U(u);c=false,u=O,l=new Nn}else l=t?[]:a;n:for(;++e<i;){var s=n[e],h=t?t(s):s,s=r||0!==s?s:0;if(c&&h===h){for(var p=l.length;p--;)if(l[p]===h)continue n;
t&&l.push(h),a.push(s)}else u(l,h,r)||(l!==a&&l.push(h),a.push(s))}return a}function xr(n,t){return t=Sr(t,n),n=2>t.length?n:kt(n,hr(t,0,-1)),null==n||delete n[Me(Ve(t))]}function jr(n,t,r,e){for(var u=n.length,i=e?u:-1;(e?i--:++i<u)&&t(n[i],i,n););return r?hr(n,e?0:i,e?i+1:u):hr(n,e?i+1:0,e?u:i)}function wr(n,t){var r=n;return r instanceof Un&&(r=r.value()),l(t,function(n,t){return t.func.apply(t.thisArg,a([n],t.args))},r)}function mr(n,t,r){var e=n.length;if(2>e)return e?br(n[0]):[];for(var u=-1,i=Ku(e);++u<e;)for(var o=n[u],f=-1;++f<e;)f!=u&&(i[u]=yt(i[u]||o,n[f],t,r));
return br(wt(i,1),t,r)}function Ar(n,t,r){for(var e=-1,u=n.length,i=t.length,o={};++e<u;)r(o,n[e],e<i?t[e]:T);return o}function Er(n){return hu(n)?n:[]}function kr(n){return typeof n=="function"?n:$u}function Sr(n,t){return ff(n)?n:Ie(n,t)?[n]:jo(Iu(n))}function Or(n,t,r){var e=n.length;return r=r===T?e:r,!t&&r>=e?n:hr(n,t,r)}function Ir(n,t){if(t)return n.slice();var r=n.length,r=gi?gi(r):new n.constructor(r);return n.copy(r),r}function Rr(n){var t=new n.constructor(n.byteLength);return new vi(t).set(new vi(n)),
t}function zr(n,t){return new n.constructor(t?Rr(n.buffer):n.buffer,n.byteOffset,n.length)}function Wr(n,t){if(n!==t){var r=n!==T,e=null===n,u=n===n,i=wu(n),o=t!==T,f=null===t,c=t===t,a=wu(t);if(!f&&!a&&!i&&n>t||i&&o&&c&&!f&&!a||e&&o&&c||!r&&c||!u)return 1;if(!e&&!i&&!a&&n<t||a&&r&&u&&!e&&!i||f&&r&&u||!o&&u||!c)return-1}return 0}function Br(n,t,r,e){var u=-1,i=n.length,o=r.length,f=-1,c=t.length,a=Ui(i-o,0),l=Ku(c+a);for(e=!e;++f<c;)l[f]=t[f];for(;++u<o;)(e||u<i)&&(l[r[u]]=n[u]);for(;a--;)l[f++]=n[u++];
return l}function Lr(n,t,r,e){var u=-1,i=n.length,o=-1,f=r.length,c=-1,a=t.length,l=Ui(i-f,0),s=Ku(l+a);for(e=!e;++u<l;)s[u]=n[u];for(l=u;++c<a;)s[l+c]=t[c];for(;++o<f;)(e||u<i)&&(s[l+r[o]]=n[u++]);return s}function Ur(n,t){var r=-1,e=n.length;for(t||(t=Ku(e));++r<e;)t[r]=n[r];return t}function Cr(n,t,r,e){var u=!r;r||(r={});for(var i=-1,o=t.length;++i<o;){var f=t[i],c=e?e(r[f],n[f],f,r,n):T;c===T&&(c=n[f]),u?st(r,f,c):ot(r,f,c)}return r}function Dr(n,t){return Cr(n,po(n),t)}function Mr(n,t){return Cr(n,_o(n),t);
}function Tr(n,r){return function(e,u){var i=ff(e)?t:ct,o=r?r():{};return i(e,n,ye(u,2),o)}}function $r(n){return fr(function(t,r){var e=-1,u=r.length,i=1<u?r[u-1]:T,o=2<u?r[2]:T,i=3<n.length&&typeof i=="function"?(u--,i):T;for(o&&Oe(r[0],r[1],o)&&(i=3>u?T:i,u=1),t=Qu(t);++e<u;)(o=r[e])&&n(t,o,e,i);return t})}function Fr(n,t){return function(r,e){if(null==r)return r;if(!su(r))return n(r,e);for(var u=r.length,i=t?u:-1,o=Qu(r);(t?i--:++i<u)&&false!==e(o[i],i,o););return r}}function Nr(n){return function(t,r,e){
var u=-1,i=Qu(t);e=e(t);for(var o=e.length;o--;){var f=e[n?o:++u];if(false===r(i[f],f,i))break}return t}}function Pr(n,t,r){function e(){return(this&&this!==$n&&this instanceof e?i:n).apply(u?r:this,arguments)}var u=1&t,i=Vr(n);return e}function Zr(n){return function(t){t=Iu(t);var r=Rn.test(t)?M(t):T,e=r?r[0]:t.charAt(0);return t=r?Or(r,1).join(""):t.slice(1),e[n]()+t}}function qr(n){return function(t){return l(Mu(Du(t).replace(kn,"")),n,"")}}function Vr(n){return function(){var t=arguments;switch(t.length){
case 0:return new n;case 1:return new n(t[0]);case 2:return new n(t[0],t[1]);case 3:return new n(t[0],t[1],t[2]);case 4:return new n(t[0],t[1],t[2],t[3]);case 5:return new n(t[0],t[1],t[2],t[3],t[4]);case 6:return new n(t[0],t[1],t[2],t[3],t[4],t[5]);case 7:return new n(t[0],t[1],t[2],t[3],t[4],t[5],t[6])}var r=eo(n.prototype),t=n.apply(r,t);return du(t)?t:r}}function Kr(t,r,e){function u(){for(var o=arguments.length,f=Ku(o),c=o,a=de(u);c--;)f[c]=arguments[c];return c=3>o&&f[0]!==a&&f[o-1]!==a?[]:L(f,a),
o-=c.length,o<e?ue(t,r,Jr,u.placeholder,T,f,c,T,T,e-o):n(this&&this!==$n&&this instanceof u?i:t,this,f)}var i=Vr(t);return u}function Gr(n){return function(t,r,e){var u=Qu(t);if(!su(t)){var i=ye(r,3);t=Wu(t),r=function(n){return i(u[n],n,u)}}return r=n(t,r,e),-1<r?u[i?t[r]:r]:T}}function Hr(n){return pe(function(t){var r=t.length,e=r,u=On.prototype.thru;for(n&&t.reverse();e--;){var i=t[e];if(typeof i!="function")throw new ti("Expected a function");if(u&&!o&&"wrapper"==ge(i))var o=new On([],true)}for(e=o?e:r;++e<r;)var i=t[e],u=ge(i),f="wrapper"==u?ho(i):T,o=f&&Re(f[0])&&424==f[1]&&!f[4].length&&1==f[9]?o[ge(f[0])].apply(o,f[3]):1==i.length&&Re(i)?o[u]():o.thru(i);
return function(){var n=arguments,e=n[0];if(o&&1==n.length&&ff(e))return o.plant(e).value();for(var u=0,n=r?t[u].apply(this,n):e;++u<r;)n=t[u].call(this,n);return n}})}function Jr(n,t,r,e,u,i,o,f,c,a){function l(){for(var d=arguments.length,y=Ku(d),b=d;b--;)y[b]=arguments[b];if(_){var x,j=de(l),b=y.length;for(x=0;b--;)y[b]===j&&++x}if(e&&(y=Br(y,e,u,_)),i&&(y=Lr(y,i,o,_)),d-=x,_&&d<a)return j=L(y,j),ue(n,t,Jr,l.placeholder,r,y,j,f,c,a-d);if(j=h?r:this,b=p?j[n]:n,d=y.length,f){x=y.length;for(var w=Ci(f.length,x),m=Ur(y);w--;){
var A=f[w];y[w]=Se(A,x)?m[A]:T}}else v&&1<d&&y.reverse();return s&&c<d&&(y.length=c),this&&this!==$n&&this instanceof l&&(b=g||Vr(b)),b.apply(j,y)}var s=128&t,h=1&t,p=2&t,_=24&t,v=512&t,g=p?T:Vr(n);return l}function Yr(n,t){return function(r,e){return Bt(r,n,t(e))}}function Qr(n,t){return function(r,e){var u;if(r===T&&e===T)return t;if(r!==T&&(u=r),e!==T){if(u===T)return e;typeof r=="string"||typeof e=="string"?(r=yr(r),e=yr(e)):(r=dr(r),e=dr(e)),u=n(r,e)}return u}}function Xr(t){return pe(function(r){
return r=c(r,k(ye())),fr(function(e){var u=this;return t(r,function(t){return n(t,u,e)})})})}function ne(n,t){t=t===T?" ":yr(t);var r=t.length;return 2>r?r?or(t,n):t:(r=or(t,Oi(n/D(t))),Rn.test(t)?Or(M(r),0,n).join(""):r.slice(0,n))}function te(t,r,e,u){function i(){for(var r=-1,c=arguments.length,a=-1,l=u.length,s=Ku(l+c),h=this&&this!==$n&&this instanceof i?f:t;++a<l;)s[a]=u[a];for(;c--;)s[a++]=arguments[++r];return n(h,o?e:this,s)}var o=1&r,f=Vr(t);return i}function re(n){return function(t,r,e){
e&&typeof e!="number"&&Oe(t,r,e)&&(r=e=T),t=Au(t),r===T?(r=t,t=0):r=Au(r),e=e===T?t<r?1:-1:Au(e);var u=-1;r=Ui(Oi((r-t)/(e||1)),0);for(var i=Ku(r);r--;)i[n?r:++u]=t,t+=e;return i}}function ee(n){return function(t,r){return typeof t=="string"&&typeof r=="string"||(t=Su(t),r=Su(r)),n(t,r)}}function ue(n,t,r,e,u,i,o,f,c,a){var l=8&t,s=l?o:T;o=l?T:o;var h=l?i:T;return i=l?T:i,t=(t|(l?32:64))&~(l?64:32),4&t||(t&=-4),u=[n,t,u,h,s,i,o,f,c,a],r=r.apply(T,u),Re(n)&&yo(r,u),r.placeholder=e,Ue(r,n,t)}function ie(n){
var t=Yu[n];return function(n,r){if(n=Su(n),(r=null==r?0:Ci(Eu(r),292))&&Wi(n)){var e=(Iu(n)+"e").split("e"),e=t(e[0]+"e"+(+e[1]+r)),e=(Iu(e)+"e").split("e");return+(e[0]+"e"+(+e[1]-r))}return t(n)}}function oe(n){return function(t){var r=vo(t);return"[object Map]"==r?W(t):"[object Set]"==r?C(t):E(t,n(t))}}function fe(n,t,r,e,u,i,o,f){var c=2&t;if(!c&&typeof n!="function")throw new ti("Expected a function");var a=e?e.length:0;if(a||(t&=-97,e=u=T),o=o===T?o:Ui(Eu(o),0),f=f===T?f:Eu(f),a-=u?u.length:0,
64&t){var l=e,s=u;e=u=T}var h=c?T:ho(n);return i=[n,t,r,e,u,l,s,i,o,f],h&&(r=i[1],n=h[1],t=r|n,e=128==n&&8==r||128==n&&256==r&&i[7].length<=h[8]||384==n&&h[7].length<=h[8]&&8==r,131>t||e)&&(1&n&&(i[2]=h[2],t|=1&r?0:4),(r=h[3])&&(e=i[3],i[3]=e?Br(e,r,h[4]):r,i[4]=e?L(i[3],"__lodash_placeholder__"):h[4]),(r=h[5])&&(e=i[5],i[5]=e?Lr(e,r,h[6]):r,i[6]=e?L(i[5],"__lodash_placeholder__"):h[6]),(r=h[7])&&(i[7]=r),128&n&&(i[8]=null==i[8]?h[8]:Ci(i[8],h[8])),null==i[9]&&(i[9]=h[9]),i[0]=h[0],i[1]=t),n=i[0],
t=i[1],r=i[2],e=i[3],u=i[4],f=i[9]=i[9]===T?c?0:n.length:Ui(i[9]-a,0),!f&&24&t&&(t&=-25),Ue((h?co:yo)(t&&1!=t?8==t||16==t?Kr(n,t,f):32!=t&&33!=t||u.length?Jr.apply(T,i):te(n,t,r,e):Pr(n,t,r),i),n,t)}function ce(n,t,r,e){return n===T||lu(n,ei[r])&&!oi.call(e,r)?t:n}function ae(n,t,r,e,u,i){return du(n)&&du(t)&&(i.set(t,n),Yt(n,t,T,ae,i),i.delete(t)),n}function le(n){return xu(n)?T:n}function se(n,t,r,e,u,i){var o=1&r,f=n.length,c=t.length;if(f!=c&&!(o&&c>f))return false;if((c=i.get(n))&&i.get(t))return c==t;
var c=-1,a=true,l=2&r?new Nn:T;for(i.set(n,t),i.set(t,n);++c<f;){var s=n[c],p=t[c];if(e)var _=o?e(p,s,c,t,n,i):e(s,p,c,n,t,i);if(_!==T){if(_)continue;a=false;break}if(l){if(!h(t,function(n,t){if(!O(l,t)&&(s===n||u(s,n,r,e,i)))return l.push(t)})){a=false;break}}else if(s!==p&&!u(s,p,r,e,i)){a=false;break}}return i.delete(n),i.delete(t),a}function he(n,t,r,e,u,i,o){switch(r){case"[object DataView]":if(n.byteLength!=t.byteLength||n.byteOffset!=t.byteOffset)break;n=n.buffer,t=t.buffer;case"[object ArrayBuffer]":
if(n.byteLength!=t.byteLength||!i(new vi(n),new vi(t)))break;return true;case"[object Boolean]":case"[object Date]":case"[object Number]":return lu(+n,+t);case"[object Error]":return n.name==t.name&&n.message==t.message;case"[object RegExp]":case"[object String]":return n==t+"";case"[object Map]":var f=W;case"[object Set]":if(f||(f=U),n.size!=t.size&&!(1&e))break;return(r=o.get(n))?r==t:(e|=2,o.set(n,t),t=se(f(n),f(t),e,u,i,o),o.delete(n),t);case"[object Symbol]":if(to)return to.call(n)==to.call(t)}
return false}function pe(n){return xo(Be(n,T,Ze),n+"")}function _e(n){return St(n,Wu,po)}function ve(n){return St(n,Bu,_o)}function ge(n){for(var t=n.name+"",r=Gi[t],e=oi.call(Gi,t)?r.length:0;e--;){var u=r[e],i=u.func;if(null==i||i==n)return u.name}return t}function de(n){return(oi.call(An,"placeholder")?An:n).placeholder}function ye(){var n=An.iteratee||Fu,n=n===Fu?qt:n;return arguments.length?n(arguments[0],arguments[1]):n}function be(n,t){var r=n.__data__,e=typeof t;return("string"==e||"number"==e||"symbol"==e||"boolean"==e?"__proto__"!==t:null===t)?r[typeof t=="string"?"string":"hash"]:r.map;
}function xe(n){for(var t=Wu(n),r=t.length;r--;){var e=t[r],u=n[e];t[r]=[e,u,u===u&&!du(u)]}return t}function je(n,t){var r=null==n?T:n[t];return Ft(r)?r:T}function we(n,t,r){t=Sr(t,n);for(var e=-1,u=t.length,i=false;++e<u;){var o=Me(t[e]);if(!(i=null!=n&&r(n,o)))break;n=n[o]}return i||++e!=u?i:(u=null==n?0:n.length,!!u&&gu(u)&&Se(o,u)&&(ff(n)||of(n)))}function me(n){var t=n.length,r=new n.constructor(t);return t&&"string"==typeof n[0]&&oi.call(n,"index")&&(r.index=n.index,r.input=n.input),r}function Ae(n){
return typeof n.constructor!="function"||ze(n)?{}:eo(di(n))}function Ee(n,t,r){var e=n.constructor;switch(t){case"[object ArrayBuffer]":return Rr(n);case"[object Boolean]":case"[object Date]":return new e(+n);case"[object DataView]":return t=r?Rr(n.buffer):n.buffer,new n.constructor(t,n.byteOffset,n.byteLength);case"[object Float32Array]":case"[object Float64Array]":case"[object Int8Array]":case"[object Int16Array]":case"[object Int32Array]":case"[object Uint8Array]":case"[object Uint8ClampedArray]":
case"[object Uint16Array]":case"[object Uint32Array]":return zr(n,r);case"[object Map]":return new e;case"[object Number]":case"[object String]":return new e(n);case"[object RegExp]":return t=new n.constructor(n.source,_n.exec(n)),t.lastIndex=n.lastIndex,t;case"[object Set]":return new e;case"[object Symbol]":return to?Qu(to.call(n)):{}}}function ke(n){return ff(n)||of(n)||!!(ji&&n&&n[ji])}function Se(n,t){var r=typeof n;return t=null==t?9007199254740991:t,!!t&&("number"==r||"symbol"!=r&&bn.test(n))&&-1<n&&0==n%1&&n<t;
}function Oe(n,t,r){if(!du(r))return false;var e=typeof t;return!!("number"==e?su(r)&&Se(t,r.length):"string"==e&&t in r)&&lu(r[t],n)}function Ie(n,t){if(ff(n))return false;var r=typeof n;return!("number"!=r&&"symbol"!=r&&"boolean"!=r&&null!=n&&!wu(n))||(nn.test(n)||!X.test(n)||null!=t&&n in Qu(t))}function Re(n){var t=ge(n),r=An[t];return typeof r=="function"&&t in Un.prototype&&(n===r||(t=ho(r),!!t&&n===t[0]))}function ze(n){var t=n&&n.constructor;return n===(typeof t=="function"&&t.prototype||ei)}function We(n,t){
return function(r){return null!=r&&(r[n]===t&&(t!==T||n in Qu(r)))}}function Be(t,r,e){return r=Ui(r===T?t.length-1:r,0),function(){for(var u=arguments,i=-1,o=Ui(u.length-r,0),f=Ku(o);++i<o;)f[i]=u[r+i];for(i=-1,o=Ku(r+1);++i<r;)o[i]=u[i];return o[r]=e(f),n(t,this,o)}}function Le(n,t){if(("constructor"!==t||"function"!=typeof n[t])&&"__proto__"!=t)return n[t]}function Ue(n,t,r){var e=t+"";t=xo;var u,i=$e;return u=(u=e.match(an))?u[1].split(ln):[],r=i(u,r),(i=r.length)&&(u=i-1,r[u]=(1<i?"& ":"")+r[u],
r=r.join(2<i?", ":" "),e=e.replace(cn,"{\n/* [wrapped with "+r+"] */\n")),t(n,e)}function Ce(n){var t=0,r=0;return function(){var e=Di(),u=16-(e-r);if(r=e,0<u){if(800<=++t)return arguments[0]}else t=0;return n.apply(T,arguments)}}function De(n,t){var r=-1,e=n.length,u=e-1;for(t=t===T?e:t;++r<t;){var e=ir(r,u),i=n[e];n[e]=n[r],n[r]=i}return n.length=t,n}function Me(n){if(typeof n=="string"||wu(n))return n;var t=n+"";return"0"==t&&1/n==-$?"-0":t}function Te(n){if(null!=n){try{return ii.call(n)}catch(n){}
return n+""}return""}function $e(n,t){return r(N,function(r){var e="_."+r[0];t&r[1]&&!o(n,e)&&n.push(e)}),n.sort()}function Fe(n){if(n instanceof Un)return n.clone();var t=new On(n.__wrapped__,n.__chain__);return t.__actions__=Ur(n.__actions__),t.__index__=n.__index__,t.__values__=n.__values__,t}function Ne(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Eu(r),0>r&&(r=Ui(e+r,0)),_(n,ye(t,3),r)):-1}function Pe(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e-1;return r!==T&&(u=Eu(r),u=0>r?Ui(e+u,0):Ci(u,e-1)),
_(n,ye(t,3),u,true)}function Ze(n){return(null==n?0:n.length)?wt(n,1):[]}function qe(n){return n&&n.length?n[0]:T}function Ve(n){var t=null==n?0:n.length;return t?n[t-1]:T}function Ke(n,t){return n&&n.length&&t&&t.length?er(n,t):n}function Ge(n){return null==n?n:$i.call(n)}function He(n){if(!n||!n.length)return[];var t=0;return n=i(n,function(n){if(hu(n))return t=Ui(n.length,t),true}),A(t,function(t){return c(n,b(t))})}function Je(t,r){if(!t||!t.length)return[];var e=He(t);return null==r?e:c(e,function(t){
return n(r,T,t)})}function Ye(n){return n=An(n),n.__chain__=true,n}function Qe(n,t){return t(n)}function Xe(){return this}function nu(n,t){return(ff(n)?r:uo)(n,ye(t,3))}function tu(n,t){return(ff(n)?e:io)(n,ye(t,3))}function ru(n,t){return(ff(n)?c:Gt)(n,ye(t,3))}function eu(n,t,r){return t=r?T:t,t=n&&null==t?n.length:t,fe(n,128,T,T,T,T,t)}function uu(n,t){var r;if(typeof t!="function")throw new ti("Expected a function");return n=Eu(n),function(){return 0<--n&&(r=t.apply(this,arguments)),1>=n&&(t=T),
r}}function iu(n,t,r){return t=r?T:t,n=fe(n,8,T,T,T,T,T,t),n.placeholder=iu.placeholder,n}function ou(n,t,r){return t=r?T:t,n=fe(n,16,T,T,T,T,T,t),n.placeholder=ou.placeholder,n}function fu(n,t,r){function e(t){var r=c,e=a;return c=a=T,_=t,s=n.apply(e,r)}function u(n){var r=n-p;return n-=_,p===T||r>=t||0>r||g&&n>=l}function i(){var n=Go();if(u(n))return o(n);var r,e=bo;r=n-_,n=t-(n-p),r=g?Ci(n,l-r):n,h=e(i,r)}function o(n){return h=T,d&&c?e(n):(c=a=T,s)}function f(){var n=Go(),r=u(n);if(c=arguments,
a=this,p=n,r){if(h===T)return _=n=p,h=bo(i,t),v?e(n):s;if(g)return lo(h),h=bo(i,t),e(p)}return h===T&&(h=bo(i,t)),s}var c,a,l,s,h,p,_=0,v=false,g=false,d=true;if(typeof n!="function")throw new ti("Expected a function");return t=Su(t)||0,du(r)&&(v=!!r.leading,l=(g="maxWait"in r)?Ui(Su(r.maxWait)||0,t):l,d="trailing"in r?!!r.trailing:d),f.cancel=function(){h!==T&&lo(h),_=0,c=p=a=h=T},f.flush=function(){return h===T?s:o(Go())},f}function cu(n,t){function r(){var e=arguments,u=t?t.apply(this,e):e[0],i=r.cache;
return i.has(u)?i.get(u):(e=n.apply(this,e),r.cache=i.set(u,e)||i,e)}if(typeof n!="function"||null!=t&&typeof t!="function")throw new ti("Expected a function");return r.cache=new(cu.Cache||Fn),r}function au(n){if(typeof n!="function")throw new ti("Expected a function");return function(){var t=arguments;switch(t.length){case 0:return!n.call(this);case 1:return!n.call(this,t[0]);case 2:return!n.call(this,t[0],t[1]);case 3:return!n.call(this,t[0],t[1],t[2])}return!n.apply(this,t)}}function lu(n,t){return n===t||n!==n&&t!==t;
}function su(n){return null!=n&&gu(n.length)&&!_u(n)}function hu(n){return yu(n)&&su(n)}function pu(n){if(!yu(n))return false;var t=Ot(n);return"[object Error]"==t||"[object DOMException]"==t||typeof n.message=="string"&&typeof n.name=="string"&&!xu(n)}function _u(n){return!!du(n)&&(n=Ot(n),"[object Function]"==n||"[object GeneratorFunction]"==n||"[object AsyncFunction]"==n||"[object Proxy]"==n)}function vu(n){return typeof n=="number"&&n==Eu(n)}function gu(n){return typeof n=="number"&&-1<n&&0==n%1&&9007199254740991>=n;
}function du(n){var t=typeof n;return null!=n&&("object"==t||"function"==t)}function yu(n){return null!=n&&typeof n=="object"}function bu(n){return typeof n=="number"||yu(n)&&"[object Number]"==Ot(n)}function xu(n){return!(!yu(n)||"[object Object]"!=Ot(n))&&(n=di(n),null===n||(n=oi.call(n,"constructor")&&n.constructor,typeof n=="function"&&n instanceof n&&ii.call(n)==li))}function ju(n){return typeof n=="string"||!ff(n)&&yu(n)&&"[object String]"==Ot(n)}function wu(n){return typeof n=="symbol"||yu(n)&&"[object Symbol]"==Ot(n);
}function mu(n){if(!n)return[];if(su(n))return ju(n)?M(n):Ur(n);if(wi&&n[wi]){n=n[wi]();for(var t,r=[];!(t=n.next()).done;)r.push(t.value);return r}return t=vo(n),("[object Map]"==t?W:"[object Set]"==t?U:Uu)(n)}function Au(n){return n?(n=Su(n),n===$||n===-$?1.7976931348623157e308*(0>n?-1:1):n===n?n:0):0===n?n:0}function Eu(n){n=Au(n);var t=n%1;return n===n?t?n-t:n:0}function ku(n){return n?pt(Eu(n),0,4294967295):0}function Su(n){if(typeof n=="number")return n;if(wu(n))return F;if(du(n)&&(n=typeof n.valueOf=="function"?n.valueOf():n,
n=du(n)?n+"":n),typeof n!="string")return 0===n?n:+n;n=n.replace(un,"");var t=gn.test(n);return t||yn.test(n)?Dn(n.slice(2),t?2:8):vn.test(n)?F:+n}function Ou(n){return Cr(n,Bu(n))}function Iu(n){return null==n?"":yr(n)}function Ru(n,t,r){return n=null==n?T:kt(n,t),n===T?r:n}function zu(n,t){return null!=n&&we(n,t,zt)}function Wu(n){return su(n)?qn(n):Vt(n)}function Bu(n){if(su(n))n=qn(n,true);else if(du(n)){var t,r=ze(n),e=[];for(t in n)("constructor"!=t||!r&&oi.call(n,t))&&e.push(t);n=e}else{if(t=[],
null!=n)for(r in Qu(n))t.push(r);n=t}return n}function Lu(n,t){if(null==n)return{};var r=c(ve(n),function(n){return[n]});return t=ye(t),tr(n,r,function(n,r){return t(n,r[0])})}function Uu(n){return null==n?[]:S(n,Wu(n))}function Cu(n){return $f(Iu(n).toLowerCase())}function Du(n){return(n=Iu(n))&&n.replace(xn,Xn).replace(Sn,"")}function Mu(n,t,r){return n=Iu(n),t=r?T:t,t===T?zn.test(n)?n.match(In)||[]:n.match(sn)||[]:n.match(t)||[]}function Tu(n){return function(){return n}}function $u(n){return n;
}function Fu(n){return qt(typeof n=="function"?n:_t(n,1))}function Nu(n,t,e){var u=Wu(t),i=Et(t,u);null!=e||du(t)&&(i.length||!u.length)||(e=t,t=n,n=this,i=Et(t,Wu(t)));var o=!(du(e)&&"chain"in e&&!e.chain),f=_u(n);return r(i,function(r){var e=t[r];n[r]=e,f&&(n.prototype[r]=function(){var t=this.__chain__;if(o||t){var r=n(this.__wrapped__);return(r.__actions__=Ur(this.__actions__)).push({func:e,args:arguments,thisArg:n}),r.__chain__=t,r}return e.apply(n,a([this.value()],arguments))})}),n}function Pu(){}
function Zu(n){return Ie(n)?b(Me(n)):rr(n)}function qu(){return[]}function Vu(){return false}mn=null==mn?$n:rt.defaults($n.Object(),mn,rt.pick($n,Wn));var Ku=mn.Array,Gu=mn.Date,Hu=mn.Error,Ju=mn.Function,Yu=mn.Math,Qu=mn.Object,Xu=mn.RegExp,ni=mn.String,ti=mn.TypeError,ri=Ku.prototype,ei=Qu.prototype,ui=mn["__core-js_shared__"],ii=Ju.prototype.toString,oi=ei.hasOwnProperty,fi=0,ci=function(){var n=/[^.]+$/.exec(ui&&ui.keys&&ui.keys.IE_PROTO||"");return n?"Symbol(src)_1."+n:""}(),ai=ei.toString,li=ii.call(Qu),si=$n._,hi=Xu("^"+ii.call(oi).replace(rn,"\\$&").replace(/hasOwnProperty|(function).*?(?=\\\()| for .+?(?=\\\])/g,"$1.*?")+"$"),pi=Pn?mn.Buffer:T,_i=mn.Symbol,vi=mn.Uint8Array,gi=pi?pi.g:T,di=B(Qu.getPrototypeOf,Qu),yi=Qu.create,bi=ei.propertyIsEnumerable,xi=ri.splice,ji=_i?_i.isConcatSpreadable:T,wi=_i?_i.iterator:T,mi=_i?_i.toStringTag:T,Ai=function(){
try{var n=je(Qu,"defineProperty");return n({},"",{}),n}catch(n){}}(),Ei=mn.clearTimeout!==$n.clearTimeout&&mn.clearTimeout,ki=Gu&&Gu.now!==$n.Date.now&&Gu.now,Si=mn.setTimeout!==$n.setTimeout&&mn.setTimeout,Oi=Yu.ceil,Ii=Yu.floor,Ri=Qu.getOwnPropertySymbols,zi=pi?pi.isBuffer:T,Wi=mn.isFinite,Bi=ri.join,Li=B(Qu.keys,Qu),Ui=Yu.max,Ci=Yu.min,Di=Gu.now,Mi=mn.parseInt,Ti=Yu.random,$i=ri.reverse,Fi=je(mn,"DataView"),Ni=je(mn,"Map"),Pi=je(mn,"Promise"),Zi=je(mn,"Set"),qi=je(mn,"WeakMap"),Vi=je(Qu,"create"),Ki=qi&&new qi,Gi={},Hi=Te(Fi),Ji=Te(Ni),Yi=Te(Pi),Qi=Te(Zi),Xi=Te(qi),no=_i?_i.prototype:T,to=no?no.valueOf:T,ro=no?no.toString:T,eo=function(){
function n(){}return function(t){return du(t)?yi?yi(t):(n.prototype=t,t=new n,n.prototype=T,t):{}}}();An.templateSettings={escape:J,evaluate:Y,interpolate:Q,variable:"",imports:{_:An}},An.prototype=En.prototype,An.prototype.constructor=An,On.prototype=eo(En.prototype),On.prototype.constructor=On,Un.prototype=eo(En.prototype),Un.prototype.constructor=Un,Mn.prototype.clear=function(){this.__data__=Vi?Vi(null):{},this.size=0},Mn.prototype.delete=function(n){return n=this.has(n)&&delete this.__data__[n],
this.size-=n?1:0,n},Mn.prototype.get=function(n){var t=this.__data__;return Vi?(n=t[n],"__lodash_hash_undefined__"===n?T:n):oi.call(t,n)?t[n]:T},Mn.prototype.has=function(n){var t=this.__data__;return Vi?t[n]!==T:oi.call(t,n)},Mn.prototype.set=function(n,t){var r=this.__data__;return this.size+=this.has(n)?0:1,r[n]=Vi&&t===T?"__lodash_hash_undefined__":t,this},Tn.prototype.clear=function(){this.__data__=[],this.size=0},Tn.prototype.delete=function(n){var t=this.__data__;return n=ft(t,n),!(0>n)&&(n==t.length-1?t.pop():xi.call(t,n,1),
--this.size,true)},Tn.prototype.get=function(n){var t=this.__data__;return n=ft(t,n),0>n?T:t[n][1]},Tn.prototype.has=function(n){return-1<ft(this.__data__,n)},Tn.prototype.set=function(n,t){var r=this.__data__,e=ft(r,n);return 0>e?(++this.size,r.push([n,t])):r[e][1]=t,this},Fn.prototype.clear=function(){this.size=0,this.__data__={hash:new Mn,map:new(Ni||Tn),string:new Mn}},Fn.prototype.delete=function(n){return n=be(this,n).delete(n),this.size-=n?1:0,n},Fn.prototype.get=function(n){return be(this,n).get(n);
},Fn.prototype.has=function(n){return be(this,n).has(n)},Fn.prototype.set=function(n,t){var r=be(this,n),e=r.size;return r.set(n,t),this.size+=r.size==e?0:1,this},Nn.prototype.add=Nn.prototype.push=function(n){return this.__data__.set(n,"__lodash_hash_undefined__"),this},Nn.prototype.has=function(n){return this.__data__.has(n)},Zn.prototype.clear=function(){this.__data__=new Tn,this.size=0},Zn.prototype.delete=function(n){var t=this.__data__;return n=t.delete(n),this.size=t.size,n},Zn.prototype.get=function(n){
return this.__data__.get(n)},Zn.prototype.has=function(n){return this.__data__.has(n)},Zn.prototype.set=function(n,t){var r=this.__data__;if(r instanceof Tn){var e=r.__data__;if(!Ni||199>e.length)return e.push([n,t]),this.size=++r.size,this;r=this.__data__=new Fn(e)}return r.set(n,t),this.size=r.size,this};var uo=Fr(mt),io=Fr(At,true),oo=Nr(),fo=Nr(true),co=Ki?function(n,t){return Ki.set(n,t),n}:$u,ao=Ai?function(n,t){return Ai(n,"toString",{configurable:true,enumerable:false,value:Tu(t),writable:true})}:$u,lo=Ei||function(n){
return $n.clearTimeout(n)},so=Zi&&1/U(new Zi([,-0]))[1]==$?function(n){return new Zi(n)}:Pu,ho=Ki?function(n){return Ki.get(n)}:Pu,po=Ri?function(n){return null==n?[]:(n=Qu(n),i(Ri(n),function(t){return bi.call(n,t)}))}:qu,_o=Ri?function(n){for(var t=[];n;)a(t,po(n)),n=di(n);return t}:qu,vo=Ot;(Fi&&"[object DataView]"!=vo(new Fi(new ArrayBuffer(1)))||Ni&&"[object Map]"!=vo(new Ni)||Pi&&"[object Promise]"!=vo(Pi.resolve())||Zi&&"[object Set]"!=vo(new Zi)||qi&&"[object WeakMap]"!=vo(new qi))&&(vo=function(n){
var t=Ot(n);if(n=(n="[object Object]"==t?n.constructor:T)?Te(n):"")switch(n){case Hi:return"[object DataView]";case Ji:return"[object Map]";case Yi:return"[object Promise]";case Qi:return"[object Set]";case Xi:return"[object WeakMap]"}return t});var go=ui?_u:Vu,yo=Ce(co),bo=Si||function(n,t){return $n.setTimeout(n,t)},xo=Ce(ao),jo=function(n){n=cu(n,function(n){return 500===t.size&&t.clear(),n});var t=n.cache;return n}(function(n){var t=[];return 46===n.charCodeAt(0)&&t.push(""),n.replace(tn,function(n,r,e,u){
t.push(e?u.replace(hn,"$1"):r||n)}),t}),wo=fr(function(n,t){return hu(n)?yt(n,wt(t,1,hu,true)):[]}),mo=fr(function(n,t){var r=Ve(t);return hu(r)&&(r=T),hu(n)?yt(n,wt(t,1,hu,true),ye(r,2)):[]}),Ao=fr(function(n,t){var r=Ve(t);return hu(r)&&(r=T),hu(n)?yt(n,wt(t,1,hu,true),T,r):[]}),Eo=fr(function(n){var t=c(n,Er);return t.length&&t[0]===n[0]?Wt(t):[]}),ko=fr(function(n){var t=Ve(n),r=c(n,Er);return t===Ve(r)?t=T:r.pop(),r.length&&r[0]===n[0]?Wt(r,ye(t,2)):[]}),So=fr(function(n){var t=Ve(n),r=c(n,Er);return(t=typeof t=="function"?t:T)&&r.pop(),
r.length&&r[0]===n[0]?Wt(r,T,t):[]}),Oo=fr(Ke),Io=pe(function(n,t){var r=null==n?0:n.length,e=ht(n,t);return ur(n,c(t,function(n){return Se(n,r)?+n:n}).sort(Wr)),e}),Ro=fr(function(n){return br(wt(n,1,hu,true))}),zo=fr(function(n){var t=Ve(n);return hu(t)&&(t=T),br(wt(n,1,hu,true),ye(t,2))}),Wo=fr(function(n){var t=Ve(n),t=typeof t=="function"?t:T;return br(wt(n,1,hu,true),T,t)}),Bo=fr(function(n,t){return hu(n)?yt(n,t):[]}),Lo=fr(function(n){return mr(i(n,hu))}),Uo=fr(function(n){var t=Ve(n);return hu(t)&&(t=T),
mr(i(n,hu),ye(t,2))}),Co=fr(function(n){var t=Ve(n),t=typeof t=="function"?t:T;return mr(i(n,hu),T,t)}),Do=fr(He),Mo=fr(function(n){var t=n.length,t=1<t?n[t-1]:T,t=typeof t=="function"?(n.pop(),t):T;return Je(n,t)}),To=pe(function(n){function t(t){return ht(t,n)}var r=n.length,e=r?n[0]:0,u=this.__wrapped__;return!(1<r||this.__actions__.length)&&u instanceof Un&&Se(e)?(u=u.slice(e,+e+(r?1:0)),u.__actions__.push({func:Qe,args:[t],thisArg:T}),new On(u,this.__chain__).thru(function(n){return r&&!n.length&&n.push(T),
n})):this.thru(t)}),$o=Tr(function(n,t,r){oi.call(n,r)?++n[r]:st(n,r,1)}),Fo=Gr(Ne),No=Gr(Pe),Po=Tr(function(n,t,r){oi.call(n,r)?n[r].push(t):st(n,r,[t])}),Zo=fr(function(t,r,e){var u=-1,i=typeof r=="function",o=su(t)?Ku(t.length):[];return uo(t,function(t){o[++u]=i?n(r,t,e):Lt(t,r,e)}),o}),qo=Tr(function(n,t,r){st(n,r,t)}),Vo=Tr(function(n,t,r){n[r?0:1].push(t)},function(){return[[],[]]}),Ko=fr(function(n,t){if(null==n)return[];var r=t.length;return 1<r&&Oe(n,t[0],t[1])?t=[]:2<r&&Oe(t[0],t[1],t[2])&&(t=[t[0]]),
Xt(n,wt(t,1),[])}),Go=ki||function(){return $n.Date.now()},Ho=fr(function(n,t,r){var e=1;if(r.length)var u=L(r,de(Ho)),e=32|e;return fe(n,e,t,r,u)}),Jo=fr(function(n,t,r){var e=3;if(r.length)var u=L(r,de(Jo)),e=32|e;return fe(t,e,n,r,u)}),Yo=fr(function(n,t){return dt(n,1,t)}),Qo=fr(function(n,t,r){return dt(n,Su(t)||0,r)});cu.Cache=Fn;var Xo=fr(function(t,r){r=1==r.length&&ff(r[0])?c(r[0],k(ye())):c(wt(r,1),k(ye()));var e=r.length;return fr(function(u){for(var i=-1,o=Ci(u.length,e);++i<o;)u[i]=r[i].call(this,u[i]);
return n(t,this,u)})}),nf=fr(function(n,t){return fe(n,32,T,t,L(t,de(nf)))}),tf=fr(function(n,t){return fe(n,64,T,t,L(t,de(tf)))}),rf=pe(function(n,t){return fe(n,256,T,T,T,t)}),ef=ee(It),uf=ee(function(n,t){return n>=t}),of=Ut(function(){return arguments}())?Ut:function(n){return yu(n)&&oi.call(n,"callee")&&!bi.call(n,"callee")},ff=Ku.isArray,cf=Vn?k(Vn):Ct,af=zi||Vu,lf=Kn?k(Kn):Dt,sf=Gn?k(Gn):Tt,hf=Hn?k(Hn):Nt,pf=Jn?k(Jn):Pt,_f=Yn?k(Yn):Zt,vf=ee(Kt),gf=ee(function(n,t){return n<=t}),df=$r(function(n,t){
if(ze(t)||su(t))Cr(t,Wu(t),n);else for(var r in t)oi.call(t,r)&&ot(n,r,t[r])}),yf=$r(function(n,t){Cr(t,Bu(t),n)}),bf=$r(function(n,t,r,e){Cr(t,Bu(t),n,e)}),xf=$r(function(n,t,r,e){Cr(t,Wu(t),n,e)}),jf=pe(ht),wf=fr(function(n,t){n=Qu(n);var r=-1,e=t.length,u=2<e?t[2]:T;for(u&&Oe(t[0],t[1],u)&&(e=1);++r<e;)for(var u=t[r],i=Bu(u),o=-1,f=i.length;++o<f;){var c=i[o],a=n[c];(a===T||lu(a,ei[c])&&!oi.call(n,c))&&(n[c]=u[c])}return n}),mf=fr(function(t){return t.push(T,ae),n(Of,T,t)}),Af=Yr(function(n,t,r){
null!=t&&typeof t.toString!="function"&&(t=ai.call(t)),n[t]=r},Tu($u)),Ef=Yr(function(n,t,r){null!=t&&typeof t.toString!="function"&&(t=ai.call(t)),oi.call(n,t)?n[t].push(r):n[t]=[r]},ye),kf=fr(Lt),Sf=$r(function(n,t,r){Yt(n,t,r)}),Of=$r(function(n,t,r,e){Yt(n,t,r,e)}),If=pe(function(n,t){var r={};if(null==n)return r;var e=false;t=c(t,function(t){return t=Sr(t,n),e||(e=1<t.length),t}),Cr(n,ve(n),r),e&&(r=_t(r,7,le));for(var u=t.length;u--;)xr(r,t[u]);return r}),Rf=pe(function(n,t){return null==n?{}:nr(n,t);
}),zf=oe(Wu),Wf=oe(Bu),Bf=qr(function(n,t,r){return t=t.toLowerCase(),n+(r?Cu(t):t)}),Lf=qr(function(n,t,r){return n+(r?"-":"")+t.toLowerCase()}),Uf=qr(function(n,t,r){return n+(r?" ":"")+t.toLowerCase()}),Cf=Zr("toLowerCase"),Df=qr(function(n,t,r){return n+(r?"_":"")+t.toLowerCase()}),Mf=qr(function(n,t,r){return n+(r?" ":"")+$f(t)}),Tf=qr(function(n,t,r){return n+(r?" ":"")+t.toUpperCase()}),$f=Zr("toUpperCase"),Ff=fr(function(t,r){try{return n(t,T,r)}catch(n){return pu(n)?n:new Hu(n)}}),Nf=pe(function(n,t){
return r(t,function(t){t=Me(t),st(n,t,Ho(n[t],n))}),n}),Pf=Hr(),Zf=Hr(true),qf=fr(function(n,t){return function(r){return Lt(r,n,t)}}),Vf=fr(function(n,t){return function(r){return Lt(n,r,t)}}),Kf=Xr(c),Gf=Xr(u),Hf=Xr(h),Jf=re(),Yf=re(true),Qf=Qr(function(n,t){return n+t},0),Xf=ie("ceil"),nc=Qr(function(n,t){return n/t},1),tc=ie("floor"),rc=Qr(function(n,t){return n*t},1),ec=ie("round"),uc=Qr(function(n,t){return n-t},0);return An.after=function(n,t){if(typeof t!="function")throw new ti("Expected a function");
return n=Eu(n),function(){if(1>--n)return t.apply(this,arguments)}},An.ary=eu,An.assign=df,An.assignIn=yf,An.assignInWith=bf,An.assignWith=xf,An.at=jf,An.before=uu,An.bind=Ho,An.bindAll=Nf,An.bindKey=Jo,An.castArray=function(){if(!arguments.length)return[];var n=arguments[0];return ff(n)?n:[n]},An.chain=Ye,An.chunk=function(n,t,r){if(t=(r?Oe(n,t,r):t===T)?1:Ui(Eu(t),0),r=null==n?0:n.length,!r||1>t)return[];for(var e=0,u=0,i=Ku(Oi(r/t));e<r;)i[u++]=hr(n,e,e+=t);return i},An.compact=function(n){for(var t=-1,r=null==n?0:n.length,e=0,u=[];++t<r;){
var i=n[t];i&&(u[e++]=i)}return u},An.concat=function(){var n=arguments.length;if(!n)return[];for(var t=Ku(n-1),r=arguments[0];n--;)t[n-1]=arguments[n];return a(ff(r)?Ur(r):[r],wt(t,1))},An.cond=function(t){var r=null==t?0:t.length,e=ye();return t=r?c(t,function(n){if("function"!=typeof n[1])throw new ti("Expected a function");return[e(n[0]),n[1]]}):[],fr(function(e){for(var u=-1;++u<r;){var i=t[u];if(n(i[0],this,e))return n(i[1],this,e)}})},An.conforms=function(n){return vt(_t(n,1))},An.constant=Tu,
An.countBy=$o,An.create=function(n,t){var r=eo(n);return null==t?r:at(r,t)},An.curry=iu,An.curryRight=ou,An.debounce=fu,An.defaults=wf,An.defaultsDeep=mf,An.defer=Yo,An.delay=Qo,An.difference=wo,An.differenceBy=mo,An.differenceWith=Ao,An.drop=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Eu(t),hr(n,0>t?0:t,e)):[]},An.dropRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Eu(t),t=e-t,hr(n,0,0>t?0:t)):[]},An.dropRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),true,true):[];
},An.dropWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),true):[]},An.fill=function(n,t,r,e){var u=null==n?0:n.length;if(!u)return[];for(r&&typeof r!="number"&&Oe(n,t,r)&&(r=0,e=u),u=n.length,r=Eu(r),0>r&&(r=-r>u?0:u+r),e=e===T||e>u?u:Eu(e),0>e&&(e+=u),e=r>e?0:ku(e);r<e;)n[r++]=t;return n},An.filter=function(n,t){return(ff(n)?i:jt)(n,ye(t,3))},An.flatMap=function(n,t){return wt(ru(n,t),1)},An.flatMapDeep=function(n,t){return wt(ru(n,t),$)},An.flatMapDepth=function(n,t,r){return r=r===T?1:Eu(r),
wt(ru(n,t),r)},An.flatten=Ze,An.flattenDeep=function(n){return(null==n?0:n.length)?wt(n,$):[]},An.flattenDepth=function(n,t){return null!=n&&n.length?(t=t===T?1:Eu(t),wt(n,t)):[]},An.flip=function(n){return fe(n,512)},An.flow=Pf,An.flowRight=Zf,An.fromPairs=function(n){for(var t=-1,r=null==n?0:n.length,e={};++t<r;){var u=n[t];e[u[0]]=u[1]}return e},An.functions=function(n){return null==n?[]:Et(n,Wu(n))},An.functionsIn=function(n){return null==n?[]:Et(n,Bu(n))},An.groupBy=Po,An.initial=function(n){
return(null==n?0:n.length)?hr(n,0,-1):[]},An.intersection=Eo,An.intersectionBy=ko,An.intersectionWith=So,An.invert=Af,An.invertBy=Ef,An.invokeMap=Zo,An.iteratee=Fu,An.keyBy=qo,An.keys=Wu,An.keysIn=Bu,An.map=ru,An.mapKeys=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,t(n,e,u),n)}),r},An.mapValues=function(n,t){var r={};return t=ye(t,3),mt(n,function(n,e,u){st(r,e,t(n,e,u))}),r},An.matches=function(n){return Ht(_t(n,1))},An.matchesProperty=function(n,t){return Jt(n,_t(t,1))},An.memoize=cu,
An.merge=Sf,An.mergeWith=Of,An.method=qf,An.methodOf=Vf,An.mixin=Nu,An.negate=au,An.nthArg=function(n){return n=Eu(n),fr(function(t){return Qt(t,n)})},An.omit=If,An.omitBy=function(n,t){return Lu(n,au(ye(t)))},An.once=function(n){return uu(2,n)},An.orderBy=function(n,t,r,e){return null==n?[]:(ff(t)||(t=null==t?[]:[t]),r=e?T:r,ff(r)||(r=null==r?[]:[r]),Xt(n,t,r))},An.over=Kf,An.overArgs=Xo,An.overEvery=Gf,An.overSome=Hf,An.partial=nf,An.partialRight=tf,An.partition=Vo,An.pick=Rf,An.pickBy=Lu,An.property=Zu,
An.propertyOf=function(n){return function(t){return null==n?T:kt(n,t)}},An.pull=Oo,An.pullAll=Ke,An.pullAllBy=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,ye(r,2)):n},An.pullAllWith=function(n,t,r){return n&&n.length&&t&&t.length?er(n,t,T,r):n},An.pullAt=Io,An.range=Jf,An.rangeRight=Yf,An.rearg=rf,An.reject=function(n,t){return(ff(n)?i:jt)(n,au(ye(t,3)))},An.remove=function(n,t){var r=[];if(!n||!n.length)return r;var e=-1,u=[],i=n.length;for(t=ye(t,3);++e<i;){var o=n[e];t(o,e,n)&&(r.push(o),
u.push(e))}return ur(n,u),r},An.rest=function(n,t){if(typeof n!="function")throw new ti("Expected a function");return t=t===T?t:Eu(t),fr(n,t)},An.reverse=Ge,An.sampleSize=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Eu(t),(ff(n)?et:ar)(n,t)},An.set=function(n,t,r){return null==n?n:lr(n,t,r)},An.setWith=function(n,t,r,e){return e=typeof e=="function"?e:T,null==n?n:lr(n,t,r,e)},An.shuffle=function(n){return(ff(n)?ut:sr)(n)},An.slice=function(n,t,r){var e=null==n?0:n.length;return e?(r&&typeof r!="number"&&Oe(n,t,r)?(t=0,
r=e):(t=null==t?0:Eu(t),r=r===T?e:Eu(r)),hr(n,t,r)):[]},An.sortBy=Ko,An.sortedUniq=function(n){return n&&n.length?gr(n):[]},An.sortedUniqBy=function(n,t){return n&&n.length?gr(n,ye(t,2)):[]},An.split=function(n,t,r){return r&&typeof r!="number"&&Oe(n,t,r)&&(t=r=T),r=r===T?4294967295:r>>>0,r?(n=Iu(n))&&(typeof t=="string"||null!=t&&!hf(t))&&(t=yr(t),!t&&Rn.test(n))?Or(M(n),0,r):n.split(t,r):[]},An.spread=function(t,r){if(typeof t!="function")throw new ti("Expected a function");return r=null==r?0:Ui(Eu(r),0),
fr(function(e){var u=e[r];return e=Or(e,0,r),u&&a(e,u),n(t,this,e)})},An.tail=function(n){var t=null==n?0:n.length;return t?hr(n,1,t):[]},An.take=function(n,t,r){return n&&n.length?(t=r||t===T?1:Eu(t),hr(n,0,0>t?0:t)):[]},An.takeRight=function(n,t,r){var e=null==n?0:n.length;return e?(t=r||t===T?1:Eu(t),t=e-t,hr(n,0>t?0:t,e)):[]},An.takeRightWhile=function(n,t){return n&&n.length?jr(n,ye(t,3),false,true):[]},An.takeWhile=function(n,t){return n&&n.length?jr(n,ye(t,3)):[]},An.tap=function(n,t){return t(n),
n},An.throttle=function(n,t,r){var e=true,u=true;if(typeof n!="function")throw new ti("Expected a function");return du(r)&&(e="leading"in r?!!r.leading:e,u="trailing"in r?!!r.trailing:u),fu(n,t,{leading:e,maxWait:t,trailing:u})},An.thru=Qe,An.toArray=mu,An.toPairs=zf,An.toPairsIn=Wf,An.toPath=function(n){return ff(n)?c(n,Me):wu(n)?[n]:Ur(jo(Iu(n)))},An.toPlainObject=Ou,An.transform=function(n,t,e){var u=ff(n),i=u||af(n)||_f(n);if(t=ye(t,4),null==e){var o=n&&n.constructor;e=i?u?new o:[]:du(n)&&_u(o)?eo(di(n)):{};
}return(i?r:mt)(n,function(n,r,u){return t(e,n,r,u)}),e},An.unary=function(n){return eu(n,1)},An.union=Ro,An.unionBy=zo,An.unionWith=Wo,An.uniq=function(n){return n&&n.length?br(n):[]},An.uniqBy=function(n,t){return n&&n.length?br(n,ye(t,2)):[]},An.uniqWith=function(n,t){return t=typeof t=="function"?t:T,n&&n.length?br(n,T,t):[]},An.unset=function(n,t){return null==n||xr(n,t)},An.unzip=He,An.unzipWith=Je,An.update=function(n,t,r){return null==n?n:lr(n,t,kr(r)(kt(n,t)),void 0)},An.updateWith=function(n,t,r,e){
return e=typeof e=="function"?e:T,null!=n&&(n=lr(n,t,kr(r)(kt(n,t)),e)),n},An.values=Uu,An.valuesIn=function(n){return null==n?[]:S(n,Bu(n))},An.without=Bo,An.words=Mu,An.wrap=function(n,t){return nf(kr(t),n)},An.xor=Lo,An.xorBy=Uo,An.xorWith=Co,An.zip=Do,An.zipObject=function(n,t){return Ar(n||[],t||[],ot)},An.zipObjectDeep=function(n,t){return Ar(n||[],t||[],lr)},An.zipWith=Mo,An.entries=zf,An.entriesIn=Wf,An.extend=yf,An.extendWith=bf,Nu(An,An),An.add=Qf,An.attempt=Ff,An.camelCase=Bf,An.capitalize=Cu,
An.ceil=Xf,An.clamp=function(n,t,r){return r===T&&(r=t,t=T),r!==T&&(r=Su(r),r=r===r?r:0),t!==T&&(t=Su(t),t=t===t?t:0),pt(Su(n),t,r)},An.clone=function(n){return _t(n,4)},An.cloneDeep=function(n){return _t(n,5)},An.cloneDeepWith=function(n,t){return t=typeof t=="function"?t:T,_t(n,5,t)},An.cloneWith=function(n,t){return t=typeof t=="function"?t:T,_t(n,4,t)},An.conformsTo=function(n,t){return null==t||gt(n,t,Wu(t))},An.deburr=Du,An.defaultTo=function(n,t){return null==n||n!==n?t:n},An.divide=nc,An.endsWith=function(n,t,r){
n=Iu(n),t=yr(t);var e=n.length,e=r=r===T?e:pt(Eu(r),0,e);return r-=t.length,0<=r&&n.slice(r,e)==t},An.eq=lu,An.escape=function(n){return(n=Iu(n))&&H.test(n)?n.replace(K,nt):n},An.escapeRegExp=function(n){return(n=Iu(n))&&en.test(n)?n.replace(rn,"\\$&"):n},An.every=function(n,t,r){var e=ff(n)?u:bt;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},An.find=Fo,An.findIndex=Ne,An.findKey=function(n,t){return p(n,ye(t,3),mt)},An.findLast=No,An.findLastIndex=Pe,An.findLastKey=function(n,t){return p(n,ye(t,3),At);
},An.floor=tc,An.forEach=nu,An.forEachRight=tu,An.forIn=function(n,t){return null==n?n:oo(n,ye(t,3),Bu)},An.forInRight=function(n,t){return null==n?n:fo(n,ye(t,3),Bu)},An.forOwn=function(n,t){return n&&mt(n,ye(t,3))},An.forOwnRight=function(n,t){return n&&At(n,ye(t,3))},An.get=Ru,An.gt=ef,An.gte=uf,An.has=function(n,t){return null!=n&&we(n,t,Rt)},An.hasIn=zu,An.head=qe,An.identity=$u,An.includes=function(n,t,r,e){return n=su(n)?n:Uu(n),r=r&&!e?Eu(r):0,e=n.length,0>r&&(r=Ui(e+r,0)),ju(n)?r<=e&&-1<n.indexOf(t,r):!!e&&-1<v(n,t,r);
},An.indexOf=function(n,t,r){var e=null==n?0:n.length;return e?(r=null==r?0:Eu(r),0>r&&(r=Ui(e+r,0)),v(n,t,r)):-1},An.inRange=function(n,t,r){return t=Au(t),r===T?(r=t,t=0):r=Au(r),n=Su(n),n>=Ci(t,r)&&n<Ui(t,r)},An.invoke=kf,An.isArguments=of,An.isArray=ff,An.isArrayBuffer=cf,An.isArrayLike=su,An.isArrayLikeObject=hu,An.isBoolean=function(n){return true===n||false===n||yu(n)&&"[object Boolean]"==Ot(n)},An.isBuffer=af,An.isDate=lf,An.isElement=function(n){return yu(n)&&1===n.nodeType&&!xu(n)},An.isEmpty=function(n){
if(null==n)return true;if(su(n)&&(ff(n)||typeof n=="string"||typeof n.splice=="function"||af(n)||_f(n)||of(n)))return!n.length;var t=vo(n);if("[object Map]"==t||"[object Set]"==t)return!n.size;if(ze(n))return!Vt(n).length;for(var r in n)if(oi.call(n,r))return false;return true},An.isEqual=function(n,t){return Mt(n,t)},An.isEqualWith=function(n,t,r){var e=(r=typeof r=="function"?r:T)?r(n,t):T;return e===T?Mt(n,t,T,r):!!e},An.isError=pu,An.isFinite=function(n){return typeof n=="number"&&Wi(n)},An.isFunction=_u,
An.isInteger=vu,An.isLength=gu,An.isMap=sf,An.isMatch=function(n,t){return n===t||$t(n,t,xe(t))},An.isMatchWith=function(n,t,r){return r=typeof r=="function"?r:T,$t(n,t,xe(t),r)},An.isNaN=function(n){return bu(n)&&n!=+n},An.isNative=function(n){if(go(n))throw new Hu("Unsupported core-js use. Try https://npms.io/search?q=ponyfill.");return Ft(n)},An.isNil=function(n){return null==n},An.isNull=function(n){return null===n},An.isNumber=bu,An.isObject=du,An.isObjectLike=yu,An.isPlainObject=xu,An.isRegExp=hf,
An.isSafeInteger=function(n){return vu(n)&&-9007199254740991<=n&&9007199254740991>=n},An.isSet=pf,An.isString=ju,An.isSymbol=wu,An.isTypedArray=_f,An.isUndefined=function(n){return n===T},An.isWeakMap=function(n){return yu(n)&&"[object WeakMap]"==vo(n)},An.isWeakSet=function(n){return yu(n)&&"[object WeakSet]"==Ot(n)},An.join=function(n,t){return null==n?"":Bi.call(n,t)},An.kebabCase=Lf,An.last=Ve,An.lastIndexOf=function(n,t,r){var e=null==n?0:n.length;if(!e)return-1;var u=e;if(r!==T&&(u=Eu(r),u=0>u?Ui(e+u,0):Ci(u,e-1)),
t===t){for(r=u+1;r--&&n[r]!==t;);n=r}else n=_(n,d,u,true);return n},An.lowerCase=Uf,An.lowerFirst=Cf,An.lt=vf,An.lte=gf,An.max=function(n){return n&&n.length?xt(n,$u,It):T},An.maxBy=function(n,t){return n&&n.length?xt(n,ye(t,2),It):T},An.mean=function(n){return y(n,$u)},An.meanBy=function(n,t){return y(n,ye(t,2))},An.min=function(n){return n&&n.length?xt(n,$u,Kt):T},An.minBy=function(n,t){return n&&n.length?xt(n,ye(t,2),Kt):T},An.stubArray=qu,An.stubFalse=Vu,An.stubObject=function(){return{}},An.stubString=function(){
return""},An.stubTrue=function(){return true},An.multiply=rc,An.nth=function(n,t){return n&&n.length?Qt(n,Eu(t)):T},An.noConflict=function(){return $n._===this&&($n._=si),this},An.noop=Pu,An.now=Go,An.pad=function(n,t,r){n=Iu(n);var e=(t=Eu(t))?D(n):0;return!t||e>=t?n:(t=(t-e)/2,ne(Ii(t),r)+n+ne(Oi(t),r))},An.padEnd=function(n,t,r){n=Iu(n);var e=(t=Eu(t))?D(n):0;return t&&e<t?n+ne(t-e,r):n},An.padStart=function(n,t,r){n=Iu(n);var e=(t=Eu(t))?D(n):0;return t&&e<t?ne(t-e,r)+n:n},An.parseInt=function(n,t,r){
return r||null==t?t=0:t&&(t=+t),Mi(Iu(n).replace(on,""),t||0)},An.random=function(n,t,r){if(r&&typeof r!="boolean"&&Oe(n,t,r)&&(t=r=T),r===T&&(typeof t=="boolean"?(r=t,t=T):typeof n=="boolean"&&(r=n,n=T)),n===T&&t===T?(n=0,t=1):(n=Au(n),t===T?(t=n,n=0):t=Au(t)),n>t){var e=n;n=t,t=e}return r||n%1||t%1?(r=Ti(),Ci(n+r*(t-n+Cn("1e-"+((r+"").length-1))),t)):ir(n,t)},An.reduce=function(n,t,r){var e=ff(n)?l:j,u=3>arguments.length;return e(n,ye(t,4),r,u,uo)},An.reduceRight=function(n,t,r){var e=ff(n)?s:j,u=3>arguments.length;
return e(n,ye(t,4),r,u,io)},An.repeat=function(n,t,r){return t=(r?Oe(n,t,r):t===T)?1:Eu(t),or(Iu(n),t)},An.replace=function(){var n=arguments,t=Iu(n[0]);return 3>n.length?t:t.replace(n[1],n[2])},An.result=function(n,t,r){t=Sr(t,n);var e=-1,u=t.length;for(u||(u=1,n=T);++e<u;){var i=null==n?T:n[Me(t[e])];i===T&&(e=u,i=r),n=_u(i)?i.call(n):i}return n},An.round=ec,An.runInContext=x,An.sample=function(n){return(ff(n)?Qn:cr)(n)},An.size=function(n){if(null==n)return 0;if(su(n))return ju(n)?D(n):n.length;
var t=vo(n);return"[object Map]"==t||"[object Set]"==t?n.size:Vt(n).length},An.snakeCase=Df,An.some=function(n,t,r){var e=ff(n)?h:pr;return r&&Oe(n,t,r)&&(t=T),e(n,ye(t,3))},An.sortedIndex=function(n,t){return _r(n,t)},An.sortedIndexBy=function(n,t,r){return vr(n,t,ye(r,2))},An.sortedIndexOf=function(n,t){var r=null==n?0:n.length;if(r){var e=_r(n,t);if(e<r&&lu(n[e],t))return e}return-1},An.sortedLastIndex=function(n,t){return _r(n,t,true)},An.sortedLastIndexBy=function(n,t,r){return vr(n,t,ye(r,2),true);
},An.sortedLastIndexOf=function(n,t){if(null==n?0:n.length){var r=_r(n,t,true)-1;if(lu(n[r],t))return r}return-1},An.startCase=Mf,An.startsWith=function(n,t,r){return n=Iu(n),r=null==r?0:pt(Eu(r),0,n.length),t=yr(t),n.slice(r,r+t.length)==t},An.subtract=uc,An.sum=function(n){return n&&n.length?m(n,$u):0},An.sumBy=function(n,t){return n&&n.length?m(n,ye(t,2)):0},An.template=function(n,t,r){var e=An.templateSettings;r&&Oe(n,t,r)&&(t=T),n=Iu(n),t=bf({},t,e,ce),r=bf({},t.imports,e.imports,ce);var u,i,o=Wu(r),f=S(r,o),c=0;
r=t.interpolate||jn;var a="__p+='";r=Xu((t.escape||jn).source+"|"+r.source+"|"+(r===Q?pn:jn).source+"|"+(t.evaluate||jn).source+"|$","g");var l=oi.call(t,"sourceURL")?"//# sourceURL="+(t.sourceURL+"").replace(/[\r\n]/g," ")+"\n":"";if(n.replace(r,function(t,r,e,o,f,l){return e||(e=o),a+=n.slice(c,l).replace(wn,z),r&&(u=true,a+="'+__e("+r+")+'"),f&&(i=true,a+="';"+f+";\n__p+='"),e&&(a+="'+((__t=("+e+"))==null?'':__t)+'"),c=l+t.length,t}),a+="';",(t=oi.call(t,"variable")&&t.variable)||(a="with(obj){"+a+"}"),
a=(i?a.replace(P,""):a).replace(Z,"$1").replace(q,"$1;"),a="function("+(t||"obj")+"){"+(t?"":"obj||(obj={});")+"var __t,__p=''"+(u?",__e=_.escape":"")+(i?",__j=Array.prototype.join;function print(){__p+=__j.call(arguments,'')}":";")+a+"return __p}",t=Ff(function(){return Ju(o,l+"return "+a).apply(T,f)}),t.source=a,pu(t))throw t;return t},An.times=function(n,t){if(n=Eu(n),1>n||9007199254740991<n)return[];var r=4294967295,e=Ci(n,4294967295);for(t=ye(t),n-=4294967295,e=A(e,t);++r<n;)t(r);return e},An.toFinite=Au,
An.toInteger=Eu,An.toLength=ku,An.toLower=function(n){return Iu(n).toLowerCase()},An.toNumber=Su,An.toSafeInteger=function(n){return n?pt(Eu(n),-9007199254740991,9007199254740991):0===n?n:0},An.toString=Iu,An.toUpper=function(n){return Iu(n).toUpperCase()},An.trim=function(n,t,r){return(n=Iu(n))&&(r||t===T)?n.replace(un,""):n&&(t=yr(t))?(n=M(n),r=M(t),t=I(n,r),r=R(n,r)+1,Or(n,t,r).join("")):n},An.trimEnd=function(n,t,r){return(n=Iu(n))&&(r||t===T)?n.replace(fn,""):n&&(t=yr(t))?(n=M(n),t=R(n,M(t))+1,
Or(n,0,t).join("")):n},An.trimStart=function(n,t,r){return(n=Iu(n))&&(r||t===T)?n.replace(on,""):n&&(t=yr(t))?(n=M(n),t=I(n,M(t)),Or(n,t).join("")):n},An.truncate=function(n,t){var r=30,e="...";if(du(t))var u="separator"in t?t.separator:u,r="length"in t?Eu(t.length):r,e="omission"in t?yr(t.omission):e;n=Iu(n);var i=n.length;if(Rn.test(n))var o=M(n),i=o.length;if(r>=i)return n;if(i=r-D(e),1>i)return e;if(r=o?Or(o,0,i).join(""):n.slice(0,i),u===T)return r+e;if(o&&(i+=r.length-i),hf(u)){if(n.slice(i).search(u)){
var f=r;for(u.global||(u=Xu(u.source,Iu(_n.exec(u))+"g")),u.lastIndex=0;o=u.exec(f);)var c=o.index;r=r.slice(0,c===T?i:c)}}else n.indexOf(yr(u),i)!=i&&(u=r.lastIndexOf(u),-1<u&&(r=r.slice(0,u)));return r+e},An.unescape=function(n){return(n=Iu(n))&&G.test(n)?n.replace(V,tt):n},An.uniqueId=function(n){var t=++fi;return Iu(n)+t},An.upperCase=Tf,An.upperFirst=$f,An.each=nu,An.eachRight=tu,An.first=qe,Nu(An,function(){var n={};return mt(An,function(t,r){oi.call(An.prototype,r)||(n[r]=t)}),n}(),{chain:false
}),An.VERSION="4.17.15",r("bind bindKey curry curryRight partial partialRight".split(" "),function(n){An[n].placeholder=An}),r(["drop","take"],function(n,t){Un.prototype[n]=function(r){r=r===T?1:Ui(Eu(r),0);var e=this.__filtered__&&!t?new Un(this):this.clone();return e.__filtered__?e.__takeCount__=Ci(r,e.__takeCount__):e.__views__.push({size:Ci(r,4294967295),type:n+(0>e.__dir__?"Right":"")}),e},Un.prototype[n+"Right"]=function(t){return this.reverse()[n](t).reverse()}}),r(["filter","map","takeWhile"],function(n,t){
var r=t+1,e=1==r||3==r;Un.prototype[n]=function(n){var t=this.clone();return t.__iteratees__.push({iteratee:ye(n,3),type:r}),t.__filtered__=t.__filtered__||e,t}}),r(["head","last"],function(n,t){var r="take"+(t?"Right":"");Un.prototype[n]=function(){return this[r](1).value()[0]}}),r(["initial","tail"],function(n,t){var r="drop"+(t?"":"Right");Un.prototype[n]=function(){return this.__filtered__?new Un(this):this[r](1)}}),Un.prototype.compact=function(){return this.filter($u)},Un.prototype.find=function(n){
return this.filter(n).head()},Un.prototype.findLast=function(n){return this.reverse().find(n)},Un.prototype.invokeMap=fr(function(n,t){return typeof n=="function"?new Un(this):this.map(function(r){return Lt(r,n,t)})}),Un.prototype.reject=function(n){return this.filter(au(ye(n)))},Un.prototype.slice=function(n,t){n=Eu(n);var r=this;return r.__filtered__&&(0<n||0>t)?new Un(r):(0>n?r=r.takeRight(-n):n&&(r=r.drop(n)),t!==T&&(t=Eu(t),r=0>t?r.dropRight(-t):r.take(t-n)),r)},Un.prototype.takeRightWhile=function(n){
return this.reverse().takeWhile(n).reverse()},Un.prototype.toArray=function(){return this.take(4294967295)},mt(Un.prototype,function(n,t){var r=/^(?:filter|find|map|reject)|While$/.test(t),e=/^(?:head|last)$/.test(t),u=An[e?"take"+("last"==t?"Right":""):t],i=e||/^find/.test(t);u&&(An.prototype[t]=function(){function t(n){return n=u.apply(An,a([n],f)),e&&h?n[0]:n}var o=this.__wrapped__,f=e?[1]:arguments,c=o instanceof Un,l=f[0],s=c||ff(o);s&&r&&typeof l=="function"&&1!=l.length&&(c=s=false);var h=this.__chain__,p=!!this.__actions__.length,l=i&&!h,c=c&&!p;
return!i&&s?(o=c?o:new Un(this),o=n.apply(o,f),o.__actions__.push({func:Qe,args:[t],thisArg:T}),new On(o,h)):l&&c?n.apply(this,f):(o=this.thru(t),l?e?o.value()[0]:o.value():o)})}),r("pop push shift sort splice unshift".split(" "),function(n){var t=ri[n],r=/^(?:push|sort|unshift)$/.test(n)?"tap":"thru",e=/^(?:pop|shift)$/.test(n);An.prototype[n]=function(){var n=arguments;if(e&&!this.__chain__){var u=this.value();return t.apply(ff(u)?u:[],n)}return this[r](function(r){return t.apply(ff(r)?r:[],n)});
}}),mt(Un.prototype,function(n,t){var r=An[t];if(r){var e=r.name+"";oi.call(Gi,e)||(Gi[e]=[]),Gi[e].push({name:t,func:r})}}),Gi[Jr(T,2).name]=[{name:"wrapper",func:T}],Un.prototype.clone=function(){var n=new Un(this.__wrapped__);return n.__actions__=Ur(this.__actions__),n.__dir__=this.__dir__,n.__filtered__=this.__filtered__,n.__iteratees__=Ur(this.__iteratees__),n.__takeCount__=this.__takeCount__,n.__views__=Ur(this.__views__),n},Un.prototype.reverse=function(){if(this.__filtered__){var n=new Un(this);
n.__dir__=-1,n.__filtered__=true}else n=this.clone(),n.__dir__*=-1;return n},Un.prototype.value=function(){var n,t=this.__wrapped__.value(),r=this.__dir__,e=ff(t),u=0>r,i=e?t.length:0;n=i;for(var o=this.__views__,f=0,c=-1,a=o.length;++c<a;){var l=o[c],s=l.size;switch(l.type){case"drop":f+=s;break;case"dropRight":n-=s;break;case"take":n=Ci(n,f+s);break;case"takeRight":f=Ui(f,n-s)}}if(n={start:f,end:n},o=n.start,f=n.end,n=f-o,o=u?f:o-1,f=this.__iteratees__,c=f.length,a=0,l=Ci(n,this.__takeCount__),!e||!u&&i==n&&l==n)return wr(t,this.__actions__);
e=[];n:for(;n--&&a<l;){for(o+=r,u=-1,i=t[o];++u<c;){var h=f[u],s=h.type,h=(0,h.iteratee)(i);if(2==s)i=h;else if(!h){if(1==s)continue n;break n}}e[a++]=i}return e},An.prototype.at=To,An.prototype.chain=function(){return Ye(this)},An.prototype.commit=function(){return new On(this.value(),this.__chain__)},An.prototype.next=function(){this.__values__===T&&(this.__values__=mu(this.value()));var n=this.__index__>=this.__values__.length;return{done:n,value:n?T:this.__values__[this.__index__++]}},An.prototype.plant=function(n){
for(var t,r=this;r instanceof En;){var e=Fe(r);e.__index__=0,e.__values__=T,t?u.__wrapped__=e:t=e;var u=e,r=r.__wrapped__}return u.__wrapped__=n,t},An.prototype.reverse=function(){var n=this.__wrapped__;return n instanceof Un?(this.__actions__.length&&(n=new Un(this)),n=n.reverse(),n.__actions__.push({func:Qe,args:[Ge],thisArg:T}),new On(n,this.__chain__)):this.thru(Ge)},An.prototype.toJSON=An.prototype.valueOf=An.prototype.value=function(){return wr(this.__wrapped__,this.__actions__)},An.prototype.first=An.prototype.head,
wi&&(An.prototype[wi]=Xe),An}();typeof define=="function"&&typeof define.amd=="object"&&define.amd?($n._=rt, define(function(){return rt})):Nn?((Nn.exports=rt)._=rt,Fn._=rt):$n._=rt}).call(this);
!function(e){var t=e.babelHelpers={};t.typeof="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},t.jsx=function(){var e="function"==typeof Symbol&&Symbol.for&&Symbol.for("react.element")||60103;return function(t,n,i,r){var a=t&&t.defaultProps,o=arguments.length-3;if(n||0===o||(n={}),n&&a)for(var s in a)void 0===n[s]&&(n[s]=a[s]);else n||(n=a||{});if(1===o)n.children=r;else if(o>1){for(var l=Array(o),u=0;u<o;u++)l[u]=arguments[u+3];n.children=l}return{$$typeof:e,type:t,key:void 0===i?null:""+i,ref:null,props:n,_owner:null}}}(),t.asyncIterator=function(e){if("function"==typeof Symbol){if(Symbol.asyncIterator){var t=e[Symbol.asyncIterator];if(null!=t)return t.call(e)}if(Symbol.iterator)return e[Symbol.iterator]()}throw new TypeError("Object is not async iterable")},t.asyncGenerator=function(){function e(e){this.value=e}function t(t){function n(e,t){return new Promise(function(n,r){var s={key:e,arg:t,resolve:n,reject:r,next:null};o?o=o.next=s:(a=o=s,i(e,t))})}function i(n,a){try{var o=t[n](a),s=o.value;s instanceof e?Promise.resolve(s.value).then(function(e){i("next",e)},function(e){i("throw",e)}):r(o.done?"return":"normal",o.value)}catch(e){r("throw",e)}}function r(e,t){switch(e){case"return":a.resolve({value:t,done:!0});break;case"throw":a.reject(t);break;default:a.resolve({value:t,done:!1})}a=a.next,a?i(a.key,a.arg):o=null}var a,o;this._invoke=n,"function"!=typeof t.return&&(this.return=void 0)}return"function"==typeof Symbol&&Symbol.asyncIterator&&(t.prototype[Symbol.asyncIterator]=function(){return this}),t.prototype.next=function(e){return this._invoke("next",e)},t.prototype.throw=function(e){return this._invoke("throw",e)},t.prototype.return=function(e){return this._invoke("return",e)},{wrap:function(e){return function(){return new t(e.apply(this,arguments))}},await:function(t){return new e(t)}}}(),t.asyncGeneratorDelegate=function(e,t){function n(n,i){return r=!0,i=new Promise(function(t){t(e[n](i))}),{done:!1,value:t(i)}}var i={},r=!1;return"function"==typeof Symbol&&Symbol.iterator&&(i[Symbol.iterator]=function(){return this}),i.next=function(e){return r?(r=!1,e):n("next",e)},"function"==typeof e.throw&&(i.throw=function(e){if(r)throw r=!1,e;return n("throw",e)}),"function"==typeof e.return&&(i.return=function(e){return n("return",e)}),i},t.asyncToGenerator=function(e){return function(){var t=e.apply(this,arguments);return new Promise(function(e,n){function i(r,a){try{var o=t[r](a),s=o.value}catch(e){return void n(e)}return o.done?void e(s):Promise.resolve(s).then(function(e){i("next",e)},function(e){i("throw",e)})}return i("next")})}},t.classCallCheck=function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")},t.createClass=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}(),t.defineEnumerableProperties=function(e,t){for(var n in t){var i=t[n];i.configurable=i.enumerable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,n,i)}return e},t.defaults=function(e,t){for(var n=Object.getOwnPropertyNames(t),i=0;i<n.length;i++){var r=n[i],a=Object.getOwnPropertyDescriptor(t,r);a&&a.configurable&&void 0===e[r]&&Object.defineProperty(e,r,a)}return e},t.defineProperty=function(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e},t.extends=Object.assign||function(e){for(var t=1;t<arguments.length;t++){var n=arguments[t];for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e},t.get=function e(t,n,i){null===t&&(t=Function.prototype);var r=Object.getOwnPropertyDescriptor(t,n);if(void 0===r){var a=Object.getPrototypeOf(t);return null===a?void 0:e(a,n,i)}if("value"in r)return r.value;var o=r.get;return void 0!==o?o.call(i):void 0},t.inherits=function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function, not "+typeof t);e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,enumerable:!1,writable:!0,configurable:!0}}),t&&(Object.setPrototypeOf?Object.setPrototypeOf(e,t):e.__proto__=t)},t.instanceof=function(e,t){return null!=t&&"undefined"!=typeof Symbol&&t[Symbol.hasInstance]?t[Symbol.hasInstance](e):e instanceof t},t.interopRequireDefault=function(e){return e&&e.__esModule?e:{default:e}},t.interopRequireWildcard=function(e){if(e&&e.__esModule)return e;var t={};if(null!=e)for(var n in e)Object.prototype.hasOwnProperty.call(e,n)&&(t[n]=e[n]);return t.default=e,t},t.newArrowCheck=function(e,t){if(e!==t)throw new TypeError("Cannot instantiate an arrow function")},t.objectDestructuringEmpty=function(e){if(null==e)throw new TypeError("Cannot destructure undefined")},t.objectWithoutProperties=function(e,t){var n={};for(var i in e)t.indexOf(i)>=0||Object.prototype.hasOwnProperty.call(e,i)&&(n[i]=e[i]);return n},t.possibleConstructorReturn=function(e,t){if(!e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return!t||"object"!=typeof t&&"function"!=typeof t?e:t},t.selfGlobal="undefined"==typeof e?self:e,t.set=function e(t,n,i,r){var a=Object.getOwnPropertyDescriptor(t,n);if(void 0===a){var o=Object.getPrototypeOf(t);null!==o&&e(o,n,i,r)}else if("value"in a&&a.writable)a.value=i;else{var s=a.set;void 0!==s&&s.call(r,i)}return i},t.slicedToArray=function(){function e(e,t){var n=[],i=!0,r=!1,a=void 0;try{for(var o,s=e[Symbol.iterator]();!(i=(o=s.next()).done)&&(n.push(o.value),!t||n.length!==t);i=!0);}catch(e){r=!0,a=e}finally{try{!i&&s.return&&s.return()}finally{if(r)throw a}}return n}return function(t,n){if(Array.isArray(t))return t;if(Symbol.iterator in Object(t))return e(t,n);throw new TypeError("Invalid attempt to destructure non-iterable instance")}}(),t.slicedToArrayLoose=function(e,t){if(Array.isArray(e))return e;if(Symbol.iterator in Object(e)){for(var n,i=[],r=e[Symbol.iterator]();!(n=r.next()).done&&(i.push(n.value),!t||i.length!==t););return i}throw new TypeError("Invalid attempt to destructure non-iterable instance")},t.taggedTemplateLiteral=function(e,t){return Object.freeze(Object.defineProperties(e,{raw:{value:Object.freeze(t)}}))},t.taggedTemplateLiteralLoose=function(e,t){return e.raw=t,e},t.temporalRef=function(e,t,n){if(e===n)throw new ReferenceError(t+" is not defined - temporal dead zone");return e},t.temporalUndefined={},t.toArray=function(e){return Array.isArray(e)?e:Array.from(e)},t.toConsumableArray=function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}}("undefined"==typeof global?self:global);try{var ce=new window.CustomEvent("test");if(ce.preventDefault(),!0!==ce.defaultPrevented)throw Error("Could not prevent default")}catch(e){var CustomEvent=function(e,t){var n,i;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},n=document.createEvent("CustomEvent"),n.initCustomEvent(e,t.bubbles,t.cancelable,t.detail),i=n.preventDefault,n.preventDefault=function(){i.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},n};CustomEvent.prototype=window.Event.prototype,window.CustomEvent=CustomEvent}!function(e,t){e.ES6Promise||(e.ES6Promise=t(),e.ES6Promise.polyfill())}(this,function(){"use strict";function e(e){return"function"==typeof e||"object"==typeof e&&null!==e}function t(e){return"function"==typeof e}function n(e){K=e}function i(e){q=e}function r(){return function(){return process.nextTick(u)}}function a(){return"undefined"!=typeof z?function(){z(u)}:l()}function o(){var e=0,t=new Z(u),n=document.createTextNode("");return t.observe(n,{characterData:!0}),function(){n.data=e=++e%2}}function s(){var e=new MessageChannel;return e.port1.onmessage=u,function(){return e.port2.postMessage(0)}}function l(){var e=setTimeout;return function(){return e(u,1)}}function u(){for(var e=0;e<F;e+=2){var t=J[e],n=J[e+1];t(n),J[e]=void 0,J[e+1]=void 0}F=0}function c(){try{var e=require,t=e("vertx");return z=t.runOnLoop||t.runOnContext,a()}catch(e){return l()}}function h(e,t){var n=arguments,i=this,r=new this.constructor(f);void 0===r[te]&&H(r);var a=i._state;return a?!function(){var e=n[a-1];q(function(){return O(a,r,e,i._result)})}():C(i,r,e,t),r}function d(e){var t=this;if(e&&"object"==typeof e&&e.constructor===t)return e;var n=new t(f);return k(n,e),n}function f(){}function p(){return new TypeError("You cannot resolve a promise with itself")}function y(){return new TypeError("A promises callback cannot return that same promise.")}function A(e){try{return e.then}catch(e){return ae.error=e,ae}}function v(e,t,n,i){try{e.call(t,n,i)}catch(e){return e}}function g(e,t,n){q(function(e){var i=!1,r=v(n,t,function(n){i||(i=!0,t!==n?k(e,n):_(e,n))},function(t){i||(i=!0,T(e,t))},"Settle: "+(e._label||" unknown promise"));!i&&r&&(i=!0,T(e,r))},e)}function m(e,t){t._state===ie?_(e,t._result):t._state===re?T(e,t._result):C(t,void 0,function(t){return k(e,t)},function(t){return T(e,t)})}function b(e,n,i){n.constructor===e.constructor&&i===h&&n.constructor.resolve===d?m(e,n):i===ae?T(e,ae.error):void 0===i?_(e,n):t(i)?g(e,n,i):_(e,n)}function k(t,n){t===n?T(t,p()):e(n)?b(t,n,A(n)):_(t,n)}function E(e){e._onerror&&e._onerror(e._result),N(e)}function _(e,t){e._state===ne&&(e._result=t,e._state=ie,0!==e._subscribers.length&&q(N,e))}function T(e,t){e._state===ne&&(e._state=re,e._result=t,q(E,e))}function C(e,t,n,i){var r=e._subscribers,a=r.length;e._onerror=null,r[a]=t,r[a+ie]=n,r[a+re]=i,0===a&&e._state&&q(N,e)}function N(e){var t=e._subscribers,n=e._state;if(0!==t.length){for(var i=void 0,r=void 0,a=e._result,o=0;o<t.length;o+=3)i=t[o],r=t[o+n],i?O(n,i,r,a):r(a);e._subscribers.length=0}}function P(){this.error=null}function S(e,t){try{return e(t)}catch(e){return oe.error=e,oe}}function O(e,n,i,r){var a=t(i),o=void 0,s=void 0,l=void 0,u=void 0;if(a){if(o=S(i,r),o===oe?(u=!0,s=o.error,o=null):l=!0,n===o)return void T(n,y())}else o=r,l=!0;n._state!==ne||(a&&l?k(n,o):u?T(n,s):e===ie?_(n,o):e===re&&T(n,o))}function M(e,t){try{t(function(t){k(e,t)},function(t){T(e,t)})}catch(t){T(e,t)}}function R(){return se++}function H(e){e[te]=se++,e._state=void 0,e._result=void 0,e._subscribers=[]}function L(e,t){this._instanceConstructor=e,this.promise=new e(f),this.promise[te]||H(this.promise),Y(t)?(this._input=t,this.length=t.length,this._remaining=t.length,this._result=new Array(this.length),0===this.length?_(this.promise,this._result):(this.length=this.length||0,this._enumerate(),0===this._remaining&&_(this.promise,this._result))):T(this.promise,I())}function I(){return new Error("Array Methods must be provided an Array")}function w(e){return new L(this,e).promise}function D(e){var t=this;return new t(Y(e)?function(n,i){for(var r=e.length,a=0;a<r;a++)t.resolve(e[a]).then(n,i)}:function(e,t){return t(new TypeError("You must pass an array to race."))})}function x(e){var t=this,n=new t(f);return T(n,e),n}function G(){throw new TypeError("You must pass a resolver function as the first argument to the promise constructor")}function U(){throw new TypeError("Failed to construct 'Promise': Please use the 'new' operator, this object constructor cannot be called as a function.")}function j(e){this[te]=R(),this._result=this._state=void 0,this._subscribers=[],f!==e&&("function"!=typeof e&&G(),this instanceof j?M(this,e):U())}function V(){var e=void 0;if("undefined"!=typeof global)e=global;else if("undefined"!=typeof self)e=self;else try{e=Function("return this")()}catch(e){throw new Error("polyfill failed because global object is unavailable in this environment")}var t=e.Promise;if(t){var n=null;try{n=Object.prototype.toString.call(t.resolve())}catch(e){}if("[object Promise]"===n&&!t.cast)return}e.Promise=j}var B=void 0;B=Array.isArray?Array.isArray:function(e){return"[object Array]"===Object.prototype.toString.call(e)};var Y=B,F=0,z=void 0,K=void 0,q=function(e,t){J[F]=e,J[F+1]=t,F+=2,2===F&&(K?K(u):ee())},Q="undefined"!=typeof window?window:void 0,W=Q||{},Z=W.MutationObserver||W.WebKitMutationObserver,X="undefined"==typeof self&&"undefined"!=typeof process&&"[object process]"==={}.toString.call(process),$="undefined"!=typeof Uint8ClampedArray&&"undefined"!=typeof importScripts&&"undefined"!=typeof MessageChannel,J=new Array(1e3),ee=void 0;ee=X?r():Z?o():$?s():void 0===Q&&"function"==typeof require?c():l();var te=Math.random().toString(36).substring(16),ne=void 0,ie=1,re=2,ae=new P,oe=new P,se=0;return L.prototype._enumerate=function(){for(var e=this.length,t=this._input,n=0;this._state===ne&&n<e;n++)this._eachEntry(t[n],n)},L.prototype._eachEntry=function(e,t){var n=this._instanceConstructor,i=n.resolve;if(i===d){var r=A(e);if(r===h&&e._state!==ne)this._settledAt(e._state,t,e._result);else if("function"!=typeof r)this._remaining--,this._result[t]=e;else if(n===j){var a=new n(f);b(a,e,r),this._willSettleAt(a,t)}else this._willSettleAt(new n(function(t){return t(e)}),t)}else this._willSettleAt(i(e),t)},L.prototype._settledAt=function(e,t,n){var i=this.promise;i._state===ne&&(this._remaining--,e===re?T(i,n):this._result[t]=n),0===this._remaining&&_(i,this._result)},L.prototype._willSettleAt=function(e,t){var n=this;C(e,void 0,function(e){return n._settledAt(ie,t,e)},function(e){return n._settledAt(re,t,e)})},j.all=w,j.race=D,j.resolve=d,j.reject=x,j._setScheduler=n,j._setAsap=i,j._asap=q,j.prototype={constructor:j,then:h,catch:function(e){return this.then(null,e)}},j.polyfill=V,j.Promise=j,j}),"function"!=typeof Object.values&&(Object.values=function(e){return Object.keys(e).map(function(t){return e[t]})}),"function"!=typeof Object.entries&&(Object.entries=function(e){return Object.keys(e).map(function(t){return[t,e[t]]})}),"function"!=typeof Object.assign&&(Object.assign=function(e){if(null==e)throw new TypeError("Cannot convert undefined or null to object");e=Object(e);for(var t=1;t<arguments.length;t++){var n=arguments[t];if(null!=n)for(var i in n)Object.prototype.hasOwnProperty.call(n,i)&&(e[i]=n[i])}return e}),Array.prototype.find||Object.defineProperty(Array.prototype,"find",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=0;r<i;){var a=n[r];if(e.call(t,a,r,n))return a;r++}},configurable:!0,writable:!0}),Array.prototype.findIndex||Object.defineProperty(Array.prototype,"findIndex",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if("function"!=typeof e)throw new TypeError("predicate must be a function");for(var r=0;r<i;){if(e.call(t,n[r],r,n))return r;r++}return-1}}),Array.prototype.includes||Object.defineProperty(Array.prototype,"includes",{value:function(e,t){if(null==this)throw new TypeError('"this" is null or not defined');var n=Object(this),i=n.length>>>0;if(0===i)return!1;var r=0|t;for(r=Math.max(0<=r?r:i-Math.abs(r),0);r<i;){var a=n[r],o=e;if(a===o||"number"==typeof a&&"number"==typeof o&&isNaN(a)&&isNaN(o))return!0;r++}return!1}}),Array.from||(Array.from=function(){var e=Object.prototype.toString,t=function(t){return"function"==typeof t||"[object Function]"===e.call(t)},n=Math.pow(2,53)-1;return function(e){var i=Object(e);if(null==e)throw new TypeError("Array.from requires an array-like object - not null or undefined");var r,a=1<arguments.length?arguments[1]:void 0;if("undefined"!=typeof a){if(!t(a))throw new TypeError("Array.from: when provided, the second argument must be a function");2<arguments.length&&(r=arguments[2])}var o=Number(i.length);o=isNaN(o)?0:0!==o&&isFinite(o)?(0<o?1:-1)*Math.floor(Math.abs(o)):o,o=Math.min(Math.max(o,0),n);for(var s,l=t(this)?Object(new this(o)):Array(o),u=0;u<o;)s=i[u],l[u]=a?"undefined"==typeof r?a(s,u):a.call(r,s,u):s,u+=1;return l.length=o,l}}()),String.prototype.padStart||Object.defineProperty(String.prototype,"padStart",{value:function(e,t){return e>>=0,t=String("undefined"!=typeof t?t:" "),this.length>e?String(this):(e-=this.length,e>t.length&&(t+=t.repeat(e/t.length)),t.slice(0,e)+String(this))}}),String.prototype.includes||Object.defineProperty(String.prototype,"includes",{value:function(e,t){return"number"!=typeof t&&(t=0),!(t+e.length>this.length)&&-1!==this.indexOf(e,t)}}),function(e){function t(e,t){this.setNotifyMethod(e),this.setNotifyContext(t)}function n(e,t,n){this.name=e,this.body=t,this.type=n}function i(){}function r(){}function a(){this.subCommands=[],this.initializeMacroCommand()}function o(e,t){this.mediatorName=e||this.constructor.NAME,this.viewComponent=t}function s(e,t){this.proxyName=e||this.constructor.NAME,null!=t&&this.setData(t)}function l(e){if(null!=l.instanceMap[e])throw Error(l.MULTITON_MSG);this.initializeNotifier(e),l.instanceMap[e]=this,this.initializeFacade()}function u(e){if(null!=u.instanceMap[e])throw Error(u.MULTITON_MSG);this.multitonKey=e,u.instanceMap[this.multitonKey]=this,this.mediatorMap=[],this.observerMap=[],this.initializeView()}function c(e){if(c.instanceMap[e])throw Error(c.MULTITON_MSG);this.multitonKey=e,c.instanceMap[e]=this,this.proxyMap=[],this.initializeModel()}function h(e){if(null!=h.instanceMap[e])throw Error(h.MULTITON_MSG);this.multitonKey=e,h.instanceMap[this.multitonKey]=this,this.commandMap=[],this.initializeController()}function d(e,t,n){for(var i,r,e=e.split("."),n=n||f.global,a=0,o=e.length;a<o;a++)i=n,r=e[a],n=null==n[r]?n[r]={}:n[r];return null==t?n:i[r]=t}if(null==e&&(e=window),!e.puremvc){t.prototype.setNotifyMethod=function(e){this.notify=e},t.prototype.setNotifyContext=function(e){this.context=e},t.prototype.getNotifyMethod=function(){return this.notify},t.prototype.getNotifyContext=function(){return this.context},t.prototype.notifyObserver=function(e){this.getNotifyMethod().call(this.getNotifyContext(),e)},t.prototype.compareNotifyContext=function(e){return e===this.context},t.prototype.notify=null,t.prototype.context=null,n.prototype.getName=function(){return this.name},n.prototype.setBody=function(e){this.body=e},n.prototype.getBody=function(){return this.body},n.prototype.setType=function(e){this.type=e},n.prototype.getType=function(){return this.type},n.prototype.toString=function(){var e="Notification Name: "+this.getName(),e=e+("\nBody:"+(null==this.body?"null":this.body.toString()));return e+="\nType:"+(null==this.type?"null":this.type)},n.prototype.name=null,n.prototype.type=null,n.prototype.body=null,i.prototype.sendNotification=function(e,t,n){var i=this.getFacade();i&&i.sendNotification(e,t,n)},i.prototype.initializeNotifier=function(e){this.multitonKey=""+e,this.facade=this.getFacade()},i.prototype.getFacade=function(){if(null==this.multitonKey)throw Error(i.MULTITON_MSG);return l.getInstance(this.multitonKey)},i.prototype.multitonKey=null,i.MULTITON_MSG="multitonKey for this Notifier not yet initialized!",r.prototype=new i,r.prototype.constructor=r,r.prototype.execute=function(){},a.prototype=new i,a.prototype.constructor=a,a.prototype.subCommands=null,a.prototype.initializeMacroCommand=function(){},a.prototype.addSubCommand=function(e){this.subCommands.push(e)},a.prototype.execute=function(e){for(;0<this.subCommands.length;){var t=new(this.subCommands.shift());t.initializeNotifier(this.multitonKey),t.execute(e)}},o.NAME="Mediator",o.prototype=new i,o.prototype.constructor=o,o.prototype.getMediatorName=function(){return this.mediatorName},o.prototype.setViewComponent=function(e){this.viewComponent=e},o.prototype.getViewComponent=function(){return this.viewComponent},o.prototype.listNotificationInterests=function(){return[]},o.prototype.handleNotification=function(){},o.prototype.onRegister=function(){},o.prototype.onRemove=function(){},o.prototype.mediatorName=null,o.prototype.viewComponent=null,s.NAME="Proxy",s.prototype=new i,s.prototype.constructor=s,s.prototype.getProxyName=function(){return this.proxyName},s.prototype.setData=function(e){this.data=e},s.prototype.getData=function(){return this.data},s.prototype.onRegister=function(){},s.prototype.onRemove=function(){},s.prototype.proxyName=null,s.prototype.data=null,l.prototype.initializeFacade=function(){this.initializeModel(),this.initializeController(),this.initializeView()},l.getInstance=function(e){return null==e?null:(null==l.instanceMap[e]&&(l.instanceMap[e]=new l(e)),l.instanceMap[e])},l.prototype.initializeController=function(){null==this.controller&&(this.controller=h.getInstance(this.multitonKey))},l.prototype.initializeModel=function(){null==this.model&&(this.model=c.getInstance(this.multitonKey))},l.prototype.initializeView=function(){null==this.view&&(this.view=u.getInstance(this.multitonKey))},l.prototype.registerCommand=function(e,t){this.controller.registerCommand(e,t)},l.prototype.removeCommand=function(e){this.controller.removeCommand(e)},l.prototype.hasCommand=function(e){return this.controller.hasCommand(e)},l.prototype.registerProxy=function(e){this.model.registerProxy(e)},l.prototype.retrieveProxy=function(e){return this.model.retrieveProxy(e)},l.prototype.removeProxy=function(e){var t=null;return null!=this.model&&(t=this.model.removeProxy(e)),t},l.prototype.hasProxy=function(e){return this.model.hasProxy(e)},l.prototype.registerMediator=function(e){null!=this.view&&this.view.registerMediator(e)},l.prototype.retrieveMediator=function(e){return this.view.retrieveMediator(e)},l.prototype.removeMediator=function(e){var t=null;return null!=this.view&&(t=this.view.removeMediator(e)),t},l.prototype.hasMediator=function(e){return this.view.hasMediator(e)},l.prototype.sendNotification=function(e,t,i){this.notifyObservers(new n(e,t,i))},l.prototype.notifyObservers=function(e){null!=this.view&&this.view.notifyObservers(e)},l.prototype.initializeNotifier=function(e){this.multitonKey=e},l.hasCore=function(e){return null!=l.instanceMap[e]},l.removeCore=function(e){null!=l.instanceMap[e]&&(c.removeModel(e),u.removeView(e),h.removeController(e),delete l.instanceMap[e])},l.prototype.controller=null,l.prototype.model=null,l.prototype.view=null,l.prototype.multitonKey=null,l.instanceMap=[],l.MULTITON_MSG="Facade instance for this Multiton key already constructed!",u.prototype.initializeView=function(){},u.getInstance=function(e){return null==e?null:(null==u.instanceMap[e]&&(u.instanceMap[e]=new u(e)),u.instanceMap[e])},u.prototype.registerObserver=function(e,t){null!=this.observerMap[e]?this.observerMap[e].push(t):this.observerMap[e]=[t]},u.prototype.notifyObservers=function(e){if(null!=this.observerMap[e.getName()]){for(var t,n=this.observerMap[e.getName()],i=[],r=0;r<n.length;r++)t=n[r],i.push(t);for(r=0;r<i.length;r++)t=i[r],t.notifyObserver(e)}},u.prototype.removeObserver=function(e,t){for(var n=this.observerMap[e],i=0;i<n.length;i++)if(1==n[i].compareNotifyContext(t)){n.splice(i,1);break}0==n.length&&delete this.observerMap[e]},u.prototype.registerMediator=function(e){if(null==this.mediatorMap[e.getMediatorName()]){e.initializeNotifier(this.multitonKey),this.mediatorMap[e.getMediatorName()]=e;var n=e.listNotificationInterests();if(0<n.length)for(var i=new t(e.handleNotification,e),r=0;r<n.length;r++)this.registerObserver(n[r],i);e.onRegister()}},u.prototype.retrieveMediator=function(e){return this.mediatorMap[e]},u.prototype.removeMediator=function(e){var t=this.mediatorMap[e];if(t){for(var n=t.listNotificationInterests(),i=0;i<n.length;i++)this.removeObserver(n[i],t);delete this.mediatorMap[e],t.onRemove()}return t},u.prototype.hasMediator=function(e){return null!=this.mediatorMap[e]},u.removeView=function(e){delete u.instanceMap[e]},u.prototype.mediatorMap=null,u.prototype.observerMap=null,u.instanceMap=[],u.prototype.multitonKey=null,u.MULTITON_MSG="View instance for this Multiton key already constructed!",c.prototype.initializeModel=function(){},c.getInstance=function(e){return null==e?null:(null==c.instanceMap[e]&&(c.instanceMap[e]=new c(e)),c.instanceMap[e])},c.prototype.registerProxy=function(e){e.initializeNotifier(this.multitonKey),this.proxyMap[e.getProxyName()]=e,e.onRegister()},c.prototype.retrieveProxy=function(e){return this.proxyMap[e]},c.prototype.hasProxy=function(e){return null!=this.proxyMap[e]},c.prototype.removeProxy=function(e){var t=this.proxyMap[e];return t&&(this.proxyMap[e]=null,t.onRemove()),t},c.removeModel=function(e){delete c.instanceMap[e]},c.prototype.proxyMap=null,c.instanceMap=[],c.MULTITON_MSG="Model instance for this Multiton key already constructed!",h.prototype.initializeController=function(){this.view=u.getInstance(this.multitonKey)},h.getInstance=function(e){return null==e?null:(null==this.instanceMap[e]&&(this.instanceMap[e]=new this(e)),this.instanceMap[e])},h.prototype.executeCommand=function(e){var t=this.commandMap[e.getName()];null!=t&&(t=new t,t.initializeNotifier(this.multitonKey),t.execute(e))},h.prototype.registerCommand=function(e,n){null==this.commandMap[e]&&this.view.registerObserver(e,new t(this.executeCommand,this)),this.commandMap[e]=n},h.prototype.hasCommand=function(e){return null!=this.commandMap[e]},h.prototype.removeCommand=function(e){this.hasCommand(e)&&(this.view.removeObserver(e,this),this.commandMap[e]=null)},h.removeController=function(e){delete this.instanceMap[e]},h.prototype.view=null,h.prototype.commandMap=null,h.prototype.multitonKey=null,h.instanceMap=[],h.MULTITON_MSG="controller key for this Multiton key already constructed";var f={global:function(){return this}(),extend:function(e,t){if("function"!=typeof e)throw new TypeError("#extend- child should be Function");if("function"!=typeof t)throw new TypeError("#extend- parent should be Function");if(t!==e){var n=new Function;return n.prototype=t.prototype,e.prototype=new n,e.prototype.constructor=e}},decorate:function(e,t){for(var n in t)e[n]=t[n];return e}};e.puremvc={View:u,Model:c,Controller:h,SimpleCommand:r,MacroCommand:a,Facade:l,Mediator:o,Observer:t,Notification:n,Notifier:i,Proxy:s,define:function(e,t,n){e||(e={});var i=e.name,r=e.parent,a="function"==typeof r,o=e.scope||null;if("parent"in e&&!a)throw new TypeError("Class parent must be Function");if(e.hasOwnProperty("constructor")){if(e=e.constructor,"function"!=typeof e)throw new TypeError("Class constructor must be Function")}else e=a?function(){r.apply(this,arguments)}:new Function;if(a&&f.extend(e,r),t&&(a=e.prototype,f.decorate(a,t),a.constructor=e),n&&f.decorate(e,n),i){if("string"!=typeof i)throw new TypeError("Class name must be primitive string");d(i,e,o)}return e},declare:d}}}(this),!function(e,t,n){"undefined"!=typeof module&&module.exports?module.exports=n():"function"==typeof define&&define.amd?define(t,n):e[t]=n()}(this,"bowser",function(){function e(e){function t(t){var n=e.match(t);return n&&n.length>1&&n[1]||""}function n(t){var n=e.match(t);return n&&n.length>1&&n[2]||""}function i(e){switch(e){case"NT":return"NT";case"XP":return"XP";case"NT 5.0":return"2000";case"NT 5.1":return"XP";case"NT 5.2":return"2003";case"NT 6.0":return"Vista";case"NT 6.1":return"7";case"NT 6.2":return"8";case"NT 6.3":return"8.1";case"NT 10.0":return"10";default:return}}var r,a=t(/(ipod|iphone|ipad)/i).toLowerCase(),s=/like android/i.test(e),l=!s&&/android/i.test(e),u=/nexus\s*[0-6]\s*/i.test(e),c=!u&&/nexus\s*[0-9]+/i.test(e),h=/CrOS/.test(e),d=/silk/i.test(e),f=/sailfish/i.test(e),p=/tizen/i.test(e),y=/(web|hpw)os/i.test(e),A=/windows phone/i.test(e),v=(/SamsungBrowser/i.test(e),!A&&/windows/i.test(e)),g=!a&&!d&&/macintosh/i.test(e),m=!l&&!f&&!p&&!y&&/linux/i.test(e),b=n(/edg([ea]|ios)\/(\d+(\.\d+)?)/i),k=t(/version\/(\d+(\.\d+)?)/i),E=/tablet/i.test(e)&&!/tablet pc/i.test(e),_=!E&&/[^-]mobi/i.test(e),T=/xbox/i.test(e);/opera/i.test(e)?r={name:"Opera",opera:o,version:k||t(/(?:opera|opr|opios)[\s\/](\d+(\.\d+)?)/i)}:/opr\/|opios/i.test(e)?r={name:"Opera",opera:o,version:t(/(?:opr|opios)[\s\/](\d+(\.\d+)?)/i)||k}:/SamsungBrowser/i.test(e)?r={name:"Samsung Internet for Android",samsungBrowser:o,version:k||t(/(?:SamsungBrowser)[\s\/](\d+(\.\d+)?)/i)}:/coast/i.test(e)?r={name:"Opera Coast",coast:o,version:k||t(/(?:coast)[\s\/](\d+(\.\d+)?)/i)}:/yabrowser/i.test(e)?r={name:"Yandex Browser",yandexbrowser:o,version:k||t(/(?:yabrowser)[\s\/](\d+(\.\d+)?)/i)}:/ucbrowser/i.test(e)?r={name:"UC Browser",ucbrowser:o,version:t(/(?:ucbrowser)[\s\/](\d+(?:\.\d+)+)/i)}:/mxios/i.test(e)?r={name:"Maxthon",maxthon:o,version:t(/(?:mxios)[\s\/](\d+(?:\.\d+)+)/i)}:/epiphany/i.test(e)?r={name:"Epiphany",epiphany:o,version:t(/(?:epiphany)[\s\/](\d+(?:\.\d+)+)/i)}:/puffin/i.test(e)?r={name:"Puffin",puffin:o,version:t(/(?:puffin)[\s\/](\d+(?:\.\d+)?)/i)}:/sleipnir/i.test(e)?r={name:"Sleipnir",sleipnir:o,version:t(/(?:sleipnir)[\s\/](\d+(?:\.\d+)+)/i)}:/k-meleon/i.test(e)?r={name:"K-Meleon",kMeleon:o,version:t(/(?:k-meleon)[\s\/](\d+(?:\.\d+)+)/i)}:A?(r={name:"Windows Phone",osname:"Windows Phone",windowsphone:o},b?(r.msedge=o,r.version=b):(r.msie=o,r.version=t(/iemobile\/(\d+(\.\d+)?)/i))):/msie|trident/i.test(e)?r={name:"Internet Explorer",msie:o,version:t(/(?:msie |rv:)(\d+(\.\d+)?)/i)}:h?r={name:"Chrome",osname:"Chrome OS",chromeos:o,chromeBook:o,chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:/edg([ea]|ios)/i.test(e)?r={name:"Microsoft Edge",msedge:o,version:b}:/vivaldi/i.test(e)?r={name:"Vivaldi",vivaldi:o,version:t(/vivaldi\/(\d+(\.\d+)?)/i)||k}:f?r={name:"Sailfish",osname:"Sailfish OS",sailfish:o,version:t(/sailfish\s?browser\/(\d+(\.\d+)?)/i)}:/seamonkey\//i.test(e)?r={name:"SeaMonkey",seamonkey:o,version:t(/seamonkey\/(\d+(\.\d+)?)/i)}:/firefox|iceweasel|fxios/i.test(e)?(r={name:"Firefox",firefox:o,version:t(/(?:firefox|iceweasel|fxios)[ \/](\d+(\.\d+)?)/i)},/\((mobile|tablet);[^\)]*rv:[\d\.]+\)/i.test(e)&&(r.firefoxos=o,r.osname="Firefox OS")):d?r={name:"Amazon Silk",silk:o,version:t(/silk\/(\d+(\.\d+)?)/i)}:/phantom/i.test(e)?r={name:"PhantomJS",phantom:o,version:t(/phantomjs\/(\d+(\.\d+)?)/i)}:/slimerjs/i.test(e)?r={name:"SlimerJS",slimer:o,version:t(/slimerjs\/(\d+(\.\d+)?)/i)}:/blackberry|\bbb\d+/i.test(e)||/rim\stablet/i.test(e)?r={name:"BlackBerry",osname:"BlackBerry OS",blackberry:o,version:k||t(/blackberry[\d]+\/(\d+(\.\d+)?)/i)}:y?(r={name:"WebOS",osname:"WebOS",webos:o,version:k||t(/w(?:eb)?osbrowser\/(\d+(\.\d+)?)/i)},/touchpad\//i.test(e)&&(r.touchpad=o)):/bada/i.test(e)?r={name:"Bada",osname:"Bada",bada:o,version:t(/dolfin\/(\d+(\.\d+)?)/i)}:p?r={name:"Tizen",osname:"Tizen",tizen:o,version:t(/(?:tizen\s?)?browser\/(\d+(\.\d+)?)/i)||k}:/qupzilla/i.test(e)?r={name:"QupZilla",qupzilla:o,version:t(/(?:qupzilla)[\s\/](\d+(?:\.\d+)+)/i)||k}:/chromium/i.test(e)?r={name:"Chromium",chromium:o,version:t(/(?:chromium)[\s\/](\d+(?:\.\d+)?)/i)||k}:/chrome|crios|crmo/i.test(e)?r={name:"Chrome",chrome:o,version:t(/(?:chrome|crios|crmo)\/(\d+(\.\d+)?)/i)}:l?r={name:"Android",version:k}:/safari|applewebkit/i.test(e)?(r={name:"Safari",safari:o},k&&(r.version=k)):a?(r={name:"iphone"==a?"iPhone":"ipad"==a?"iPad":"iPod"},k&&(r.version=k)):r=/googlebot/i.test(e)?{name:"Googlebot",googlebot:o,version:t(/googlebot\/(\d+(\.\d+))/i)||k}:{name:t(/^(.*)\/(.*) /),version:n(/^(.*)\/(.*) /)},!r.msedge&&/(apple)?webkit/i.test(e)?(/(apple)?webkit\/537\.36/i.test(e)?(r.name=r.name||"Blink",r.blink=o):(r.name=r.name||"Webkit",r.webkit=o),!r.version&&k&&(r.version=k)):!r.opera&&/gecko\//i.test(e)&&(r.name=r.name||"Gecko",r.gecko=o,r.version=r.version||t(/gecko\/(\d+(\.\d+)?)/i)),r.windowsphone||!l&&!r.silk?!r.windowsphone&&a?(r[a]=o,r.ios=o,r.osname="iOS"):g?(r.mac=o,r.osname="macOS"):T?(r.xbox=o,r.osname="Xbox"):v?(r.windows=o,r.osname="Windows"):m&&(r.linux=o,r.osname="Linux"):(r.android=o,r.osname="Android");var C="";r.windows?C=i(t(/Windows ((NT|XP)( \d\d?.\d)?)/i)):r.windowsphone?C=t(/windows phone (?:os)?\s?(\d+(\.\d+)*)/i):r.mac?(C=t(/Mac OS X (\d+([_\.\s]\d+)*)/i),C=C.replace(/[_\s]/g,".")):a?(C=t(/os (\d+([_\s]\d+)*) like mac os x/i),C=C.replace(/[_\s]/g,".")):l?C=t(/android[ \/-](\d+(\.\d+)*)/i):r.webos?C=t(/(?:web|hpw)os\/(\d+(\.\d+)*)/i):r.blackberry?C=t(/rim\stablet\sos\s(\d+(\.\d+)*)/i):r.bada?C=t(/bada\/(\d+(\.\d+)*)/i):r.tizen&&(C=t(/tizen[\/\s](\d+(\.\d+)*)/i)),
C&&(r.osversion=C);var N=!r.windows&&C.split(".")[0];return E||c||"ipad"==a||l&&(3==N||N>=4&&!_)||r.silk?r.tablet=o:(_||"iphone"==a||"ipod"==a||l||u||r.blackberry||r.webos||r.bada)&&(r.mobile=o),r.msedge||r.msie&&r.version>=10||r.yandexbrowser&&r.version>=15||r.vivaldi&&r.version>=1||r.chrome&&r.version>=20||r.samsungBrowser&&r.version>=4||r.firefox&&r.version>=20||r.safari&&r.version>=6||r.opera&&r.version>=10||r.ios&&r.osversion&&r.osversion.split(".")[0]>=6||r.blackberry&&r.version>=10.1||r.chromium&&r.version>=20?r.a=o:r.msie&&r.version<10||r.chrome&&r.version<20||r.firefox&&r.version<20||r.safari&&r.version<6||r.opera&&r.version<10||r.ios&&r.osversion&&r.osversion.split(".")[0]<6||r.chromium&&r.version<20?r.c=o:r.x=o,r}function t(e){return e.split(".").length}function n(e,t){var n,i=[];if(Array.prototype.map)return Array.prototype.map.call(e,t);for(n=0;n<e.length;n++)i.push(t(e[n]));return i}function i(e){for(var i=Math.max(t(e[0]),t(e[1])),r=n(e,function(e){var r=i-t(e);return e+=new Array(r+1).join(".0"),n(e.split("."),function(e){return new Array(20-e.length).join("0")+e}).reverse()});--i>=0;){if(r[0][i]>r[1][i])return 1;if(r[0][i]!==r[1][i])return-1;if(0===i)return 0}}function r(t,n,r){var a=s;"string"==typeof n&&(r=n,n=void 0),void 0===n&&(n=!1),r&&(a=e(r));var o=""+a.version;for(var l in t)if(t.hasOwnProperty(l)&&a[l]){if("string"!=typeof t[l])throw new Error("Browser version in the minVersion map should be a string: "+l+": "+String(t));return i([o,t[l]])<0}return n}function a(e,t,n){return!r(e,t,n)}var o=!0,s=e("undefined"!=typeof navigator?navigator.userAgent||"":"");return s.test=function(e){for(var t=0;t<e.length;++t){var n=e[t];if("string"==typeof n&&n in s)return!0}return!1},s.isUnsupportedBrowser=r,s.compareVersions=i,s.check=a,s._detect=e,s.detect=e,s});var akamai=function(){"use strict";function e(){tn.observe(document.body,{childList:!0,subtree:!0})}function t(e){if(e&&0!=e.length){var t=Promise.resolve();T.each(e,function(e){e.classList&&e.classList.contains("amp-inline")&&Object.keys(e.dataset)&&"true"!=e.dataset.embedded&&(t=t.then(dt.embed.bind(null,e)))})}}function n(){t(document.querySelectorAll(".amp-inline"))}var i=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:-1,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{};babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(r.code=n,r.metadata=i,e instanceof t){var a;return a=e,babelHelpers.possibleConstructorReturn(r,a)}return"object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))?(r.metadata=e.metadata||e,r.message=e.message||("function"==typeof e.toString?e.toString():void 0),e.code&&(r.code=e.code)):r.message=e,r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"create",value:function(e,n,i){return new t(e,n,i)}}]),t}(Error),r=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,e),this.type=t,this.detail=this.data=n,this.target=null}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n){return new e(t,n)}}]),e}(),a=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this;babelHelpers.classCallCheck(this,e),this._target=t,this._listenerMap={},this._regex=[],this.emit=this.dispatch.bind(this),this.on=this.addListener=this.addEventListener.bind(this),this.off=this.removeListener=this.removeEventListener.bind(this)}return babelHelpers.createClass(e,[{key:"addEventListener",value:function(e,t){if(null!=t&&null!=e)if(e instanceof RegExp)t.__regex=e,this._regex.push(t);else{if(null==this._listenerMap[e]&&(this._listenerMap[e]=[]),this._listenerMap[e].indexOf(t)!==-1)return;this._listenerMap[e].push(t)}}},{key:"once",value:function(e,t){t.__once=!0,this.addEventListener(e,t)}},{key:"dispatchEvent",value:function(e){if(null!=this._target||null!=this._listenerMap){null==e.target&&(e.target=this._target);var t=e.type,n=this._target,i=n["on"+t];null!=i&&i.apply(n,[e]);var r=this._listenerMap[t];if(r&&r.length>0)for(var a=r.slice(),o=0,s=a.length;o<s;++o)i=a[o],i.call(n,e),i.__once===!0&&r.splice(o,1);if(r=this._regex,r.length>0)for(var l=r.slice(),u=0,c=l.length;u<c;++u)i=l[u],0!=i.__regex.test(t)&&(i.call(n,e),i.__once===!0&&r.splice(u,1))}}},{key:"dispatch",value:function(e,t){this.dispatchEvent(r.create(e,t))}},{key:"removeEventListener",value:function(e,t){if(null!=t&&null!=e){var n=e instanceof RegExp,i=n?this._regex:this._listenerMap[e];if(null!=i){var r=i.indexOf(t);if(r!==-1&&(!n||e.toString()===i[r].__regex.toString()))return i.splice(r,1)}}}},{key:"destroy",value:function(){this._listenerMap=null,this._target=null}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),o=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:setTimeout,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:clearTimeout;babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return a.delay=e,a.repeatCount=n,a.timerGroup=timerGroup,a._running=!1,a._currentCount=0,a._timeout=null,a._startTime=null,a._currentTime=0,a.setTimeout=i,a.clearTimeout=r,a.next=function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:a.delay;return a.setTimeout(function(){return a.tick()},e)},a.clear=function(){return a.clearTimeout(a._timeout)},a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"reset",value:function(){this.stop(),this._currentCount=0,this._currentTime=0,this._startTime=null}},{key:"start",value:function(){if(this._running!==!0){var e=this.delay-(this._currentTime-this.delay*this._currentCount);this._running=!0,this._timeout=this.next(e)}}},{key:"stop",value:function(){this._running!==!1&&(this.clear(),this._currentTime+=Date.now()-this._startTime,this._timeout=null,this._running=!1)}},{key:"tick",value:function(){this.clear();var e=0!==this.repeatCount&&this._currentCount>=this.repeatCount;this._currentCount++,this._currentTime+=this.delay,this._startTime=Date.now(),e===!1&&(this._timeout=this.next(this.delay)),this.dispatch(t.TIMER,this),e===!0&&(this.stop(),this.dispatch(t.COMPLETE,this))}},{key:"destroy",value:function(){this.clear(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.next=null}},{key:"currentCount",get:function(){return this._currentCount}},{key:"running",get:function(){return this._running}},{key:"time",get:function(){return this._currentTime+(Date.now()-this._startTime)}}],[{key:"create",value:function(e,n,i,r){return new t(e,n,i,r)}},{key:"TIMER",get:function(){return"timer"}},{key:"COMPLETE",get:function(){return"complete"}}]),t}(a),s=function(){function e(t){babelHelpers.classCallCheck(this,e),this.id=t,this.intervals=[],this.timeouts=[],this.timers=[],this.groups=[]}return babelHelpers.createClass(e,[{key:"setTimeout",value:function(e){function t(t,n){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e,t){for(var n=arguments.length,i=Array(n>2?n-2:0),r=2;r<n;r++)i[r-2]=arguments[r];var a=this,o=setTimeout(function(){e.apply(null,i),a.clearTimeout(o)},t);return this.timeouts.push(o),o})},{key:"clearTimeout",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this.timeouts.indexOf(e);return t!==-1&&this.timeouts.splice(t,1),clearTimeout(e)})},{key:"setInterval",value:function(e){function t(){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];var i=setInterval.apply(null,t);return this.intervals.push(i),i})},{key:"clearInterval",value:function(e){function t(t){return e.apply(this,arguments)}return t.toString=function(){return e.toString()},t}(function(e){var t=this.intervals.indexOf(e);return t!==-1&&this.intervals.splice(t,1),clearInterval(e)})},{key:"setImmediate",value:function(e){for(var t=this,n=arguments.length,i=Array(n>1?n-1:0),r=1;r<n;r++)i[r-1]=arguments[r];var a=setTimeout(function(){e.apply(null,i),t.clearImmediate(a)},0);return this.timeouts.push(a),a}},{key:"clearImmediate",value:function(e){var t=this.timeouts.indexOf(e);return t!==-1&&this.timeouts.splice(t,1),clearTimeout(e)}},{key:"setTimer",value:function(e,t){var n=o.create(e,t,this.setTimeout.bind(this),this.clearTimeout.bind(this));return this.timers.push(n),n}},{key:"clearTimer",value:function(e){var t=this.timers.indexOf(e);t!==-1&&(e=this.timers.splice(t,1),e.destroy())}},{key:"setGroup",value:function(t){var n=e.create(t);return this.groups.push(n),n}},{key:"clearGroup",value:function(e){var t=this.groups.indexOf(timer);if(t!==-1){var n=this.groups.splice(t,1);n.destroy()}}},{key:"destroy",value:function(){this.intervals.forEach(function(e){return clearInterval(e)}),this.timeouts.forEach(function(e){return clearTimeout(e)}),this.timers.forEach(function(e){return e.destroy()}),this.groups.forEach(function(e){return e.destroy()}),this.id=null,this.intervals=null,this.timeouts=null,this.timers=null,this.groups=null}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),l=function(e,t){return function(){return e(t.apply(void 0,arguments))}},u=function(){for(var e=arguments.length,t=Array(e),n=0;n<e;n++)t[n]=arguments[n];return t.reduce(l)},c="__DONE__",h=function(e,t){if(null!=e&&"function"==typeof t)if(void 0!=e.length){for(var n=0,i=e.length;n<i;n++)if(t(e[n],n,e)===c)return}else for(var r in e)if(t(e[r],r,e)===c)return},d=function(){return function(e,t){return e.push(t),e}},f=function(){return function(e,t){return t}},p=function(e){return function(t){return function(n,i,r){return t(n,e(i,r),r)}}},y=function(e){return function(t){return function(n,i,r){return e(i,r)?t(n,i,r):n}}},A=function(e){return function(t){return function(n,i,r){return e(i,r),t(n,i,r)}}},v=function(e){return function(t){return function(n,i,r){return e(i,r)?t(n,i,r):(r(),n)}}},g=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e;return function(n){return function(i,r,a){return--t>0?n(i,r,a):(t=e,a(),n(i,r,a))}}},m=function(e,t,n,i){var r=e(t),a=function(){return o=!0},o=!1;return h(i,function(e){return o?c:void(n=r(n,e,a))}),n},b=function(e,t,n){return m(t,d(),e,n)},k=function(e,t){return b([],e,t)},E=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];return k(u.apply(void 0,n),e)},_=function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];var r=null,a=u.apply(void 0,n)(f());return h(e,function(e){if(r=a(null,e))return c}),r},T={pipe:u,map:p,filter:y,tap:A,take:g,until:v,each:h,DONE:c,transform:E,find:_},C=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"construct",value:function(){var t=this,n=this.decode(window.location.search);e.typed={},e.amp={};var i=/^amp(_|-)/;return T.each(n,function(n,r){e[r]=n;var a=t.parse(n);e.typed[r]=a,i.test(r)&&(e.amp[L.toCamelCase(r.replace(i,""))]=a)}),!0}},{key:"encode",value:function(e,t){var n=this,i=[];return T.each(e,function(e,r){if(null!=e){var a=t?t+"["+r+"]":r;i.push("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))?n.encode(e,a):a+"="+encodeURIComponent(e))}}),i.join("&")}},{key:"decode",value:function(e){var t=this,n=void 0;return null!=e&&(n={},e=e.replace(/^[^?]*\?/,""),e.replace(new RegExp("([^?=&]+)(=([^&]*))?","g"),function(e,i,r,a){var o=decodeURIComponent(i),s=decodeURIComponent(a);if(/~/.test(s)&&(s=t.decodeObject(s)),/\[/.test(o)){var l=o.match(/[^\[]+/)[0];return o=o.match(/\[([A-Za-z]+)\]/)[1],null==n[l]&&(n[l]={}),void(n[l][o]=s)}n[o]=s})),n}},{key:"decodeObject",value:function(e){var t=this,n=void 0;return null!=e&&(n={},e.replace(/([^:~]+)(:([^~]*))?/g,function(e,i,r,a){n[decodeURIComponent(i)]=t.parse(decodeURIComponent(a))})),n}},{key:"parse",value:function(e){if("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e)))return e;if("undefined"===e)return!0;var t=e.toLowerCase();if("true"===t||"false"===t)return"true"===t;if("null"===t)return null;if(t=parseFloat(e),!isNaN(t))return t;try{return t=JSON.parse(e)}catch(t){return e}}}]),e}(),N=function(){function e(t){if(babelHelpers.classCallCheck(this,e),this._url="string"==typeof t?t:t.url,this._method=t.method||"GET",this._withCredentials=t.withCredentials||!1,this._headers=t.headers||{},this._data=t.data||t.body||{},this._responseType=t.responseType,this._query=t.query,null!=t.query){var n=/\?/.test(this._url)?"&":"?";this._url+=n+C.encode(t.query)}}return babelHelpers.createClass(e,[{key:"url",get:function(){return this._url}},{key:"method",get:function(){return this._method}},{key:"withCredentials",get:function(){return this._withCredentials}},{key:"headers",get:function(){return this._headers}},{key:"query",get:function(){return this._query}},{key:"responseType",get:function(){return this._responseType}},{key:"data",get:function(){return this._data}},{key:"body",get:function(){return this._data}}],[{key:"create",value:function(t){return new e(t)}}]),e}(),P=navigator,S=P.userAgent,O=P.appName,M=P.platform,R=P.appVersion,H=/((0|[1-9]\d*)\.(0|[1-9]\d*)\.(0|[1-9]\d*)(?:-((?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*)(?:\.(?:0|[1-9]\d*|\d*[a-zA-Z-][0-9a-zA-Z-]*))*))?)(?:\+([0-9a-zA-Z-]+(?:\.[0-9a-zA-Z-]+)*))?/,L=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"semver",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",t=e.match(H)||[];return{major:parseInt(t[2]),minor:parseInt(t[3]),patch:parseInt(t[4]),pre:t[5],build:t[6],version:t[1],raw:t[0],toString:function(){return this.raw}}}},{key:"blankVideo",value:function(){return"data:video/mp4;base64,AAAAHGZ0eXBpc29tAAACAGlzb21pc28ybXA0MQAAAAhmcmVlAAAC721kYXQhEAUgpBv/wAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAA3pwAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcCEQBSCkG//AAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADengAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAcAAAAsJtb292AAAAbG12aGQAAAAAAAAAAAAAAAAAAAPoAAAALwABAAABAAAAAAAAAAAAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAAADAAAB7HRyYWsAAABcdGtoZAAAAAMAAAAAAAAAAAAAAAIAAAAAAAAALwAAAAAAAAAAAAAAAQEAAAAAAQAAAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAEAAAAAAAAAAAAAAAAAAACRlZHRzAAAAHGVsc3QAAAAAAAAAAQAAAC8AAAAAAAEAAAAAAWRtZGlhAAAAIG1kaGQAAAAAAAAAAAAAAAAAAKxEAAAIAFXEAAAAAAAtaGRscgAAAAAAAAAAc291bgAAAAAAAAAAAAAAAFNvdW5kSGFuZGxlcgAAAAEPbWluZgAAABBzbWhkAAAAAAAAAAAAAAAkZGluZgAAABxkcmVmAAAAAAAAAAEAAAAMdXJsIAAAAAEAAADTc3RibAAAAGdzdHNkAAAAAAAAAAEAAABXbXA0YQAAAAAAAAABAAAAAAAAAAAAAgAQAAAAAKxEAAAAAAAzZXNkcwAAAAADgICAIgACAASAgIAUQBUAAAAAAfQAAAHz+QWAgIACEhAGgICAAQIAAAAYc3R0cwAAAAAAAAABAAAAAgAABAAAAAAcc3RzYwAAAAAAAAABAAAAAQAAAAIAAAABAAAAHHN0c3oAAAAAAAAAAAAAAAIAAAFzAAABdAAAABRzdGNvAAAAAAAAAAEAAAAsAAAAYnVkdGEAAABabWV0YQAAAAAAAAAhaGRscgAAAAAAAAAAbWRpcmFwcGwAAAAAAAAAAAAAAAAtaWxzdAAAACWpdG9vAAAAHWRhdGEAAAABAAAAAExhdmY1Ni40MC4xMDE="}},{key:"getIEVersion",value:function(){var e=void 0,t=-1;return"Microsoft Internet Explorer"===O?e=/MSIE ([0-9]{1,}[\.0-9]{0,})/:"Netscape"===O?e=/Trident\/.*rv:([0-9]{1,}[\.0-9]{0,})/:/Edge\/[0-9\.]+$/.test(S)&&(e=/Edge\/([0-9\.]+)/),null!=(null!=e?e.exec(S):void 0)&&(t=parseFloat(RegExp.$1)),t}},{key:"getEdgeVersion",value:function(){var e=-1;return/Edge\/([\d]+)/.exec(S)&&(e=parseFloat(RegExp.$1)),e}},{key:"getFFVersion",value:function(){var e=-1;return/Firefox\/([0-9\.]+)$/.exec(S)&&(e=parseFloat(RegExp.$1)),e}},{key:"getSafariVersion",value:function(){var e=-1;return/Safari\/[0-9\.]+$/.test(S)&&null!=/Version\/([0-9]+\.[0-9]+)/.exec(S)&&(e=parseFloat(RegExp.$1)),e}},{key:"isChrome",value:function(){return/Chrom(e|ium)/.test(S)}},{key:"getChromeVersion",value:function(){var e=-1;return/Chrome( Mobile)?\/([0-9\.]+)/.test(S)&&(e=parseFloat(S.match(/Chrome( Mobile)?\/([0-9\.]+)/)[2].split(".").slice(0,2).join("."))),e}},{key:"selectSource",value:function(t,n){return T.find(t.source,T.map(function(n){return Object.assign({type:e.getMimeType(t.src||n.src)},t,n)}),T.filter(function(e){return n(e)}))}},{key:"getSourceByType",value:function(t,n){var i=null!=t.source?t.source.slice():[];return null==t.type&&(t.type=e.getMimeType(t.src)),i.push(t),i.find(function(e){return e.type===n})}},{key:"getMimeType",value:function(t){return e.mimeTypes[e.getFileExtension(t)]}},{key:"selectTrack",value:function(e,t){return e.find(function(e){return e.kind===t})}},{key:"isIPhone",value:function(){return/iPhone/.test(M)||/iPhone/.test(S)}},{key:"isIPad",value:function(){return/iPad/.test(M)||/iPad/.test(S)}},{key:"isAndroid",value:function(){return/Android [4-9]/.test(S)}},{key:"isKindleFireHD",value:function(){return/Silk\/2/.test(S)}},{key:"isKindleFire",value:function(){return/Silk\/1/.test(S)}},{key:"isBlackBerry",value:function(){return/BlackBerry;|PlayBook|BB10/.test(S)}},{key:"isFirefoxOS",value:function(){return/\(Mobile;.*Firefox\//.test(S)}},{key:"isHTML5",value:function(){return e.isIOS()||e.isAndroid()||e.isKindleFireHD()||e.isBlackBerry()||e.isFirefoxOS()}},{key:"isIOS",value:function(){var e=/iP(hone|od|ad)/i;return e.test(M)||e.test(S)}},{key:"getIOSversion",value:function(){if(e.isIOS()){var t=R.match(/OS (\d+)_(\d+)_?(\d+)?/);if(null==t&&(t=R.match(/Version\/(\d+)\.(\d+)/)),null!=t)return[parseInt(t[1],10),parseInt(t[2],10),parseInt(t[3]||0,10)]}}},{key:"isFullscreenDevice",value:function(){return e.isKindleFireHD()||e.isIPhone()}},{key:"getDevice",value:function(){var t="desktop";return e.isIPhone()?t="iphone":e.isIPad()?t="ipad":/Android/.test(S)?t="android":e.isKindleFireHD()?t="kindlefirehd":e.isKindleFire()&&(t="kindlefire"),t}},{key:"xmlToJson",value:function(t){var n={};return 9===t.nodeType&&(t=t.firstChild),1===t.nodeType?t.attributes.length>0&&(n["@attributes"]={},T.each(t.attributes,function(e){n["@attributes"][e.nodeName]=e.nodeValue})):3!==t.nodeType&&4!==t.nodeType||(n=t.nodeValue),t.hasChildNodes()&&T.each(t.childNodes,function(t){if(3!==t.nodeType||/\S/.test(t.nodeValue)){var i=t.nodeName.replace(/:/,"-"),r=e.xmlToJson(t);null==r["@attributes"]&&null!=r["#text"]&&(r=r["#text"]),null==n[i]?n[i]=r:(n[i]instanceof Array||(n[i]=[n[i]]),n[i].push(r))}}),n}},{key:"getXHR",value:function(){return new XMLHttpRequest}},{key:"getUTC",value:function(){return e.request("//time.akamai.com").then(function(e){return 1e3*parseFloat(e.responseText)})}},{key:"request",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return new Promise(function(n,i){t=N.create(t);var r=e.getXHR();if(r.open(t.method,t.url),r.onload=function(){t.checkStatus!==!1&&r.status>399&&i(r),n(r)},r.onerror=function(e){return i(r)},r.withCredentials=t.withCredentials,null!=t.responseType)try{r.responseType=t.responseType}catch(e){}if(null!=t.headers){var a=t.headers;T.each(a,function(e,t){null!=t&&null!=e&&r.setRequestHeader(t,e)})}return r.send(t.data)})}},{key:"requestText",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.request(t).then(function(e){return e.responseText})}},{key:"requestJson",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return e.requestText(t).then(function(e){return JSON.parse(e)})}},{key:"jsonp",value:function(t,n){return new Promise(function(i,r){return window[n]=i,e.loadScript(t).then(function(e){e.parentNode.removeChild(e),window[n]=null;try{delete window[n]}catch(e){}}).catch(r)})}},{key:"loadScript",value:function(e,t){return new Promise(function(n,i){var r=t||document.getElementsByTagName("head")[0],a=document.createElement("script");a.type="text/javascript",a.addEventListener?(a.onload=function(){n(a)},a.onerror=function(e){i(e)}):a.readyState&&(a.onreadystatechange=function(e){"loaded"!==this.readyState&&"complete"!==this.readyState||(this.onreadystatechange=null,n(a))}),a.src=e,r.appendChild(a)})}},{key:"loadStyleSheet",value:function(e){var t=document.getElementsByTagName("head")[0],n=document.createElement("link");return n.rel="stylesheet",n.type="text/css",n.href=e,t.appendChild(n)}},{key:"loadImage",value:function(e){return new Promise(function(t,n){try{var i=document.createElement("img");return i.onload=function(e){return t(i)},i.onerror=function(e){return n(e)},i.src=e}catch(e){return n(e)}})}},{key:"getFileExtension",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";return e.replace(/\?.*/,"").replace(/\#.*/,"").split(".").pop()}},{key:"isTouchDevice",value:function(){if(null==e.isTouch)try{document.createEvent("TouchEvent"),e.isTouch=!0}catch(t){e.isTouch=!1}return e.isTouch}},{key:"clamp",value:function(e,t,n){return e<t&&(e=t),e>n&&(e=n),e}},{key:"override",value:function(t,n){var i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];return null==t?n:null==n?t:(i===!0&&(t=e.clone(t),n=e.clone(n)),Object.getOwnPropertyNames(n).forEach(function(i){var r=n[i],a=t[i],o="undefined"==typeof r?"undefined":babelHelpers.typeof(r);"undefined"!==o&&(null==a||"object"!==("undefined"==typeof a?"undefined":babelHelpers.typeof(a))||r instanceof Array?t[i]=r:"object"===o&&(t[i]=e.override(a,r,!1)))}),t)}},{key:"merge",value:function(){for(var t=arguments.length,n=Array(t),i=0;i<t;i++)n[i]=arguments[i];var r=n[0]instanceof Array?n[0]:n;return r.reduce(function(t,n){return null!=n?e.override(t,n,!1):t},{})}},{key:"mixin",value:function(e){for(var t=arguments.length,n=Array(t>1?t-1:0),i=1;i<t;i++)n[i-1]=arguments[i];if(null==e||n.length<1)return e;var r=Object.getOwnPropertyNames,a=Object.getPrototypeOf;return n.forEach(function(t){var n=r(t).concat(r(a(t)));n.forEach(function(n){return e[n]=t[n]})}),e}},{key:"diff",value:function t(n,i){if(null==i)return null;if(null==n&&null!=i)return i;var r={};for(var a in i){var o=i[a],s=n[a];if(s!==o)if(null==s)r[a]=o;else switch("undefined"==typeof o?"undefined":babelHelpers.typeof(o)){case"string":case"number":case"boolean":case"function":r[a]=o;break;case"object":if(o instanceof Array)s.length!==o.length&&(r[a]=o);else{var t=e.diff(s,o);null!=t&&(r[a]=t)}}}return 0===Object.keys(r).length?null:r}},{key:"clone",value:function t(n){var i=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];if(null==n)return n;var t=n;if("object"===("undefined"==typeof n?"undefined":babelHelpers.typeof(n))){t=n instanceof Array?[]:{};var r=function(r){var a=n[r];if("object"===("undefined"==typeof a?"undefined":babelHelpers.typeof(a))&&null!==a&&i===!0)if(a instanceof Array)t[r]=[],a.forEach(function(n){return t[r].push(e.clone(n))});else{t[r]={};for(var o in a)t[r][o]=e.clone(a[o])}else t[r]=a};for(var a in n)r(a)}return t}},{key:"get",value:function(e,t){if(!(null==e||null==t||t.length<1)){"string"==typeof t&&(t=t.split("."));for(var n=0,i=t.length;n<i;++n){var r=t[n];if(null==e[r])return;e=e[r]}return e}}},{key:"set",value:function(e,t,n){if(!(null==e||null==t||t.length<1)){var i=t.length-1;t.forEach(function(t,r){return r===i?e[t]=n:(null==e[t]&&(e[t]={}),void(e=e[t]))})}}},{key:"formatTimecode",value:function(t,n){if(t=parseInt(t),isNaN(t))return"00:00";var i=e.formatZeroFill(t%60);return t=parseInt(t/60),i=e.formatZeroFill(t%60)+":"+i,t=parseInt(t/60),t>0&&(i=e.formatZeroFill(t)+":"+i),n>=3600&&5===i.length&&(i="00:"+i),i}},{key:"formatZeroFill",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:2;return e.toString().padStart(t,"0")}},{key:"toDate",value:function(e){return e instanceof Date?e:new Date(e)}},{key:"formatTime",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"h:mm:ss A",i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{timezone:"",offset:-((new Date).getTimezoneOffset()/60)};if(t=e.toDate(t),null!=i.offset&&0!==i.offset&&(t=new Date(t.getTime()+Math.round(60*i.offset*60*1e3))),!isNaN(t.getTime())){var r=t.getUTCHours(),a=t.getUTCMinutes(),o=t.getUTCSeconds(),s=t.getUTCMilliseconds(),l=r%12||12,u=r<12?"am":"pm",c={hh:e.formatZeroFill(l),h:l,HH:e.formatZeroFill(r),H:r,mm:e.formatZeroFill(a),m:a,sss:e.formatZeroFill(s,3),ss:e.formatZeroFill(o),s:o,a:u,A:u.toUpperCase(),z:i.timezone};for(var h in c)n=n.replace(h,c[h]);return n}}},{key:"flattenTimecode",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:30;if(!e)return NaN;var n=e.split(":"),i=0;if(4===n.length)i=parseInt(n.pop())/t;else if(3===n.length&&(n[2]=n[2].replace(",","."),n[2].indexOf(".")!==-1)){var r=n[2].split(".");(null!=r?r.length:void 0)>1&&(n[2]=r[0],i=parseInt(r[1])/1e3)}for(var a=parseInt(n.pop());n.length>0;)a+=Math.pow(60,n.length)*parseInt(n.shift());return a+i}},{key:"cacheBust",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"cacheBust",n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:Date.now(),i=e.indexOf("?")===-1?"?":"&";return e+i+t+"="+n}},{key:"getFeed",value:function(t){return e.request(t).then(function(t){return"document"===t.responseType||/^</.test(t.responseText)?e.xmlToJson(t.responseXML):JSON.parse(t.responseText)})}},{key:"trackMouse",value:function(){try{document.addEventListener("mousemove",e.mouseTracker),document.documentElement.addEventListener("mouseleave",function(t){if(null===t.relatedTarget)return e.doc=!1}),document.documentElement.addEventListener("mouseenter",function(t){if(null===t.relatedTarget)return e.doc=!0})}catch(e){}}},{key:"mouseTracker",value:function(t){e.clientX=t.clientX,e.clientY=t.clientY,e.pageX=t.pageX,e.pageY=t.pageY}},{key:"isMouseOverElement",value:function(t){var n=!1;if(null==t)return n;try{n=t.contains(document.elementFromPoint(e.clientX,e.clientY))}catch(e){n=!1}return n}},{key:"isMouseOverDocument",value:function(){return e.doc}},{key:"getActualSize",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=e.offsetWidth,i=e.offsetHeight;if(t===!0){var r=getComputedStyle(e);n+=parseInt(r.marginLeft)+parseInt(r.marginRight),i+=parseInt(r.marginTop)+parseInt(r.marginBottom)}return{width:n,height:i}}},{key:"isVolumeSettable",value:function(){var e=/ipad|iphone|ipod|android|blackberry|windows ce|windows phone|webos|playbook/.exec(S.toLowerCase());return null==e||"android"===e[0]&&/Firefox/.test(S)}},{key:"createUID",value:function(){for(var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:16,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:32,i=function(e,t){return Math.floor(Math.random()*(t-e+1))+e},r="",a=t-1,o=0;o<a;o++)r+=i(0,n-1).toString(n).toUpperCase();return e.uids[r]===!0?e.createUID(t,n):(e.uids[r]=!0,r)}},{key:"chain",value:function e(t,n){var e=Promise.resolve(n);return t.forEach(function(t){return e=e.then(t)}),e}},{key:"first",value:function(t,n){return Promise.resolve(n).then(t.shift()).then(function(e){return e}).catch(function(i){return t.length>0?e.first(t,n):null})}},{key:"transform",value:function(e,t){if(null==t||0===t.length)return Promise.resolve(e);t=t.map(function(e){return"function"==typeof e.transform?e.transform:e});var n=0,i=t.length-1,r=function(e){return n++,a(e)},a=function(e){var a=t[n];if("function"!=typeof a)throw new Error("Transform must be a valid function");return Promise.resolve(a(e,r)).then(function(e){return n<i?r(e):e})};return a(e)}},{key:"arrayBufferToString",value:function(e){return String.fromCharCode.apply(null,new Uint8Array(e))}},{key:"parseJWT",value:function(e){var t=e.split(".");return{header:JSON.parse(atob(t[0])),payload:JSON.parse(atob(t[1])),signature:t[2]}}},{key:"getFullScreenApi",value:function(e,t){var n={};return null!=e.webkitRequestFullScreen?(n.enter=e.webkitRequestFullScreen.bind(e),n.exit=null!=document.webkitExitFullscreen?document.webkitExitFullscreen.bind(document):document.webkitCancelFullScreen.bind(document),n.event="onwebkitfullscreenchange",n.element="webkitFullscreenElement",n.error="webkitfullscreenerror"):null!=e.requestFullscreen?(n.enter=e.requestFullscreen.bind(e),n.exit=null!=document.exitFullscreen?document.exitFullscreen.bind(document):document.cancelFullscreen.bind(document),n.event="onfullscreenchange",n.element="fullscreenElement",n.error="fullscreenerror"):null!=e.mozRequestFullScreen?(n.enter=e.mozRequestFullScreen.bind(e),n.exit=document.mozCancelFullScreen.bind(document),n.event="onmozfullscreenchange",n.element="mozFullscreenElement",n.error="mozfullscreenerror"):null!=e.msRequestFullscreen?(n.enter=e.msRequestFullscreen.bind(e),n.exit=document.msExitFullscreen.bind(document),n.event="onmsfullscreenchange",n.element="msFullscreenElement",n.error="MSFullscreenError"):null!=t.webkitEnterFullscreen&&(n.enter=t.webkitEnterFullscreen.bind(t),n.exit=t.webkitExitFullscreen.bind(t),n.event=null,n.error=null),n}},{key:"stringToArray",value:function(e){for(var t=new ArrayBuffer(2*e.length),n=new Uint16Array(t),i=0,r=e.length-1;i<r;i++)n[i]=e.charCodeAt(i);return n}},{key:"arrayToString",value:function(e){return String.fromCharCode.apply(null,new Uint16Array(e.buffer))}},{key:"base64DecodeUint8Array",value:function(e){for(var t=window.atob(e),n=t.length,i=new Uint8Array(new ArrayBuffer(n)),r=0,a=n-1;r<a;r++)i[r]=t.charCodeAt(r);return i}},{key:"base64EncodeUint8Array",value:function(e){for(var t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n=e.length,i="",r=0;r<n;){var a=e[r++],o=r<n?e[r++]:Number.NaN,s=r<n?e[r++]:Number.NaN,l=a>>2,u=(3&a)<<4|o>>4,c=(15&o)<<2|s>>6,h=63&s;isNaN(o)?c=h=64:isNaN(s)&&(h=64),i+=t.charAt(l)+t.charAt(u)+t.charAt(c)+t.charAt(h)}return i}},{key:"getKeySystem",value:function(){return/Edge/.test(S)||/Trident/.test(S)||/Tizen/.test(S)?"com.microsoft.playready":/Chrome/.test(S)||/Firefox/.test(S)?"com.widevine.alpha":"com.apple.fps.1_0"}},{key:"isAutoplaySupported",value:function(){var t=!0;if(e.isIOS())if(e.getSafariVersion()!==-1){var n=e.getIOSversion()||[];t=n[0]>=10}else e.isChrome()&&(t=e.getChromeVersion()>=53);return e.isChrome()&&e.isAndroid()&&(t=e.getChromeVersion()>=53),t}},{key:"fieldIsUnique",value:function(e,t,n){return n=n.toString().toLowerCase(),!e.some(function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},i=e[t]||"";return i.toString().toLowerCase()===n})}},{key:"toCamelCase",value:function(e){return e.replace(/-|_([a-z])/g,function(e){return e[1].toUpperCase()})}},{key:"toHyphenated",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"-";return e.replace(/([A-Z])/g,function(e){return t+e[0].toLowerCase()})}},{key:"toSnakeCase",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];return t=e.toHyphenated(t,"_"),n===!0?t.toUpperCase():t}},{key:"createElement",value:function(e,t,n){var i=arguments.length>3&&void 0!==arguments[3]?arguments[3]:"div";return"string"==typeof i&&(i=document.createElement(i)),null!=e&&("string"==typeof e&&(e=[e]),e.forEach(function(e){return i.classList.add(e)})),null!=n&&(i.textContent=n),null!=t&&t.appendChild(i),i}},{key:"select",value:function(e){if("string"==typeof e){var t=document.getElementById(e);null==t&&(t=document.querySelector(e)),e=t}return e}},{key:"getViewability",value:function(t){
t=e.select(t);var n=t.getBoundingClientRect(),i=window.innerWidth||document.documentElement.clientWidth,r=window.innerHeight||document.documentElement.clientHeight,a=n.top>=0,o=n.left>=0,s=n.bottom<=r,l=n.right<=i;switch(!0){case a&&o&&s&&l:return"full";case!a&&n.bottom<=0||!o&&n.right<=0||!l&&n.left>=i||!s&&n.top>=r:return"none";case a||o||s||l:return"partial"}}},{key:"isViewable",value:function(t){return"full"===e.getViewability(t)}},{key:"timerGroup",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]&&arguments[1];if(null==e.timerGroups&&(e.timerGroups={}),n===!0){var i=e.timerGroups[t];return null!=i&&i.destroy(),void delete e.timerGroups[t]}return null==e.timerGroups[t]&&(e.timerGroups[t]=s.create(t)),e.timerGroups[t]}},{key:"mimeTypes",get:function(){return{mp4:"video/mp4",m3u8:"application/x-mpegURL",mp3:"audio/mpeg",json:"application/json",txt:"text/plain",xml:"application/xml",ogv:"video/ogg",webm:"video/webm",mpd:"application/dash+xml",ism:"application/vnd.ms-sstr+xml",js:"text/javascript",css:"text/css",vtt:"text/vtt",ttml:"application/ttml+xml",srt:"application/x-subrip",cea608:"text/cea-608",cea708:"text/cea-708"}}}]),e}();L.isTouch=null,L.clientX=0,L.clientY=0,L.pageX=0,L.pageY=0,L.doc=!0,L.trackMouse(),L.uids={};var I=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"toColor",value:function(e){var t=void 0;t=/$#/.test(e)?hex.replace(/^#?([a-f\d])([a-f\d])([a-f\d])$/i,function(e,t,n,i){return"#"+t+t+n+n+i+i}).substring(1).match(/.{2}/g).map(x(function(){return parseInt(x,16)})):e.match(/[0-9\.]+/g);var n=parseInt(t[0]),i=parseInt(t[1]),r=parseInt(t[2]),a=null!==t[3]?parseFloat(t[3]):1;return{r:n,g:i,b:r,a:a}}},{key:"fromColor",value:function(e){return null==e.a&&(e.a=1),"rgba("+e.r+","+e.g+","+e.b+","+e.a+")"}},{key:"toPercent",value:function(e){return"string"==typeof e?e:Math.round(100*e)+"%"}},{key:"fromPercent",value:function(e){return"number"==typeof e?e:parseFloat(e)/100}},{key:"toSize",value:function(e){return/^[0-9]+$/.test(e)?e+"px":e}},{key:"toCSS",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n="";return t=t===!0?" !important":"",T.each(e,function(e,i){return n+=L.toHyphenated(i)+":"+e+t+";"}),n}}]),e}(),w=function(){function e(t){babelHelpers.classCallCheck(this,e),this.enabled=t,this.enabled||(this.log=this.trace=this.debug=this.info=this.warn=this.error=this.fatal=function(){})}return babelHelpers.createClass(e,[{key:"log",value:function(){try{arguments.length>1&&null!=arguments[1]?console.log.apply(console,arguments):console.log(arguments[0])}catch(e){}}},{key:"trace",value:function(){try{console.trace.apply(console,arguments)}catch(e){}}},{key:"debug",value:function(){try{console.log.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}}},{key:"info",value:function(){try{console.info.apply(console,arguments)}catch(e){}}},{key:"warn",value:function(){try{console.warn.apply(console,arguments)}catch(e){}}},{key:"error",value:function(){try{console.error.apply(console,arguments)}catch(e){this.log.apply(this,arguments)}}},{key:"fatal",value:function(){try{console.fatal.apply(console,arguments)}catch(e){}}}]),e}(),D={LOADED_METADATA:"loadedmetadata",READY:"ready",ERROR:"error",ENDED:"ended",STARTED:"started",DURATION_CHANGE:"durationchange",SEEKING:"seeking",SEEKED:"seeked",TIME_UPDATE:"timeupdate",LOAD_START:"loadstart",LOADED_DATA:"loadeddata",CAN_PLAY:"canplay",CAN_PLAY_THROUGH:"canplaythrough",PROGRESS:"progress",MEDIA_CHANGE:"mediachange",WAITING:"waiting",BUFFERING_CHANGE:"bufferingchange",STALLED:"stalled",PLAY:"play",PLAYING:"playing",PAUSE:"pause",PAUSED:"paused",PLAY_REQUEST:"playrequest",MEDIUM_CHANGE:"mediumchange",TEMPORAL_TYPE_CHANGE:"temporaltypechange",VOLUME_CHANGE:"volumechange",FAIL_OVER_ATTEMPT:"failoverattempt",PLAYBACK_TARGET_CHANGE:"playbacktargetchange",PLAYBACK_TARGET_AVAILABILITY_CHANGE:"playbacktargetavailabilitychange",RECORD_CONTENT_CHANGE:"recordcontentchange",IS_LIVE:"islive",CONTENT_CHANGED:"contentchanged",PLAYBACK_RATE_CHANGE:"playbackratechange",SETTINGS_CHANGE:"settingschange",TRACK_ERROR:"trackerror",QUALITY_CHANGE:"qualitychange",QUALITY_CHANGING:"qualitychanging",QUALITY_SWITCHED:"qualityswitched",QUALITY_MODE_CHANGE:"qualitymodechange",QUALITY_LEVELS_LOADED:"qualitylevelsloaded",MEDIA_SEQUENCE_INITIALIZED:"mediasequenceinitialized",MEDIA_SEQUENCE_STARTED:"mediasequencestarted",MEDIA_SEQUENCE_ENDED:"mediasequenceended",MEDIA_SEQUENCE_ABORTED:"mediasequenceaborted",AUTOPLAY_BLOCKED:"autoplayblocked",LANGUAGE_CHANGE:"languagechange",TIMED_METADATA:"timedmetadata",CUES_CHANGE:"cueschange",VIEW_CREATED:"viewcreated",MUTE_CHANGE:"mutechange",RESUME:"resume",PLAY_STATE_CHANGE:"playstatechange",FULL_SCREEN_CHANGE:"fullscreenchange",DISPLAY_STATE_CHANGE:"displaystatechange",BUSY:"busy",CREATE:"create",DESTROY:"destroy",GO_LIVE:"golive"},G={NONE:"none",DEFAULT:"default",MUTED:"muted"},U=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"detect",value:function(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:L.blankVideo();return new Promise(function(n,i){var r=function(e){try{l.removeEventListener("error",a),l.pause()}catch(e){}n(e)},a=function(){r(e.UNKNOWN)},o=function(){l.muted=!0,l.play().then(function(){return r(e.MUTED)}).catch(s)},s=function(){l.playsInline=!0,l.play().then(function(){return r(e.MUTED_INLINE)}).catch(function(){return r(e.BLOCKED)})};try{if(!L.isAutoplaySupported())return n(e.BLOCKED);var l=document.createElement("video");l.addEventListener("error",a),l.volume=.01,l.src=t,Promise.resolve(l.play()).then(function(){return r(e.ALLOWED)}).catch(o)}catch(e){a()}})}},{key:"init",value:function(t){return t.autoplayPolicy===G.NONE?Promise.resolve(j=e.UNKNOWN):L.isHTML5()===!0?(j=L.isAutoplaySupported()?L.isIOS()?e.MUTED_INLINE:e.MUTED:e.BLOCKED,Promise.resolve(j)):this.value(j===e.UNKNOWN)}},{key:"value",value:function(){var e=arguments.length>0&&void 0!==arguments[0]&&arguments[0];return e===!0&&(j=null,V=null),null!=j?Promise.resolve(j):(null==V&&(V=this.detect().then(function(e){return j=e,V=null,e})),V)}},{key:"UNKNOWN",get:function(){return"unknown"}},{key:"ALLOWED",get:function(){return"allowed"}},{key:"MUTED",get:function(){return"muted"}},{key:"MUTED_INLINE",get:function(){return"mutedinline"}},{key:"BLOCKED",get:function(){return"blocked"}},{key:"threshold",get:function(){return j},set:function(e){j=e}}]),e}(),j=U.UNKNOWN,V=null,B={NONE:"none",METADATA:"metadata",AUTO:"auto"},Y={VERSION:"9.0.10",PRODUCT:"premier",PLATFORM:"web",PLAYER_ID:"",CREATE:"http://localhost:2672/beacon/create/",TRACK:"http://localhost:2672/beacon/track/"},F=function(){function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,e);var n=L.override(e.defaults,t),i=C.amp.debug;null!=i&&(n.debug=i),null==n.defaults&&(n.defaults={}),n.controls===!0&&(n.plugins.react=null),Object.assign(this,n),/muted/i.test(this.autoplay)&&(this.autoplayPolicy=G.MUTED,this.autoplay=!0)}return babelHelpers.createClass(e,null,[{key:"create",value:function(t){return new e(t)}}]),e}();F.defaults={id:null,paths:{base:"../",player:"${paths.base}akamai/amp/core/",plugins:"${paths.base}akamai/amp/",libs:"${paths.player}libs/",resources:"${paths.base}resources/"},resources:[{debug:"${paths.player}amp.css",src:"${paths.player}amp.min.css",type:"text/css",async:!0}],plugins:{react:{resources:[{src:"${paths.plugins}react/libs/react.min.js",debug:"${paths.plugins}react/libs/react.js",type:"text/javascript"},{src:"${paths.plugins}react/React.min.css",debug:"${paths.plugins}react/React.css",type:"text/css"},{src:"${paths.plugins}react/React.min.js",debug:"${paths.plugins}react/React.js",type:"text/javascript"}],autoHide:3}},pid:Y.PLAYER_ID,dataset:{},settings:{},preload:B.NONE,language:navigator.language||navigator.browserLanguage,autoplay:!1,autoplayPolicy:G.DEFAULT,loop:!1,controls:!1,playsinline:null,withCredentials:!1,muted:null,fullscreen:{},captioning:{},hls:{resources:[{type:"text/javascript",src:"${paths.libs}hls.min.js",debug:"${paths.libs}hls.js",defer:!0}],quality:{startLevel:-1},data:{enableWorker:!0}},dash:{resources:[{type:"text/javascript",src:"//cdn.dashjs.org/v3.0.1/dash.all.min.js",debug:"//cdn.dashjs.org/v3.0.1/dash.all.debug.js",defer:!0}],buffer:1},locales:{},defaults:{language:"en"}},F.locales={en:{MONOSPACED_SERIF:"Monospaced Serif",PROPORTIONAL_SERIF:"Proportional Serif",MONOSPACED_SANS_SERIF:"Monospaced Sans-Serif",PROPORTIONAL_SANS_SERIF:"Proportional Sans-Serif",CASUAL:"Casual",CURSIVE:"Cursive",SMALL_CAPS:"Small Capitals",ERROR:"Error",ERROR_ABORTED:"Media Aborted",ERROR_DECODE:"Decode Error",ERROR_NETWORK:"Network Error",ERROR_SRC:"Source not supported",ERROR_DEFAULT:"An error has occurred",STREAM_NOT_FOUND:"Stream not found",EN:"English",ENG:"English",ES:"Spanish",SPA:"Spanish",DE:"German",DEU:"German",GER:"German",FR:"French",FRE:"French",FRA:"French",IT:"Italian",ITA:"Italian",RU:"Russian",RUS:"Russian",ZH:"Chinese",ZHO:"Chinese",CHI:"Chinese",JA:"Japanese",JPN:"Japanese",KO:"Korean",KOR:"Korean",UNKNOWN:"Unknown"},es:"#{paths.player}es.json",fr:"#{paths.player}fr.json"};var z=/^\s*[#\$]{([^\$#{}]+)}\s*$/,K=/[#\$]{([^\$#}]*)}/g,q=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"eval",value:function(e,t){var n=this;if(null==e)return e;if(z.test(e))try{return this.exec(e.replace(z,"$1"),t)}catch(t){return e}return e.replace(K,function(e,i,r,a){try{return n.exec(i,t)}catch(t){return e}})}},{key:"exec",value:function(e,t){return new Function("with (this) { return "+e+" }").bind(t)()}},{key:"evaluateBindings",value:function(e,t){var n=this,i=!(arguments.length>2&&void 0!==arguments[2])||arguments[2];if(null!=e){if("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))){var r=i===!0?JSON.parse(JSON.stringify(e)):e;if(e instanceof Array)return r.map(function(e){return n.evaluateBindings(e,t,!1)});e={};for(var a in r)e[a]=this.evaluateBindings(r[a],t,!1);return e}if("string"==typeof e){var o=this.eval(e,t);return o!==e&&K.test(o)===!0?this.evaluateBindings(o,t,i):o}return e}}},{key:"SINGLE",get:function(){return z}},{key:"TOKEN",get:function(){return K}}]),e}(),Q=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,n));return i.config=e,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.createData()}},{key:"createData",value:function(){this.setData(this.config)}},{key:"getDefaults",value:function(){return this.defaults||{}}},{key:"setData",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n={};this.getDefaults();return T.each(this.getDefaults(),function(t,i){return n[i]=i in e?e[i]:t}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setData",this).call(this,n),e}},{key:"destroy",value:function(){}}],[{key:"NAME",get:function(){return"ModuleProxy"}}]),t}(puremvc.Proxy),W=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e.getModuleName()));return n.module=e,n.mediator=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){var n=this;babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var i=this.module.listNotificationPublications();null!=i&&(this.mediator=new puremvc.Mediator(this.facade.getModuleName()),this.mediator.listNotificationInterests=function(){return i},this.mediator.handleNotification=function(e){n.facade.sendNotification(e.getName(),e.getBody(),e.getType())})}},{key:"onRegister",value:function(){null!=this.mediator&&this.module.registerMediator(this.mediator)}},{key:"onRemove",value:function(){null!=this.mediator&&this.module.removeMediator(this.mediator)}},{key:"listNotificationInterests",value:function(){return this.module.listNotificationInterests()}},{key:"handleNotification",value:function(e){this.module.sendNotification(e.getName(),e.getBody(),e.getType())}}]),t}(puremvc.Mediator),Z=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"execute",value:function(e){var t=e.getBody();t.player=this.facade.player||this.facade,this.facade.dispatchEvent(t)}}]),t}(puremvc.SimpleCommand),X=function(){function e(){babelHelpers.classCallCheck(this,e),this._transformMap={}}return babelHelpers.createClass(e,[{key:"addTransform",value:function(e,t){if(null!=t&&null!=e){if(null==this._transformMap[e])this._transformMap[e]=[];else if(this._transformMap[e].indexOf(t)!==-1)return;this._transformMap[e].push(t),this.sortTransforms(e)}}},{key:"sortTransforms",value:function(e,t){return null==t&&(t=function(e,t){var n=e.priority||0,i=t.priority||0;return i-n}),this._transformMap[e].sort(t)}},{key:"transform",value:function(e,t){var n=this._transformMap[e];return null==n?Promise.resolve(t):L.transform(t,n)}},{key:"removeTransform",value:function(e,t){if(null!=t&&null!=e){var n=this._transformMap[e];if(null!=n){var i=n.indexOf(t);if(i!==-1)return n.splice(i,1)}}}}],[{key:"create",value:function(){return new e}}]),e}(),$={TIME:"time",SEEK:"seek",MEDIA:"media",AD_REQUEST:"adrequest",AD_BREAK:"adbreak",PLAY_STATE:"playstate",EVENT:"event",ERROR:"error",CUE_CHANGE:"cuechange"},J={INTERNAL:"internal",STARTUP:"startup",LOAD:"load",REQUEST_PLAY:"requestplay",PAUSE_REQUEST:"pauserequest",TOGGLE_PLAY_PAUSE:"toggleplaypause",CHANGE_PLAY_STATE:"changeplaystate",MEDIA_ELEMENT_CHANGE:"mediaelementchange",HIDDEN_CHANGE:"hiddenchange",TOGGLE_FULL_SCREEN:"togglefullscreen",CHANGE_DISPLAY_STATE:"changedisplaystate",DISABLE_FULL_SCREEN:"disablefullscreen",ENABLE_FULL_SCREEN:"enablefullscreen",CHANGE_ACTIVE_STATE:"changeactivestate",ACTIVE_STATE_CHANGE:"activestatechange",CHANGE_MEDIA:"changemedia",SET_MEDIA:"setmedia",MEDIA_VALIDATED:"mediavalidated",CHANGE_SETTINGS:"changesettings",CHANGE_VOLUME:"changevolume",CHANGE_MUTED:"changemuted",TOGGLE_MUTED:"togglemuted",CHANGE_TIME:"changetime",TIME_CHANGE:"timechange",SEEK:"seek",SEEK_COMPLETE:"seekcomplete",CHANGE_DURATION:"changeduration",CHANGE_AUTOPLAY:"changeautoplay",AUTOPLAY_CHANGE:"autoplaychange",CHANGE_LOOP:"changeloop",CHANGE_PRELOAD:"changepreload",CHANGE_CONTROLS:"changecontrols",PLAYBACK_CORE_CHANGE:"playbackcorechange",START:"start",END:"end",REPLAY:"replay",ADD_LAYER:"addlayer",REMOVE_LAYER:"removelayer",ADD_OVERLAY:"addoverlay",REMOVE_OVERLAY:"removeoverlay",ADD_CONTROL:"addcontrol",REMOVE_CONTROL:"removecontrol",ADD_CONTROL_STATE:"addcontrolstate",REMOVE_CONTROL_STATE:"removecontrolstate",ADD_APPLICATION_STATE:"addapplicationstate",REMOVE_APPLICATION_STATE:"removeapplicationstate",DISPATCH_EVENT:"dispatchevent",INITIALIZED:"initialized",REGISTER_PLAYBACK_CORE:"registerplaybackcore",REMOVE_PLAYBACK_CORE:"removeplaybackcore",CHANGE_PLAYBACK_TARGET:"changeplaybacktarget",LOCK:"lock",FRAGMENT_LOAD_START:"fragmentloadstart",FRAGMENT_LOADED:"fragmentloaded",CHANGE_CONTENT:"changecontent",ENABLE_VIDEO_EVENTS:"enablevideoevents",DISABLE_VIDEO_EVENTS:"disablevideoevents",HAS_POST_CONTENT:"haspostcontent",AUDIO_TRACK_SWITCH:"audiotrackswitch",TRACK:"track",init:function(){var e=this;T.each(D,function(t,n){"values"!==n&&"init"!==n&&(e[n]=t)})}},ee=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,L.createUID()));return n.viewComponent=e,n.performance={init:Date.now(),record:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Date.now();return this[e]=t},elapsed:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"init";return this[e]-this[t]}},n.dispatcher=a.create(n),n.transformer=X.create(),n.logger=w.instance,n.moduleMap={},n.emit=n.dispatch.bind(n),n.on=n.addListener=n.addEventListener.bind(n),n.off=n.removeListener=n.removeEventListener.bind(n),n.config=null,n.oninitialized=null,n.onerror=null,n.parentModule=null,n.ignoreEvents=/(timeupdate|progress|fragmentloaded|fragmentloadstart|timeremaining|adtimeremaining)/,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initialize",value:function(e,t){this.config=e,this.parentModule=t,this._id=this.config.id||this.multitonKey,this.loadModuleResources().then(this.resourcesLoaded.bind(this)).catch(this.resourcesError.bind(this))}},{key:"loadModuleResources",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.config.resources;return!(null!=e?e.length:void 0)>0?Promise.resolve():dt.addResources(this.evaluatePaths(e))}},{key:"evaluatePaths",value:function(e){var t,n;if(null!=e){var i=this.config.paths||(null!=(t=this.parentModule)&&null!=(n=t.config)?n.paths:void 0);return null!=i&&(e=q.evaluateBindings(e,{paths:i})),e}}},{key:"resourcesError",value:function(e){if(null==this.onerror)throw i.create(e);this.onerror(this)}},{key:"resourcesLoaded",value:function(){this.createFramework(),"function"==typeof this.oninitialized&&this.oninitialized(this)}},{key:"createFramework",value:function(){this.createModel(),this.createController(),this.createView()}},{key:"createModel",value:function(){this.registerProxy(new Q(this.config))}},{key:"createView",value:function(){}},{key:"createController",value:function(){this.registerCommand(J.DISPATCH_EVENT,Z)}},{key:"getModuleName",value:function(){return this.moduleName}},{key:"getId",value:function(){return this._id}},{key:"getConfig",value:function(){return this.config}},{key:"hasModule",value:function(e){return null!=this.moduleMap[e]}},{key:"getModules",value:function(){var e={};return T.each(this.moduleMap,function(t,n){return e[n]=t.module}),e}},{key:"registerModule",value:function(e){var t=e.getModuleName();if(null!=e&&null==this.moduleMap[t]){var n=new W(e);this.moduleMap[t]=n,this.registerMediator(n),e.onRegister()}}},{key:"retrieveModule",value:function(e){return this.moduleMap[e].module}},{key:"removeModule",value:function(e){var t=this.moduleMap[e];if(null!=t){delete this.moduleMap[e],this.removeMediator(e);var n=t.module;return n.onRemove.call(n),n}}},{key:"listNotificationInterests",value:function(){return[]}},{key:"listNotificationPublications",value:function(){return[]}},{key:"getViewComponent",value:function(){return this.viewComponent}},{key:"setViewComponent",value:function(e){return this.viewComponent=e,e}},{key:"onRegister",value:function(){}},{key:"onRemove",value:function(){}},{key:"destroy",value:function(){var e=this.retrieveProxy(Q.NAME);null!=e&&"function"==typeof e.destroy&&e.destroy(),puremvc.Facade.removeCore(this.multitonKey),this.dispatcher.destroy(),null!=this.viewComponent&&(this.viewComponent.innerHTML="",this.viewComponent.className="")}},{key:"addEventListener",value:function(e,t){this.dispatcher.addEventListener(e,t)}},{key:"once",value:function(e,t){this.dispatcher.once(e,t)}},{key:"logEvent",value:function(e){if(this.ignoreEvents.test(e.type)!==!0){var t=this.getModuleName().toUpperCase();e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e)}}},{key:"dispatchEvent",value:function(e){var t=this;this.transform($.EVENT,e).then(function(n){if(null!=n)return t.logEvent(e),t.dispatcher.dispatchEvent(e)})}},{key:"dispatch",value:function(e,t){this.dispatchEvent(r.create(e,t))}},{key:"removeEventListener",value:function(e,t){this.dispatcher.removeEventListener(e,t)}},{key:"addTransform",value:function(e,t){return this.transformer.addTransform(e,t)}},{key:"sortTransforms",value:function(e,t){return this.transformer.sortTransforms(e,t)}},{key:"transform",value:function(e,t){return this.transformer.transform(e,t)}},{key:"removeTransform",value:function(e,t){return this.transformer.removeTransform(e,t)}},{key:"id",get:function(){return this.getId()}}]),t}(puremvc.Facade),te={REGISTER_PLUGINS:"registerPlugins",PLUGIN_REGISTERED:"pluginRegistered",PLUGINS_INITIALIZED:"pluginsinitialized"},ne=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"extractContentId",value:function(e,t){var n=document.createElement("a");return n.href=L.arrayToString(e),n.hostname}},{key:"extractServerUrl",value:function(e,t){return t.serverURL||t.serverUrl}},{key:"requestCertificate",value:function(e){var t={url:e.cert,responseType:"arraybuffer",headers:{Pragma:"Cache-Control: no-cache","Cache-Control":"max-age=0"}};return L.request(t).then(function(e){return new Uint8Array(e.response)})}},{key:"concatInitDataIdAndCertificate",value:function(e,t,n){"string"==typeof t&&(t=L.stringToArray(t));var i=0,r=new ArrayBuffer(e.byteLength+4+t.byteLength+4+n.byteLength),a=new DataView(r),o=new Uint8Array(r,i,e.byteLength);o.set(e),i+=e.byteLength,a.setUint32(i,t.byteLength,!0),i+=4;var s=new Uint16Array(r,i,t.length);s.set(t),i+=s.byteLength,a.setUint32(i,n.byteLength,!0),i+=4;var l=new Uint8Array(r,i,n.byteLength);return l.set(n),new Uint8Array(r,0,r.byteLength)}},{key:"requestLicense",value:function(e,t,n,i){var r={url:n,method:"POST",responseType:"text",headers:{"Content-type":"application/x-www-form-urlencoded"},data:"spc="+L.base64EncodeUint8Array(e)+"&assetId="+encodeURIComponent(t)};return T.each(i.httpRequestHeaders,function(e,t){return r.headers[t]=e}),"boolean"==typeof i.withCredentials&&(r.withCredentials=i.withCredentials),L.request(r).then(function(e){var t=e.responseText.trim();return"<ckc>"===t.substr(0,5)&&"</ckc>"===t.substr(-6)&&(t=t.slice(5,-6)),L.base64DecodeUint8Array(t)}).catch(function(e){throw"The license request failed."})}}]),e}(),ie={NORMAL:"normal",FULL_SCREEN:"full-screen",FULLSCREEN:"full-screen"},re={READY:"ready",PLAYING:"playing",PAUSED:"paused",ENDED:"ended",LOADING:"loading",WAITING:"waiting",ERROR:"error"},ae={ACTIVE:"active",INACTIVE:"inactive"},oe=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.device=L.getDevice(),e.time={currentTime:0,duration:0},e.displayState=ie.NORMAL,e.playState=null,e.activeState=null,e.seeking=!1,e.seekrequested=!1,e.waiting=!1,e.busy=!1,e.volume=1,e.playbackTarget="amp",e.hasPostContent=!1,e.locked=!0,e.mediaElement=null,e.hidden=!1,e.ended=!1,e.buffering=!1,e.playbackRate=1,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getHasPostContent",value:function(){return this.hasPostContent}},{key:"setHasPostContent",value:function(e){this.hasPostContent=e}},{key:"getEnded",value:function(){return this.ended}},{key:"setEnded",value:function(e){this.ended=e,this.ended===!0&&this.seeking===!0&&(this.seeking=!1)}},{key:"getDisplayState",value:function(){return this.displayState}},{key:"setDisplayState",value:function(e){if(e!==this.displayState){var t=this.displayState;this.displayState=e,this.sendNotification(J.DISPLAY_STATE_CHANGE,{previous:t,value:this.displayState})}}},{key:"getPlayState",value:function(){return this.playState}},{key:"setPlayState",value:function(e){var t=this;if(this.getWaiting()===!0&&this.setWaiting(!1),e!==this.playState){var n=this.playState;this.playState=e,this.facade.transform($.PLAY_STATE,this.playState).then(function(i){if(null!=i&&i!==n)switch(t.sendNotification(J.PLAY_STATE_CHANGE,{previous:n,value:t.playState}),e){case re.PLAYING:return t.sendNotification(J.DISPATCH_EVENT,r.create("playing"))}}).catch(function(e){return t.sendNotification(J.ERROR,e)})}}},{key:"getDevice",value:function(){return this.device}},{key:"getSeeking",value:function(){return this.seeking}},{key:"setSeeking",value:function(e){e!==this.seeking&&(this.seeking=e,this.seeking===!1&&this.playState===re.PAUSED&&this.setWaiting(!1))}},{key:"getSeekRequested",value:function(){return this.seekrequested}},{key:"setSeekRequested",value:function(e){e!==this.seekrequested&&(this.seekrequested=e)}},{key:"getWaiting",value:function(){return this.waiting}},{key:"setWaiting",value:function(e){var t=this;if(e!==this.waiting){this.waiting=e;var n=this.waiting===!0?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE;if(this.sendNotification(n,re.WAITING),this.waiting===!0){var i=function(){t.facade.removeEventListener("timeupdate",a),t.facade.removeEventListener("playing",r),t.facade.removeEventListener("canplaythrough",r),t.facade.removeEventListener("ended",r)},r=function(){i(),t.setWaiting(!1)},a=function(e){t.facade.seeking===!1&&r()};this.facade.addEventListener("timeupdate",a),this.facade.addEventListener("playing",r),this.facade.addEventListener("canplaythrough",r),this.facade.addEventListener("ended",r)}}}},{key:"getBusy",value:function(){return this.busy}},{key:"setBusy",value:function(e){e!==this.busy&&(this.busy=e,this.sendNotification(J.DISPATCH_EVENT,r.create("busy",e)))}},{key:"getLocked",value:function(){return this.locked}},{key:"setLocked",value:function(e){this.locked=e}},{key:"getBuffering",value:function(){return this.buffering}},{key:"setBuffering",value:function(e){this.buffering=e}},{key:"getMedium",value:function(){return this.medium}},{key:"setMedium",value:function(e){if(e!==this.medium){var t=null!=this.medium?"medium-"+this.medium:this.medium;this.medium=e,this.sendNotification(J.MEDIUM_CHANGE,{previous:t,value:"medium-"+this.medium})}}},{key:"getVolume",value:function(){return this.volume}},{key:"setVolume",value:function(e){if(e!==this.volume)return this.volume=e}},{key:"getPlaybackTarget",value:function(){return this.playbackTarget}},{key:"setPlaybackTarget",value:function(e){if(e!==this.playbackTarget){var t=this.playbackTarget;this.playbackTarget=e,"amp"!==e?this.getPlayState()!==re.PAUSED&&this.facade.pause():this.getPlayState()===re.PLAYING&&this.facade.play(),this.sendNotification(J.PLAYBACK_TARGET_CHANGE,{previous:t,value:this.playbackTarget})}}},{key:"getActiveState",value:function(){return this.activeState}},{key:"setActiveState",value:function(e){if(e!==this.activeState){var t=this.activeState;this.activeState=e,this.sendNotification(J.ACTIVE_STATE_CHANGE,{previous:t,value:this.activeState})}}},{key:"getMediaElement",value:function(){return this.mediaElement}},{key:"setMediaElement",value:function(e){if(e!==this.mediaElement){var t=this.mediaElement;null!=t&&(e.volume=t.volume,e.muted=t.muted),this.mediaElement=e,this.sendNotification(J.MEDIA_ELEMENT_CHANGE,{previous:t,value:this.mediaElement})}}},{key:"getHidden",value:function(){return this.hidden}},{key:"setHidden",value:function(e){if(e!==this.hidden){var t=this.hidden;this.hidden=e,this.sendNotification(J.HIDDEN_CHANGE,{previous:t,value:this.hidden})}}},{key:"getCurrentTime",value:function(){return this.time.currentTime}},{key:"setCurrentTime",value:function(e){e===this.time.currentTime||e<0||(this.time.currentTime=e,this.sendNotification(J.TIME_UPDATE,e))}},{key:"getDuration",value:function(){return this.time.duration}},{key:"setDuration",value:function(e){e!==this.time.duration&&(this.time.duration=e,this.sendNotification(J.DURATION_CHANGE,e))}},{key:"getPlaybackRate",value:function(){return this.playbackRate}},{key:"setPlaybackRate",value:function(e){e!==this.playbackRate&&(this.playbackRate=e,this.sendNotification(J.PLAYBACK_RATE_CHANGE,e))}}],[{key:"NAME",get:function(){return"ApplicationStateProxy"}}]),t}(puremvc.Proxy),se={AUTHENTICATE:"authenticate",AUTHENTICATED:"authenticated",AUTHENTICATION_FAILED:"authenticationfailed",AUTHORIZE:"authorize",AUTHORIZED:"authorized",AUTHORIZATION_FAILED:"authorizationfailed",AUTHORIZATION_EXPIRED:"authorizationexpired",CHOOSE_PROVIDER:"chooseprovider",ASSET_AUTHORIZED:"assetauthorized",ASSET_AUTHORIZATION_FAILED:"assetauthorizationfailed"},le=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,{}));return e._authorized=!0,e._session=null,e.data=null,e.timeout=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"setMedia",value:function(e){this.setSession(null);var t="blocked"!==e.status.state&&0===e.restriction.length;this.setAuthorized(t),this.setAuthorization(e.authorization)}},{key:"authorize",value:function(e){this.setAuthorization(e),this.sendNotification(se.AUTHORIZED,e)}},{key:"getAuthorization",value:function(){return this.data}},{key:"setAuthorization",value:function(e){return null!=(null!=e?e.token:void 0)&&this.setAuthorized(!0),this.data=e||{},null!=this.data.expiration&&this.setExpiration(this.data.expiration),e}},{key:"getKey",value:function(){return this.data.key}},{key:"setKey",value:function(e){return this.data.key=e,e}},{key:"getToken",value:function(){return this.data.token}},{key:"setToken",value:function(e){return this.data.token=e,e}},{key:"getExpiration",value:function(){return this.data.expiration}},{key:"setExpiration",value:function(e){return this.data.expiration=e,this.data.expiration>Date.now()&&this.startTimeout(),e}},{key:"startTimeout",value:function(){var e=this;L.getUTC().then(function(t){var n=function(){e.sendNotification(se.AUTHORIZATION_EXPIRED),e.sendNotification(se.AUTHORIZE,{media:e.facade.getMedia()})};return e.timeout=e.facade.timers.setTimeout(n,e.getExpiration()-t)})}},{key:"stopTimeout",value:function(){clearTimeout(this.timeout)}},{key:"getSecret",value:function(){if(null==this.data.token)return null;var e="";return null!=this.data.token&&(e=""+this.data.token),null!=this.data.key&&(e=this.data.key+"="+e),e}},{key:"createURL",value:function(e){var t=this.getSecret();return null!=t&&(e+=/\?/.test(e)?"&":"?",e+=t),e}},{key:"getAuthorized",value:function(){return this._authorized}},{key:"setAuthorized",value:function(e){return this.stopTimeout(),this._authorized=e,e}},{key:"getSession",value:function(){return this._session}},{key:"setSession",value:function(e){return this._session=e,e}},{key:"authorized",get:function(){return this.getAuthorized()}}],[{key:"NAME",get:function(){return"SecurityProxy"}}]),t}(puremvc.Proxy),ue=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaults=F.defaults,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getValueOf",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},i=this.facade.getMedia()||{},r=i.metadata||{},a=r.config||{},o=function(){var o=i[e];return null!=o?o:(o=r[e],null!=o?o:(o=a[e],null!=o?o:(o=n[e],null!=o?o:(o=t.data[e],null!=o?o:(o=t.config[e],null!=o?o:void 0)))))};try{return this.facade.evaluateBindings(o())}catch(e){return null}}},{key:"getPID",value:function(){return this.data.pid}},{key:"getPlaysInline",value:function(){return this.data.playsinline}},{key:"getMuted",value:function(){return this.getValueOf("muted")}},{key:"setMuted",value:function(e){return this.data.muted=e,e}},{key:"getWithCredentials",value:function(){return this.getValueOf("withCredentials")}},{key:"setWithCredentials",value:function(e){return this.data.withCredentials=e,e}},{key:"getAutoplay",value:function(){return this.getValueOf("autoplay")}},{key:"setAutoplay",value:function(e){return this.data.autoplay=e,e}},{key:"getAutoplayPolicy",value:function(){return this.getValueOf("autoplayPolicy")}},{key:"setAutoplayPolicy",value:function(e){return this.data.autoplayPolicy=e,e}},{key:"getLoop",value:function(){return this.getValueOf("loop")}},{key:"setLoop",value:function(e){return this.data.loop=e,e}},{key:"getSettings",value:function(){return this.data.settings}},{key:"setSettings",value:function(e){return this.data.settings=e,
e}},{key:"getPaths",value:function(){return this.data.paths}},{key:"setPaths",value:function(e){return this.data.paths=e,e}},{key:"getVersion",value:function(){return this.data.version}},{key:"getControls",value:function(){return this.getValueOf("controls")===!0}},{key:"setControls",value:function(e){return this.data.controls=e,e}},{key:"getFullscreen",value:function(){return this.data.fullscreen||{}}},{key:"setFullscreen",value:function(e){return this.data.fullscreen=e,e}},{key:"getLanguage",value:function(){return this.data.language}},{key:"getPreload",value:function(){return this.getValueOf("preload")}},{key:"setPreload",value:function(e){return this.data.preload=e,e}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Q),ce=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data=e,Object.defineProperties(n,{kind:{get:n.getKind,enumerable:!0,configurable:!1},label:{get:n.getLabel,enumerable:!0,configurable:!1},language:{get:n.getLanguage,enumerable:!0,configurable:!1},id:{get:n.getId,enumerable:!0,configurable:!1},enabled:{get:n.getEnabled,set:n.setEnabled,enumerable:!0,configurable:!1}}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getKind",value:function(){return this.data.kind}},{key:"getLabel",value:function(){return this.data.label}},{key:"getLanguage",value:function(){return this.data.language}},{key:"getId",value:function(){return this.data.id}},{key:"setEnabled",value:function(e){e!==this.data.enabled&&(this.data.enabled=e,this.changeEnabled(e),this.dispatchEvent("change"))}},{key:"changeEnabled",value:function(e){}},{key:"getEnabled",value:function(){return this.data.enabled}},{key:"flatten",value:function(){return{kind:this.getKind(),label:this.getLabel(),language:this.getLanguage(),id:this.getId(),enabled:this.getEnabled()}}}]),t}(a),he=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));return e.data={core:null,muted:!1,started:!1,volume:1,currentTime:0,duration:0,src:null,ended:!1,paused:!0,seeking:!1,loading:!1,waiting:!1,keyErrored:!1},e.initialized=!1,"desktop"===L.getDevice()&&(e.initialized=!0),e.handlers={timeupdate:e.ontimeupdate.bind(e),durationchange:e.ondurationchange.bind(e),play:e.onplay.bind(e),playing:e.onplaying.bind(e),pause:e.onpause.bind(e),loadeddata:e.onloadeddata.bind(e),waiting:e.onwaiting.bind(e),seeking:e.onseeking.bind(e),seeked:e.onseeked.bind(e),ended:e.onended.bind(e),progress:e.onprogress.bind(e),error:e.onerror.bind(e),loadstart:e.onloadstart.bind(e),canplay:e.oncanplay.bind(e),canplaythrough:e.oncanplaythrough.bind(e),loadedmetadata:e.onloadedmetadata.bind(e),stalled:e.onstalled.bind(e)},e.resume={event:L.getIEVersion()===-1||11===L.getIEVersion()?"loadedmetadata":"canplaythrough",listener:e.resumestart.bind(e)},e.textTrackHandlers={addtrack:e.onaddtrack.bind(e)},e.onneedkey=e.onneedkey.bind(e),e.enabled=null,e.playWhenLoaded=!1,e.metadataloaded=!1,e.activeCuesIndex=0,e.id3CueType=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){if(e!==this.enabled)return this.enabled=e,this.enabled===!0?this.init():this.applyHandlers(!1),e}},{key:"applyHandlers",value:function(){var e=!(arguments.length>0&&void 0!==arguments[0])||arguments[0],t=this.getMediaElement(),n=e?"addEventListener":"removeEventListener";T.each(this.handlers,function(e,i){t[n](i,e)})}},{key:"resumestart",value:function(e){var t=this;this.getMediaElement();this.handlers.durationchange(e),this.data.currentTime>0&&this.data.ended!==!0?this.facade.timers.setTimeout(function(){t.seek(t.data.currentTime).then(t.resumecomplete.bind(t))},50):this.resumecomplete()}},{key:"resumecomplete",value:function(){this.data.loading=!1,this.applyHandlers(!0),this.playWhenLoaded===!0&&this.facade.timers.setTimeout(this.play.bind(this),1)}},{key:"onaddtrack",value:function(e){var t=this,n=e.track;"metadata"===n.kind&&(n.mode="hidden",n.addEventListener("cuechange",function(e){T.each(e.target.activeCues,function(e,n,i){i[n-1]!==e&&t.sendNotification(J.TIMED_METADATA,e)})}))}},{key:"ontimeupdate",value:function(e){var t=e.target.currentTime;this.facade.ads.inProgress!==!0&&(this.data.currentTime=t,this.sendNotification(J.TIME_CHANGE,{currentTime:t}))}},{key:"ondurationchange",value:function(e){var t=e.target.duration;t&&(this.data.duration=t,/Android [4-7]/.test(navigator.userAgent)&&this.getMediaElement().src.indexOf(".m3u8")!==-1&&Infinity===t||this.sendNotification(J.CHANGE_DURATION,t))}},{key:"onplay",value:function(e){this.data.paused=!1}},{key:"onplaying",value:function(e){this.data.paused=!1,this.data.seeking=!1,this.data.waiting=!1,this.sendNotification(J.PLAYING)}},{key:"onpause",value:function(e){this.getMediaElement().ended!==!0&&this.facade.playState!==re.READY&&(this.data.waiting===!0&&"hls"===this.playbackCoreName||(this.data.paused=!0,e.target.readyState>0&&(this.sendNotification(J.PAUSED),this.sendNotification(J.CHANGE_PLAY_STATE,re.PAUSED))))}},{key:"onloadeddata",value:function(e){this.sendNotification(J.LOADED_DATA)}},{key:"onwaiting",value:function(e){this.data.waiting=!0,this.sendNotification(J.WAITING);var t=this.getMediaElement();t.seeking===!1&&2===t.readyState&&2===t.networkState&&(t.once("playing",this.sendNotification.bind(this,J.BUFFERING_CHANGE,!1)),this.sendNotification(J.BUFFERING_CHANGE,!0))}},{key:"onstalled",value:function(e){this.sendNotification(J.STALLED)}},{key:"onseeking",value:function(e){this.getMediaElement().removeEventListener("timeupdate",this.handlers.timeupdate);var t=e.target.currentTime;this.sendNotification(J.TIME_CHANGE,{currentTime:t}),this.data.seeking=!0,this.sendNotification(J.SEEKING)}},{key:"onseeked",value:function(e){this.data.seeking=!1,this.sendNotification(J.SEEK_COMPLETE,e.target.currentTime),this.getMediaElement().addEventListener("timeupdate",this.handlers.timeupdate)}},{key:"onended",value:function(e){this.data.ended=!0,this.sendNotification(J.ENDED)}},{key:"onprogress",value:function(e){try{var t=this.getMediaElement(),n=t.buffered;this.sendNotification(J.PROGRESS,n.end(n.length-1)/t.duration)}catch(e){}}},{key:"onerror",value:function(e){var t=this.getMediaElement().error;this.sendNotification(J.ERROR,this.facade.createMediaError(t.code,t))}},{key:"onloadstart",value:function(e){this.sendNotification(J.LOAD_START)}},{key:"oncanplay",value:function(e){this.sendNotification(J.CAN_PLAY)}},{key:"oncanplaythrough",value:function(e){this.createTracks(),this.sendNotification(J.CAN_PLAY_THROUGH),this.sendNotification(J.PROGRESS,this.getDuration())}},{key:"onloadedmetadata",value:function(e){this.metadataloaded=!0,this.sendNotification(J.ENABLE_FULL_SCREEN),this.sendNotification(J.LOADED_METADATA)}},{key:"applyTextTrackHandlers",value:function(e){var t=e===!0?"addEventListener":"removeEventListener",n=this.getMediaElement().textTracks;null!=n&&n[t]("addtrack",this.textTrackHandlers.addtrack)}},{key:"createTracks",value:function(){function e(e,t){var n=this.facade.tracks.getAudioTracks();if(T.each(n,function(e){return e.data.enabled=!1}),t===!0)return n[e.id].data.enabled=!0}var t=this,n=this.getMediaElement().audioTracks,i=this.facade.tracks.getAudioTracks();if(null!=n){var r=n.length||0;T.each(n,function(n,a){if(L.fieldIsUnique(i,"id",n.id)!==!1){var o=new ce(n);o.changeEnabled=e.bind(t,o),i.add(o,a+1===r)}})}}},{key:"reset",value:function(){this.data.currentTime=0,this.data.duration=0,this.data.src=null,this.data.ended=!1,this.data.paused=!1,this.data.seeking=!1,this.data.started=!1,this.data.loading=!1,this.applyTextTrackHandlers(!1)}},{key:"getStarted",value:function(){return this.data.started}},{key:"getMediaElement",value:function(){return this.facade.getMediaElement()}},{key:"canPlayMedium",value:function(e){return"video"===e}},{key:"canPlayTemporalType",value:function(e){return"dvr"!==e}},{key:"canPlayType",value:function(e){var t=document.createElement("video").canPlayType(e)||"";return(/Android (4\.[1-9]|[5-6])/.test(navigator.userAgent)||/Silk\/3/.test(navigator.userAgent))&&e===L.mimeTypes.m3u8&&(t="maybe"),"probably"===t&&/video\/f4m|x-flv/.test(e)&&/UCBrowser/.test(navigator.userAgent)&&(t=""),t}},{key:"getPaused",value:function(){return this.data.paused}},{key:"getSeeking",value:function(){return this.data.seeking}},{key:"getCurrentTime",value:function(){return this.data.currentTime}},{key:"setCurrentTime",value:function(e){if(e!==this.data.currentTime)return this.data.currentTime=e,this.getStarted()&&this.seek(e),e}},{key:"getCurrentTimeUTC",value:function(){var e=this.facade.retrieveProxy(ue.NAME),t=e.getValueOf("startDate"),n=0;return null!=t&&(n=Math.round(t+1e3*this.getCurrentTime())),n}},{key:"toUTC",value:function(e){if(!isFinite(e))return e;var t=this.getCurrentTimeUTC();if(0===t)return e;var n=this.getCurrentTime(),i=Math.round(1e3*(e-n));return t+i}},{key:"fromUTC",value:function(e){if(!isFinite(e))return e;var t=this.getCurrentTimeUTC();if(0===t)return e;var n=this.getCurrentTime(),i=(e-t)/1e3;return n+i}},{key:"seek",value:function(){var e=this,t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.data.currentTime;return new Promise(function(n,i){try{var r=e.getMediaElement(),a=function(){e.facade.timers.setTimeout(n,10,t)};r.once("seeked",a),r.currentTime=t;var o=navigator.userAgent;if(/Android.*Chrome/.test(o))var s=e.facade.timers.setInterval(function(){Math.round(r.currentTime)===Math.round(t)&&(e.facade.timers.clearInterval(s),r.dispatchEvent(new CustomEvent("seeked")))},10)}catch(e){i(e)}})}},{key:"goLive",value:function(){var e=this.getMediaElement(),t=Infinity===e.duration?e.seekable.end(0):e.duration;e.currentTime=t}},{key:"getVolume",value:function(){var e=this.getMediaElement();return e.muted===!0?0:e.volume}},{key:"setVolume",value:function(e,t){return this.getMuted()&&e>0?this.setMuted(!1,!1):this.getMuted()||0!==e||this.setMuted(!0,!1),this.sendNotification(J.VOLUME_CHANGE,this.getMediaElement().volume=e,t),e}},{key:"getMuted",value:function(){return this.data.muted}},{key:"setMuted",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=arguments[2];if(this.data.muted!==e){this.data.muted=e;var i=this.data.volume;return this.data.muted===!0&&(this.data.volume=this.getVolume(),i=0),this.getMediaElement().muted=e,t===!0&&(this.sendNotification(J.CHANGE_VOLUME,i),this.sendNotification(J.VOLUME_CHANGE,i,n)),this.sendNotification(J.MUTE_CHANGE,this.data.muted),e}}},{key:"getDuration",value:function(){return this.data.duration}},{key:"play",value:function(){var e=this;if(this.sendNotification(J.WAITING),this.data.started!==!0){if(this.data.started=!0,this.setEnabled(!0),this.playWhenLoaded=!0,this.metadataloaded===!1)return}else if(this.data.loading===!0)return void(this.playWhenLoaded=!0);this.getPaused()&&this.sendNotification(J.RESUME),Promise.resolve(this.getMediaElement().play()).catch(function(t){return U.value(!0).then(function(t){return e.sendNotification(J.AUTOPLAY_BLOCKED,{threshold:t,policy:e.facade.autoplayPolicy})})})}},{key:"pause",value:function(){this.data.paused=!0,this.getMediaElement().pause()}},{key:"getSrc",value:function(){return this.facade.mediaProxy.getSrc()}},{key:"init",value:function(){this.data.loading=!0,this.playWhenLoaded=!1,this.metadataloaded=!1;var e=this.getMediaElement();this.resume.id=e.once(this.resume.event,this.resume.listener),e.addEventListener("loadedmetadata",this.handlers.loadedmetadata),e.addEventListener("durationchange",this.handlers.durationchange),e.addEventListener("canplaythrough",this.handlers.canplaythrough),e.addEventListener("webkitneedkey",this.onneedkey),e.addEventListener("error",this.handlers.error),this.applyTextTrackHandlers(!0),this.applySrc()}},{key:"preload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.facade.getPreload();if(e!==B.NONE){var t=this.getMediaElement();t.preload=e,this.setEnabled(!0)}}},{key:"load",value:function(){var e=this.getMediaElement(),t=L.getIOSversion()||[];L.isIPad()&&t[0]<8?this.facade.timers.setTimeout(e.load.bind(e),100):e.load()}},{key:"unload",value:function(){}},{key:"applySrc",value:function(){var e=this.getSrc();if(null==e||""===e)return void this.sendNotification(J.ERROR,"The value of src is not supported: "+value);var t=this.getMediaElement();t.src=e;var n=t.muted;n===!0&&(this.data.muted=!0),this.load()}},{key:"setQuality",value:function(e){}},{key:"getQuality",value:function(){}},{key:"getQualityLevels",value:function(){return[]}},{key:"getQualityMode",value:function(){}},{key:"setQualityMode",value:function(e){}},{key:"destroy",value:function(){this.applyHandlers(!1);var e=this.getMediaElement();e.removeEventListener(this.resume.event,e[this.resume.id]),e.removeEventListener("webkitneedkey",this.onneedkey),null!=e.textTracks&&e.textTracks.removeEventListener("addtrack",this.textTrackHandlers.addtrack)}},{key:"onneedkey",value:function(e){var t=this,n=e.target,i=L.getKeySystem(),r=this.facade.mediaProxy.getKeys()[i],a=this.facade.fps,o=a.allowKeyErrorRetries===!1;if(null!=r&&"com.apple.fps.1_0"===i){if(this.keyErrored&&o)return void this.getMediaElement().removeEventListener("webkitneedkey",this.onneedkey);var s=e.initData,l=a.extractContentId(s,r),u=a.extractServerUrl(s,r);a.requestCertificate(r).then(function(e){return a.concatInitDataIdAndCertificate(s,l,e)}).then(function(e){if(!WebKitMediaKeys.isTypeSupported(i,"video/mp4"))throw"Key System not supported";if(null==n.webkitKeys&&n.webkitSetMediaKeys(new WebKitMediaKeys(i)),null==n.webkitKeys)throw"Could not create MediaKeys";var o=n.webkitKeys.createSession("video/mp4",e);if(null==o)throw"Could not create key session";o.addEventListener("webkitkeymessage",function(e){a.requestLicense(e.message,l,u,r).then(function(e){o.update(e)}).catch(function(e){o.close(),t.keyErrored=!0,t.facade.logger.error("[AMP DRM] A key request error was encountered.",e)})}),o.addEventListener("webkitkeyadded",function(e){t.facade.logger.log("[AMP DRM] Decryption key was added to session.")}),o.addEventListener("webkitkeyerror",function(e){t.sendNotification(J.ERROR,{message:"A decryption key error was encountered for key system "+i,detail:e}),o.close(),t.keyErrored=!0,t.facade.logger.log("[AMP DRM] A decryption key error was encountered.",e)})}).catch(function(e){t.facade.logger.error(e)})}}}],[{key:"NAME",get:function(){return"PlaybackProxy"}}]),t}(puremvc.Proxy),de=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{},n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{};babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return i.playbackCoreName="default",i.config=e,i.plugin=n,i.supportedTypes=null,null!=i.config.types&&(i.supportedTypes=i.config.types),i.temporalTypes=["vod","live","ondemand"],i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"renderer",value:function(){var e=this,t=this.playbackCoreName,n=function(t){return e.canPlayMedium(t.medium)===!0&&e.canPlayTemporalType(t.temporalType)===!0&&""!==e.canPlayType(t.type)&&""!==e.canPlayDRM(t.keys)},i=function(t){return Promise.resolve(e)};return{id:t,canPlay:n,factory:i}}},{key:"onRegister",value:function(){this.mediaProxy=this.facade.retrieveProxy(_e.NAME)}},{key:"getPlaybackCoreName",value:function(){return this.playbackCoreName}},{key:"getSupportedTypes",value:function(){return this.supportedTypes||[]}},{key:"setSupportedTypes",value:function(e){return this.supportedTypes=e,e}},{key:"getTemporalTypes",value:function(){return this.temporalTypes||[]}},{key:"getDecryptionTypes",value:function(){return this.decryptionTypes||[]}},{key:"setTemporalTypes",value:function(e){return this.temporalTypes=e,e}},{key:"canPlayTemporalType",value:function(e){return this.getTemporalTypes().indexOf(e)!==-1}},{key:"canPlayType",value:function(e){return null!=this.supportedTypes?this.getSupportedTypes().indexOf(e)!==-1?"maybe":"":babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canPlayType",this).call(this,e)}},{key:"canPlayDRM",value:function(e){var t=this.getDecryptionTypes(),n=L.getKeySystem();return null==e||"com.apple.fps.1_0"===n?"maybe":T.find(Object.keys(e),T.filter(function(e){return t.indexOf(e)!==-1}),T.map(function(e){return e===n||"org.w3.clearkey"===e}),T.map(function(e){return e?"maybe":""}))||""}}]),t}(he),fe=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.playbackCoreName="dvr",e.interval=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"ondurationchange",value:function(e){this.updateDuration()}},{key:"ontimeupdate",value:function(e){this.updateCurrentTime()}},{key:"onplay",value:function(e){this.stopTimer(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onplay",this).call(this,e)}},{key:"onplaying",value:function(e){this.stopTimer(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onplaying",this).call(this,e)}},{key:"onpause",value:function(e){this.startTimer(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onpause",this).call(this,e)}},{key:"canPlayTemporalType",value:function(e){return"dvr"===e}},{key:"getDuration",value:function(){var e=this.getMediaElement();return Infinity===e.duration&&this.updateDuration(),this.data.duration}},{key:"getStartTime",value:function(){return this.getMediaElement().seekable.start(0)}},{key:"getFragmentDuration",value:function(){var e=this.facade.retrieveProxy(ue.NAME),t=e.getValueOf("fragmentDuration");return t||10}},{key:"getLiveTime",value:function(){return this.getDuration()-this.getFragmentDuration()}},{key:"isLive",value:function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()}},{key:"seek",value:function(e){var n=this;return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seek",this).call(this,e+this.getStartTime()).then(function(e){n.sendNotification(J.IS_LIVE,n.isLive())})}},{key:"updateCurrentTime",value:function(){var e=this.getMediaElement().seekable;if(0!==e.length){var t=this.getMediaElement().currentTime;this.data.currentTime=t-e.start(0),this.sendNotification(J.TIME_CHANGE,{currentTime:this.data.currentTime}),this.mediaProxy.setIsLive(this.isLive())}}},{key:"updateDuration",value:function(){var e=this.getMediaElement().seekable;0!==e.length&&(this.data.duration=e.end(0)-e.start(0),this.sendNotification(J.CHANGE_DURATION,this.data.duration))}},{key:"startTimer",value:function(){this.interval=this.facade.timers.setInterval(this.updateCurrentTime.bind(this),1e3)}},{key:"stopTimer",value:function(){null!=this.interval&&(this.facade.timers.clearInterval(this.interval),this.interval=null,this.updateCurrentTime())}}]),t}(de),pe=function(){function e(t){babelHelpers.classCallCheck(this,e),this.element=t,this.prefix="amp-"}return babelHelpers.createClass(e,[{key:"contains",value:function(e){return this.constructor.contains(e,this.element,this.prefix)}},{key:"add",value:function(e){this.constructor.add(e,this.element,this.prefix)}},{key:"remove",value:function(e){this.constructor.remove(e,this.element,this.prefix)}},{key:"toggle",value:function(e){return this.constructor.contains(e,this.element,this.prefix)}}],[{key:"contains",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";return t.classList.contains(n+e)}},{key:"add",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.classList.add(n+e)}},{key:"remove",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.classList.remove(n+e)}},{key:"toggle",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"";t.classList.toggle(n+e)}}]),e}(),ye=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"create",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:"div",i=arguments[3];"string"==typeof n&&(n=document.createElement(n));var r=new pe(n);if(null!=e&&("string"==typeof e&&(e=[e]),e.forEach(function(e){return r.add(e)})),n._classList=r,null!=i&&(n.textContent=i),null!=t){var a=void 0;null!=t.getViewComponent&&(a=t.getViewComponent()),null!=a&&(t=a),t.appendChild(n)}return n}},{key:"createElement",value:function(t,n,i){t&&"object"==("undefined"==typeof t?"undefined":babelHelpers.typeof(t))&&(n=t,i=t.children,t=t.type),t||(t="div"),n||(n={}),i||(i=[]);var r=document.createElement(t),a=["innerHTML","className"],o=["type","children"];return T.each(n,function(e,t){if(!o.includes(t)){if(a.includes(t))return r[t]=e;"style"===t&&e&&"object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))&&(e=I.toCSS(e)),r.setAttribute(t,e)}}),i.forEach(function(t){var n="undefined"==typeof t?"undefined":babelHelpers.typeof(t);if(null!=t){if("string"===n)t=document.createTextNode(t);else{if("object"!==n)return;if(t instanceof Array)return;t=e.createElement(t)}r.appendChild(t)}}),r}},{key:"bindEvents",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:["onRemove","onRegister"];T.each(t,function(i,r){!n.includes(r)&&/^on/.test(r)&&i&&i.bind&&(e[r]=i.bind(t))})}}]),e}(),Ae=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data={default:e.defaults.language,language:e.language,locales:[F.locales]},n.defaults={},n.locale=null,n.localeId=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initialize",value:function(e){var t=this;return null!=this.facade.config.locales&&this.addLocales(this.facade.config.locales,!1),e.forEach(function(e){null!=t.facade[e].locales&&t.addLocales(t.facade[e].locales,!1)}),this.compileLocale(this.data.default).then(function(e){return t.defaults=e,t.setLanguage(t.data.language)})}},{key:"getLanguage",value:function(){return this.data.language}},{key:"setLanguage",value:function(e){var t=this;return this.compileLocale(e).then(function(n){t.data.language=e,t.localeId=e.toLowerCase(),t.locale=t.facade.l10n=n,t.sendNotification(J.LANGUAGE_CHANGE,e)})}},{key:"compileLocale",value:function(e){var t=this;return new Promise(function(n,i){if(!e)return n({});var r=e.toLowerCase(),a=t.getLocaleIdShort(r),o=function(e){return e[r]||e[a]},s=function(e){return null!=e},l=function(e){return"string"!=typeof e?e:dt.addResource({src:t.facade.evaluatePaths(e),type:L.mimeTypes.json}).then(function(e){return e.data}).catch(function(e){return{}})},u=T.transform(t.data.locales,T.filter(s),T.map(o),T.filter(s),T.map(l));Promise.all(u).then(function(e){return n(Object.assign.apply(Object,[{}].concat(babelHelpers.toConsumableArray(e))))})})}},{key:"getLocaleId",value:function(){return this.localeId}},{key:"getLocaleIdShort",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.localeId;return(e||"").split("-").shift()}},{key:"getLocales",value:function(){return this.data.locales}},{key:"setLocales",value:function(e){return this.data.locales=e,e}},{key:"addLocales",value:function(e){var t=this,n=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];return null==e?Promise.resolve():(e instanceof Array||(e=[e]),e.forEach(function(e){if("object"===("undefined"==typeof e?"undefined":babelHelpers.typeof(e))){var n={};T.each(e,function(e,t){return n[t.toLowerCase()]=e}),t.data.locales.push(n)}}),n===!1?Promise.resolve():this.setLanguage(this.getLanguage()))}},{key:"getString",value:function(e,t){if(null!=e){if(!this.data.language)return e;try{var n=e.replace(/^MSG_/,""),i="MSG_"+n,r=this.defaults,a=this.locale||r;if(null==a)return e;var o=a[i]||a[n]||r[i]||r[n]||e;return o=this.facade.evaluateBindings(o,t)}catch(t){return e}}}},{key:"getLanguageString",value:function(e){if("string"!=typeof e||null==e||""===e)return"";var t="MSG_"+e.toUpperCase(),n=this.getString(t);return n===t&&(e=this.getLocaleIdShort(e),t="MSG_"+e.toUpperCase(),n=this.getString(t)),n}}],[{key:"NAME",get:function(){return"LocalizationProxy"}}]),t}(puremvc.Proxy),ve=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.mediatorName=e,i.config=null,i.classList=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var n=this.facade.player||this.facade;this.config=n.retrieveProxy(Q.NAME),this.classList=new pe(this.viewComponent)}}]),t}(puremvc.Mediator),ge=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.localizationManager=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var n=this.facade.player||this.facade;this.localizationManager=n.retrieveProxy(Ae.NAME)}}]),t}(ve),me=function(e){function t(e,n,i,r){babelHelpers.classCallCheck(this,t);var a=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e||L.createUID()));return a.componentType=n,a.parent=i,a.element=r,a.componentName=null,null!=e&&(a.componentName=e),null==a.mediatorName&&(a.mediatorName=a.createMediatorName()),a.classList=null,a.state=null,a.disabled=!1,a}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){null==this.viewComponent&&(this.viewComponent=this.createViewComponent(this.parent,this.element),this.classList=this.viewComponent._classList,ye.bindEvents(this.viewComponent,this))}},{key:"createViewComponent",value:function(e,t){var n=this.getTypeList();return ye.create(n,e,t)}},{key:"createMediatorName",value:function(){var e=this.getTypeList();return e.push("mediator"),e.push(L.createUID()),e.join("-")}},{key:"getTypeList",value:function(){var e=[];return null!=this.componentName&&e.push(this.componentName),null!=this.componentType&&(e=e.concat(this.componentType)),e}},{key:"create",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this,n=arguments[2],i=arguments[3];return t===!1&&(t=null),ye.create(e,t,n,i)}},{key:"createText",value:function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:this,i=arguments[3];return ye.create(e,n,i,t)}},{key:"setState",value:function(e){if(e!==this.state)return null!=this.state&&this.classList.remove(this.state),this.state=e,null!=this.state&&this.classList.add(this.state),e}},{key:"getState",value:function(){return this.state}},{key:"setDisabled",value:function(e){if(e!==this.disabled)return this.disabled=e,this.disabled?this.classList.add("disabled"):this.classList.remove("disabled"),e}},{key:"getDisabled",value:function(){return this.disabled}}]),t}(ge),be=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"media-element",null,n));return i.mediatorName=i.componentType+"-mediator",i.created=!1,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){this.created!==!0&&(this.created=!0,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this))}}]),t}(me),ke=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.playbackCoreName="audio",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){var e=new be("html5","audio");this.sendNotification(J.PLAYBACK_CORE_CHANGE,e),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this)}},{key:"onRemove",value:function(){this.facade.createMediaElement()}},{key:"canPlayMedium",value:function(e){return"audio"===e}},{key:"canPlayType",value:function(e){return/audio/.test(e)?"maybe":/mpegURL/.test(e)&&(L.isIOS()||L.getSafariVersion()!==-1)?"maybe":""}}]),t}(de),Ee=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));if(i.defaultPlaybackCore=e,i.activePlaybackCore=null,i.renderers=[],null==i.getPlaybackOrder){var r=function(e){var t=n.playbackOrder||[];return t.length>0?t:/Edge|Android/.test(navigator.userAgent)?["audio","hls","dash","dvr","default"]:void 0};i.getPlaybackOrder=n.getPlaybackOrder||r}return i.canPlay=i.canPlay.bind(i),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.registerPlaybackCore(new fe),this.registerPlaybackCore(this.defaultPlaybackCore),this.registerPlaybackCore(new ke),this.activePlaybackCore=this.defaultPlaybackCore}},{key:"ready",value:function(){if("function"==typeof this.getPlaybackOrder){var e=this.getPlaybackOrder(this.renderers.map(function(e){return e.id}));null!=e&&(this.renderers=this.renderers.sort(function(t,n){return t=e.indexOf(t.id),n=e.indexOf(n.id),t===n?0:t===-1&&n!==-1?1:t!==-1&&n===-1?-1:t-n}))}}},{key:"getActivePlaybackCore",value:function(){return this.activePlaybackCore}},{key:"registerPlaybackCore",value:function(e){this.registerRenderer(e.renderer())}},{key:"registerRenderer",value:function(e){var t=e.id;null==this.renderers[t]&&(this.renderers.push(e),this.renderers[t]=e)}},{key:"retrieveRenderer",value:function(e){return this.renderers[e]}},{key:"retrieveRendererFor",value:function(e){var t=this,n=T.transform(this.renderers,T.filter(function(t){return t.canPlay(e)}),T.map(function(e){return e.factory}));return L.first(n,this.facade).then(function(e){return e===t.facade?null:e})}},{key:"removeRenderer",value:function(e){if(null!=this.renderers[e]){var t=this.renderers[e],n=this.renderers.indexOf(t);return this.renderers.splice(n,1),delete this.renderers[e],t}}},{key:"setPlaybackCore",value:function(e){var t=this;return this.retrieveRendererFor(e).then(function(e){if(null==e)throw t.facade.createMediaError(MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED);var n=t.facade.retrieveProxy(he.NAME);return n!==e?("function"==typeof n.destroy&&n.destroy(),t.facade.removeProxy(he.NAME),t.facade.registerProxy(e),e.setData(n.getData())):"function"==typeof n.unload&&n.unload(),t.activePlaybackCore=e,e})}},{key:"canPlay",value:function(e){return this.renderers.some(function(t){return t.canPlay(e)})}}],[{key:"NAME",get:function(){return"PlayerProxy"}}]),t}(puremvc.Proxy),_e=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.data={metadata:{}},n.applyDefaults=n.applyDefaults.bind(n),n.started=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getData",value:function(){var e=L.clone(babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getData",this).call(this));return null==e.authorization&&(e.authorization=L.clone(this.facade.security.data)),e}},{key:"setData",value:function(e){return null!=this.data&&this.facade.getCurrentTime()<this.facade.getDuration()&&this.sendNotification(J.MEDIA_SEQUENCE_ABORTED),this.started=!1,
this.setAutoplay(e.autoplay),this.setType(e.type),this.setIsLive(e.isLive),this.setTemporalType(e.temporalType),null!=e.source&&this.setSource(e.source),null!=e.src&&this.setSrc(e.src),this.setTitle(e.title),this.setDuration(e.duration),this.setPoster(e.poster),this.setGUID(e.guid),this.setLink(e.link),this.setEmbed(e.embed),this.setWidth(e.width),this.setHeight(e.height),this.setCategory(e.category),this.setStartTime(e.startTime),this.setDescription(e.description),this.setStatus(e.status),this.setCategory(e.category),this.setMetadata(e.metadata),this.setAuthorization(e.authorization),this.setMedium(e.medium),this.setPubDate(e.pubDate),this.setTrack(e.track),this.setScenes(e.scenes),this.setKeys(e.keys),this.setCues(e.cues),this.setRestriction(e.restriction),this.data}},{key:"applyDefaults",value:function(e){null==e.medium&&(e.medium=/audio/.test(e.type)?"audio":"video"),null==e.temporalType&&(e.temporalType="vod"),e.isLive="live"===e.temporalType||"dvr"===e.temporalType;var t=e.source;if(null==e.src&&t){var n=this.facade.retrieveProxy(Ee.NAME);if(null!=n){var i=L.selectSource(e,n.canPlay);i&&i.src&&(e.src=i.src,e.type=i.type)}}null==e.type&&(e.type=L.getMimeType(e.src));var r=e.scenes;return null!=r&&r.forEach(function(e,t){var n=void 0;e.start=isNaN(n=L.flattenTimecode(e.sceneStartTime))?0:n,e.end=isNaN(n=L.flattenTimecode(e.sceneEndTime))?0:n,e.title=e.sceneTitle||"",e.description=e.sceneDescription||"",e.position=t+1}),null==e.startTime&&(e.startTime=0),null==e.status&&(e.status={}),null==e.restriction&&(e.restriction=[]),null==e.track&&(e.track=[]),null==e.metadata&&(e.metadata={}),e.originalSrc=e.src,e}},{key:"updateData",value:function(e){var t=this;T.each(e,function(e,n){n in t.data&&(t.data[n]=e)})}},{key:"getGUID",value:function(){return this.data.guid}},{key:"setGUID",value:function(e){return this.data.guid=e}},{key:"getLink",value:function(){return this.data.link}},{key:"setLink",value:function(e){return this.data.link=e}},{key:"getStartTime",value:function(){return this.data.startTime}},{key:"setStartTime",value:function(e){return this.data.startTime=e}},{key:"getEmbed",value:function(){return this.data.embed}},{key:"setEmbed",value:function(e){return this.data.embed=e}},{key:"getAutoplay",value:function(){return this.data.autoplay}},{key:"setAutoplay",value:function(e){return this.data.autoplay=e}},{key:"getPubDate",value:function(){return this.data.pubDate}},{key:"setPubDate",value:function(e){return this.data.pubDate=e}},{key:"getCategory",value:function(){return this.data.category}},{key:"setCategory",value:function(e){return this.data.category=e}},{key:"getStatus",value:function(){return this.data.status}},{key:"setStatus",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};return this.data.status=e}},{key:"getSrc",value:function(){return this.facade.security.createURL(this.data.src)}},{key:"setSrc",value:function(e){return this.data.src=e}},{key:"getType",value:function(){return this.data.type}},{key:"setType",value:function(e){return this.data.type=e}},{key:"getMedium",value:function(){return this.data.medium}},{key:"setMedium",value:function(e){if(e!==this.data.medium)return this.data.medium=e,this.facade.retrieveProxy(oe.NAME).setMedium(e)}},{key:"getMetadata",value:function(){return this.data.metadata}},{key:"setMetadata",value:function(e){return this.data.metadata=e}},{key:"getSource",value:function(){return this.data.source}},{key:"setSource",value:function(e){return this.data.source=e}},{key:"getTrack",value:function(){return this.data.track}},{key:"setTrack",value:function(e){return this.data.track=e}},{key:"getTitle",value:function(){return this.data.title}},{key:"setTitle",value:function(e){return this.data.title=e}},{key:"getWidth",value:function(){return this.data.width}},{key:"setWidth",value:function(e){return this.data.width=e}},{key:"getHeight",value:function(){return this.data.height}},{key:"setHeight",value:function(e){return this.data.height=e}},{key:"getDescription",value:function(){return this.data.description}},{key:"setDescription",value:function(e){return this.data.description=e}},{key:"getCategory",value:function(){return this.data.category}},{key:"setCategory",value:function(e){return this.data.category=e}},{key:"getDuration",value:function(e){return this.data.duration}},{key:"setDuration",value:function(e){if(e&&"live"!==this.data.temporalType){var t=navigator.userAgent;if(1!==e||!/Android/.test(t)||/Android.*Chrome/.test(t))return e!==this.data.duration&&(this.data.duration=e,this.sendNotification(J.TIME_CHANGE,{duration:e})),Infinity===e&&this.setTemporalType("live"),e}}},{key:"getPoster",value:function(e){return this.data.poster}},{key:"setPoster",value:function(e){this.data.poster=e}},{key:"getIsLive",value:function(){return this.data.isLive}},{key:"setIsLive",value:function(e){if(e!==this.data.isLive)return this.data.isLive=e,this.sendNotification(J.IS_LIVE,e),e}},{key:"getTemporalType",value:function(){return this.data.temporalType||"vod"}},{key:"setTemporalType",value:function(e){if(e!==this.data.temporalType){var t=this.data.temporalType;this.data.temporalType=e,this.sendNotification(J.TEMPORAL_TYPE_CHANGE,{previous:t,value:e})}}},{key:"getScenes",value:function(){return this.data.scenes}},{key:"setScenes",value:function(e){return this.data.scenes=e}},{key:"getCues",value:function(){return this.data.cues}},{key:"setCues",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];if(this.data.cues!==e)return this.data.cues=e,this.sendNotification(J.CUES_CHANGE,e),e}},{key:"getScene",value:function(e){var t=this.data.scenes;if(null!=t)return t.find(function(t){return t.start<=e&&e<t.end})}},{key:"getKeys",value:function(){return this.data.keys}},{key:"setKeys",value:function(e){this.data.keys=e}},{key:"getAuthorization",value:function(){return this.data.authorization}},{key:"setAuthorization",value:function(e){this.data.authorization=e}},{key:"getRestriction",value:function(){return this.data.restriction}},{key:"setRestriction",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];this.data.restriction=e}}],[{key:"NAME",get:function(){return"MediaProxy"}}]),t}(puremvc.Proxy),Te=function(e){function t(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:[];babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return n.list=e,n.onchange=null,n.handlers={change:n.changeHandler.bind(n)},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"changeHandler",value:function(e){this.dispatchEvent(e)}},{key:"add",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1];this.list.push(e),e.addEventListener("change",this.handlers.change),t===!0&&this.dispatch("addtrack",e)}},{key:"remove",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=this.list.indexOf(e);if(n!==-1)return this.list.splice(n,1),e.removeEventListener("change",this.handlers.change),t===!0&&this.dispatch("removetrack",e),e}},{key:"clear",value:function(){var e=this;0!==this.list.length&&(T.each(this.list,function(){e.remove(e[e.list.length-1],!1)}),this.dispatch("removetrack"))}},{key:"getTrackById",value:function(e){return this.list.find(function(t){return t.id===e})}},{key:"some",value:function(e){return this.list.some(e)}}]),t}(a),Ce=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.startTime,i=arguments[2],r=arguments[3],a=arguments.length>4&&void 0!==arguments[4]?arguments[4]:{};babelHelpers.classCallCheck(this,e),this.startTime=t,this.endTime=n,this.data=i,this.id=r,this.style=a}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r,a){return new e(t,n,i,r,a)}}]),e}(),Ne=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).apply(this,arguments))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"text",set:function(e){this.data.text=e},get:function(){return this.data.text}},{key:"html",set:function(e){this.data.html=e},get:function(){return this.data.html}},{key:"raw",get:function(){return this.data.raw}}],[{key:"create",value:function(e,n,i,r,a){return new t(e,n,i,r,a)}}]),t}(Ce),Pe=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"createTextContent",value:function(e,t){var n=/[\&<>]/.test(t)?e.createCDATASection(t):e.createTextNode(t);return n}},{key:"updateTextContent",value:function(t,n){var i=e.createTextContent(t.ownerDocument,n);return t.removeChild(t.childNodes[0]),t.appendChild(i),t}},{key:"serialize",value:function(e){if(null!=e){if("string"==typeof e)return e;try{var t=new XMLSerializer;return t.serializeToString(e)}catch(e){}}}},{key:"parse",value:function(e){var t=new DOMParser;return t.parseFromString(e,"application/xml")}}]),e}(),Se=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"parse",value:function(e){var t,n,i,r,a,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.create({kind:"captions",type:L.mimeTypes.ttml});return"string"==typeof e&&(e=Pe.parse(e)),r=Array.prototype.slice.call(e.querySelectorAll("styling style")),r.forEach(function(e,t,n){var i,r,a;a="",r=e.getAttribute("id")||e.getAttribute("xml:id"),i=Array.prototype.slice.call(e.attributes),i.forEach(function(e,t,n){if("tts"===e.prefix)return a+=L.toHyphenated(e.localName)+":"+e.nodeValue+";"}),o.styles[r]=a}),i=Array.prototype.slice.call(e.querySelectorAll("body [style]")),i.forEach(function(e,t,n){var i;i=e.getAttribute("style"),e.setAttribute("style",o.styles[i])}),a=e.querySelector("tt"),n=a.getAttribute("lang")||a.getAttribute("xml:lang"),void 0!==o.language&&null!==o.language||(o.language=n),t=Array.prototype.slice.call(e.querySelectorAll("body p[begin]")),t.forEach(function(e,n,i){var r,a,s,l,u,c,h;u=e.getAttribute("begin"),e.removeAttribute("begin"),null!=e.getAttribute("end")?(s=e.getAttribute("end"),e.removeAttribute("end")):null!=t[n+1]&&(s=t[n+1].getAttribute("begin")),r=e.getAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign"),null!=r&&(c={align:"center"===r?"middle":r},e.removeAttributeNS("http://www.w3.org/ns/ttml#styling","textAlign")),h=Pe.serialize(e),h=h.replace(/\s*xmlns="[^"]*"/,""),l=h,h=h.replace(/^<p[^>]*>/,""),h=h.replace(/<\/p>$/,""),h=h.replace(/<br\/>/,"\n"),h=h.replace(/<span style="([^"]*)"/,"<c.$1"),h=h.replace(/<\/span>/,"</c>"),a=Ne.create(L.flattenTimecode(u),L.flattenTimecode(s),{text:h,html:l},""+n,c),o.cues.push(a)}),o}}]),e}(),Oe=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"parse",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.create({kind:"captions",type:L.mimeTypes.srt});e=e.replace(/\r/g,"");var n=e.split("\n\n");return T.each(n,function(e){var n=e.split("\n");try{var i=(n[0],n[1].match(/([0-9:\,]+)\s*-->\s*([0-9:\,]+)/).slice(1)),r=L.flattenTimecode(i[0]),a=L.flattenTimecode(i[1]),o=n.slice(2),s=Ne.create(r,a,{text:o.join("\n"),html:"<p>"+o.join("<br />")+"</p>"});t.cues.push(s)}catch(e){w.instance.warn("SRT Parsing Warning")}}),t}}]),e}(),Me=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,[{key:"parseCaption",value:function(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},r=t.trim().split("\n"),a=/([0-9:\.]+)\s*-->\s*([0-9:\.]+)([^\n]*)/,o=/\s*([A-Za-z]+)\s*:\s*([\w\-\%]+)/g;try{a.test(r[0])||(n=r.shift());var s=r[0].match(a).slice(1),l=s[2],u=L.flattenTimecode(s[0]),c=L.flattenTimecode(s[1]),h=r.slice(1);null!=l&&l.replace(o,function(e,t,n){return i[t]=n,""});var d=e.createHTML(h),f=h.join("\n"),p=Ne.create(u,c,{text:f,html:d,raw:t},""+n,i);return Object.assign(p,i),p}catch(e){w.instance.error("WebVTT Parse Error",e)}}},{key:"parse",value:function(e){var t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:Le.create({kind:"captions",type:L.mimeTypes.vtt});e=e.replace(/\r/g,"");var i=e.split("\n\n"),r=0;return i.forEach(function(e){if(!/^WEBVTT/.test(e)&&""!=e&&!/^NOTE/.test(e)&&!/^STYLE/.test(e)){var i=t.parseCaption(e,++r);n.cues.push(i)}}),n}}],[{key:"createHTML",value:function(e){return"string"==typeof e&&(e=e.split(/\n|\r/)),"<p>"+e.join("<br />")+"</p>"}}]),e}(),Re={"application/ttml+xml":new Se,"application/x-subrip":new Oe,"text/vtt":new Me,undefined:new Se},He=function(e){function t(e){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[];babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return i.cues=n,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getCueAt",value:function(e){return this.cues.find(function(t){return t.startTime<=e&&t.endTime>=e})}}],[{key:"create",value:function(e){return new t(e)}}]),t}(ce),Le=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,{kind:e.kind,label:e.label,language:e.srclang}));i.src=e.src,i.type=e.type,i.cues=e.cues||[],i.styles=e.styles||{},i.activeCues=[],i.isLive=/^live/.test(i.type);var r=n;return i.src&&!i.isLive&&(r=function(){return L.request(i.src).then(function(e){try{Re[i.type].parse(e.response,i)}catch(e){return i.dispatch("error","Could not parse caption track: "+i.src),void w.instance.error("Could not parse caption track: "+i.src)}"function"==typeof n&&n(i)}).catch(function(e){i.dispatch("error","Could not load caption track: "+e+", "+i.src),w.instance.error("Could not load caption track: "+e+", "+i.src)})}),null!=r&&Promise.resolve(i).then(r),i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"create",value:function(e,n){return new t(e,n)}}]),t}(He),Ie=function(e){function t(e,n){var i;babelHelpers.classCallCheck(this,t);var r=dt.getResourceManager(),a=function(){var e=document.createElement("a");e.href=i.src;var t=e.protocol+"//"+e.hostname,a=t+e.pathname.split("/").slice(0,-1).join("/")+"/";i.cues.forEach(function(e){var n=e.text.split("#"),i=babelHelpers.slicedToArray(n,2),o=i[0],s=i[1],l=o;/^(https?:)?\/\//.test(l)||(l=/^\//.test(l)?t+l:a+l);var u=s.split("="),c=u[0],h=u[1].split(","),d={background:"url("+l+") 0px 0px no-repeat"};return T.each(c,function(e,t){var n=h[t];switch(e){case"w":d.width=n+"px";break;case"h":d.height=n+"px";break;case"x":d.background=d.background.replace(") 0px",") -"+n+"px");break;case"y":d.background=d.background.replace("0px n","-"+n+"px n")}}),e.style=d,r.add({src:l,type:"image"})}),"function"==typeof n&&n(i)};return i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,a))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"create",value:function(e){return new Promise(function(n,i){var r;try{return new t(e,function(e){return n(e)})}catch(e){return r=e,i(r)}})}}]),t}(Le),we=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,null,{}));return e.data.audioTracks=new Te,e.data.videoTracks=new Te,e.data.textTracks=new Te,e.data.previewTracks=new Te,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"clear",value:function(){this.data.audioTracks.clear(),this.data.videoTracks.clear(),this.data.textTracks.clear(),this.data.previewTracks.clear()}},{key:"setMedia",value:function(e){var t=this,n=e.track||[];n.forEach(function(e){"preview"!==e.kind&&"thumbnail"!==e.kind||t.getPreviewTracks().add(new Ie(e))})}},{key:"getAudioTracks",value:function(){return this.data.audioTracks}},{key:"getVideoTracks",value:function(){return this.data.videoTracks}},{key:"getTextTracks",value:function(){return this.data.textTracks}},{key:"getPreviewTracks",value:function(){return this.data.previewTracks}}],[{key:"NAME",get:function(){return"TracksProxy"}}]),t}(puremvc.Proxy),De=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"player",null,n));return i.layers=[],i.core=null,i.medium=null,i.ready=!1,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this);var e=L.getDevice();null!=e&&this.classList.add(e),L.isTouchDevice()&&this.classList.add("touch")}},{key:"listNotificationInterests",value:function(){return[J.DISPLAY_STATE_CHANGE,J.ACTIVE_STATE_CHANGE,J.PLAY_STATE_CHANGE,J.ADD_APPLICATION_STATE,J.REMOVE_APPLICATION_STATE,J.MEDIUM_CHANGE,J.DURATION_CHANGE,J.TEMPORAL_TYPE_CHANGE,J.IS_LIVE,J.ADD_LAYER,J.REMOVE_LAYER,J.STARTUP]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();switch(t){case J.ACTIVE_STATE_CHANGE:case J.PLAY_STATE_CHANGE:case J.DISPLAY_STATE_CHANGE:case J.MEDIUM_CHANGE:var i=n,r=i.value,a=i.previous;null!=a&&this.classList.contains(a)&&this.classList.remove(a),null!=r&&this.classList.add(r);break;case J.ADD_APPLICATION_STATE:if(null==n)return;this.classList.add(n);break;case J.REMOVE_APPLICATION_STATE:this.classList.remove(n);break;case J.TEMPORAL_TYPE_CHANGE:n.previous&&this.sendNotification(J.REMOVE_APPLICATION_STATE,n.previous),n.value&&this.sendNotification(J.ADD_APPLICATION_STATE,n.value);break;case J.IS_LIVE:n===!0?this.sendNotification(J.ADD_APPLICATION_STATE,"is-live"):this.sendNotification(J.REMOVE_APPLICATION_STATE,"is-live");break;case J.DURATION_CHANGE:n>3600?this.sendNotification(J.ADD_APPLICATION_STATE,"long-form"):this.sendNotification(J.REMOVE_APPLICATION_STATE,"long-form");break;case J.ADD_LAYER:this.addLayer(n);break;case J.REMOVE_LAYER:this.removeLayer(n);break;case J.STARTUP:this.initialize(),this.viewCreated()}}},{key:"initialize",value:function(){var e=this;this.ready=!0,this.layers.forEach(function(t){e.viewComponent.contains(t)||e.viewComponent.appendChild(t)})}},{key:"viewCreated",value:function(){this.sendNotification(J.VIEW_CREATED)}},{key:"addLayer",value:function(e){this.layers.push(e),this.ready&&this.viewComponent.appendChild(e)}},{key:"removeLayer",value:function(e){this.viewComponent.contains(e)&&this.viewComponent.removeChild(e);var t=this.layers.indexOf(e);t>=0&&this.layers.splice(t,1)}}]),t}(me),xe=function(e){function t(e){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"layer"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.registerLayer()}},{key:"onRemove",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRemove",this).call(this),this.removeLayer()}},{key:"registerLayer",value:function(){this.sendNotification(J.ADD_LAYER,this.viewComponent)}},{key:"removeLayer",value:function(){this.sendNotification(J.REMOVE_LAYER,this.viewComponent)}}]),t}(me),Ge=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"overlays"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.ADD_OVERLAY,J.REMOVE_OVERLAY]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();switch(t){case J.ADD_OVERLAY:this.viewComponent.appendChild(n);break;case J.REMOVE_OVERLAY:this.viewComponent.removeChild(n)}}}]),t}(xe),Ue=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"video"));return e.mediator=null,e.mediaElement=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.PLAYBACK_CORE_CHANGE]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();switch(t){case J.PLAYBACK_CORE_CHANGE:null!=this.mediaElement&&this.viewComponent.removeChild(this.mediaElement),null!=this.mediator&&this.facade.removeMediator(this.mediator.getMediatorName());var i=n&&n.getViewComponent;i?(this.facade.registerMediator(n),this.mediator=n,this.mediaElement=this.mediator.getViewComponent()):(this.mediator=null,this.mediaElement=n),null!=this.mediaElement&&(this.facade.setMediaElement(this.mediaElement),this.viewComponent.appendChild(this.mediaElement))}}}]),t}(xe),je={BREAK_START:"adsbreakstart",BREAK_END:"adsbreakend",BREAK_SKIPPED:"adsbreakskipped",AD_CONTAINER_CREATED:"adscontainercreated",AD_LOADED:"adsloaded",AD_MANAGER_LOADED:"adsmanagerloaded",AD_STARTED:"adsstarted",AD_TIME_UPDATE:"adstimeupdate",AD_TIME_REMAINING:"adstimeremaining",AD_DURATION_CHANGE:"adsdurationchange",AD_ENDED:"adsended",AD_ERROR:"adserror",AD_PLAY:"adsplay",AD_PLAYING:"adsplaying",AD_PAUSE:"adspause",AD_PAUSED:"adspaused",AD_RESUME:"adsresume",AD_CLICKED:"adclicked",AD_COMPANION:"adscompanion",FIRST_QUARTILE:"adsfirstquartile",MIDPOINT:"adsmidpoint",THIRD_QUARTILE:"adsthirdquartile",COMPLETE:"adscomplete",CONCRETE:"adsconcrete",LOG:"adslog",REQUEST:"adsrequest",REQUEST_COMPLETE:"adsrequestcomplete",RESPONSE:"adsresponse",SKIPPED:"adsskipped",IMPRESSION:"adsimpression"},Ve=function(e){function t(e){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,"overlay"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.registerOverlay()}},{key:"onRemove",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRemove",this).call(this),this.removeOverlay()}},{key:"registerOverlay",value:function(){this.sendNotification(J.ADD_OVERLAY,this.viewComponent)}},{key:"removeOverlay",value:function(){this.sendNotification(J.REMOVE_OVERLAY,this.viewComponent)}}]),t}(me),Be=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"ads"));return e._hidden=!0,e._container=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.setContainer(this.viewComponent),this.sendNotification(je.AD_CONTAINER_CREATED,this.viewComponent)}},{key:"listNotificationInterests",value:function(){return[je.BREAK_START,je.BREAK_END]}},{key:"getHidden",value:function(){return this._hidden}},{key:"setHidden",value:function(e){return this._hidden=e,this._container&&(this._container.hidden=e),e}},{key:"getContainer",value:function(){return this._container}},{key:"setContainer",value:function(e){return this._container=e,this._container&&(this._container.hidden=this._hidden),e}},{key:"handleNotification",value:function(e){switch(e.getName()){case je.BREAK_START:this.setHidden(!1);break;case je.BREAK_END:this.setHidden(!0)}}}]),t}(Ve),Ye=function(e){function t(e,n){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"doAfter",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1,n=this.facade.player||this.facade;return new Promise(function(i,r){var a=function(){try{e(),i()}catch(e){n.logger.error(e),r(e)}};return n.timers.setTimeout(a,t)})}},{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e);var n=this.facade.player||this.facade;this.applicationState=n.appState,this.media=n.mediaProxy,this.config=n.configuration,this.logger=n.logger,this.bindings=n.bindings,this.params=n.params,this.playerCore=n.playerCore,this.security=n.security,this.tracks=n.tracks,this.localization=n.localization,this.player=n}},{key:"handleNotification",value:function(e){var t=e.getName();"function"==typeof this[t]&&this[t](e.getBody(),e)}},{key:"playback",get:function(){return this.playerCore.getActivePlaybackCore()}}]),t}(puremvc.Mediator),Fe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.START,J.PLAY,J.PAUSE,J.ENDED,J.TOGGLE_PLAY_PAUSE,J.CHANGE_DURATION]}},{key:"play",value:function(e){this.applicationState.getLocked()!==!0&&(e&&this.playback.initialized!==!0&&this.sendNotification(J.INITIALIZED),this.playback.initialized===!0&&(this.media.getSrc()||this.media.getSource())&&(this.playback.getStarted()||this.sendNotification(J.START),this.playback.play()))}},{key:"pause",value:function(){this.playback.pause(),this.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE)}},{key:"ended",value:function(){var e=this;this.applicationState.getEnded()||(this.applicationState.setEnded(!0),this.doAfter(function(){e.config.getLoop()===!0?e.sendNotification(J.REPLAY):e.applicationState.getHasPostContent()===!1&&e.sendNotification(J.MEDIA_SEQUENCE_ENDED)}))}},{key:"start",value:function(e){this.sendNotification(J.REQUEST_PLAY),this.sendNotification(J.STARTED,e)}},{key:"toggleplaypause",value:function(){var e=void 0;if(!this.applicationState.getSeeking()){switch(this.applicationState.getPlayState()){case re.ENDED:e=J.REPLAY;break;case re.PAUSED:case re.READY:e=J.PLAY;break;case re.PLAYING:e=J.PAUSE}this.applicationState.getWaiting()&&this.facade.getMediaElement().paused===!0&&(e=J.PLAY),this.sendNotification(e,!0)}}},{key:"changeduration",value:function(e){this.media.getDuration()!==e&&this.media.setDuration(e)}}],[{key:"NAME",get:function(){return"CoreController"}}]),t}(Ye),ze=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"track",value:function(e,t,n){var i=L.semver(n.version),r={url:"//amp.akamaized.net/amp.gif",query:{prod:i.build?i.build:"standard",prodver:i.version,platform:"web",os:bowser.osname,osver:bowser.osversion,browser:bowser.name,browserver:bowser.version,url:location.href,event:e,data:t,lic:n.pid}};return L.request(r).catch(function(e){return w.instance.log(e)})}}]),e}(),Ke=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.STARTUP,J.ERROR,J.TRACK,J.DESTROY]}},{key:"startup",value:function(){var e=this;this.localization.initialize(this.facade.plugins).then(function(){var t=e.facade.config.volume;null!=t&&e.sendNotification(J.CHANGE_VOLUME,t),e.playerCore.ready(),e.facade.config.autoplay===!0&&e.sendNotification(J.ADD_APPLICATION_STATE,"autoplay"),e.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL),e.sendNotification(J.CHANGE_PLAY_STATE,re.READY),e.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE),U.value().then(function(){e.facade.performance.ready=Date.now(),e.sendNotification(J.TRACK,r.create("create")),e.sendNotification(J.READY,e.facade),e.doAfter(function(){var t=e.facade.config.media;null!=t&&e.sendNotification(J.SET_MEDIA,t)},2)})}).catch(function(e){throw i.create(e)})}},{key:"error",value:function(e){var t=this,n=function(e){t.facade._error=e,t.playback.destroy();var n=t.playback.getMediaElement();Promise.resolve(n.pause()).catch(function(e){return e}),t.sendNotification(J.CHANGE_PLAY_STATE,re.ERROR),t.facade.dispatch(D.ERROR,e),t.logger.error("[AMP ERROR]",e)};this.facade.transform($.ERROR,i.create(e)).then(function(e){null!=e&&n(e)}).catch(function(e){n(e)})}},{key:"track",value:function(e){ze.track(e.type,e.data,this.facade)}},{key:"destroy",value:function(){var e=this,t=Object.keys(this.facade.getModules()),n=this.facade.plugins;n.forEach(function(n){if(!t.includes(n))try{var i=e.facade[n]||{};"function"==typeof i.destroy&&i.destroy()}catch(t){e.facade.logger.error(t)}})}}],[{key:"NAME",get:function(){return"PlayerController"}}]),t}(Ye),qe=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.PLAYING,J.REQUEST_PLAY,J.PLAYBACK_TARGET_CHANGE,J.REGISTER_PLAYBACK_CORE,J.REPLAY,J.END,J.HAS_POST_CONTENT,J.LOCK,J.MEDIA_SEQUENCE_ENDED]}},{key:"requestplay",value:function(){this.media.started!==!0&&(this.media.started=!0,this.sendNotification(J.PLAY_REQUEST),this.sendNotification(J.WAITING),this.sendNotification(J.MEDIA_SEQUENCE_STARTED),this.sendNotification(J.TRACK,r.create("start")))}},{key:"end",value:function(){var e=this;if(!this.applicationState.getEnded()){if(this.facade.ads.getInProgress()){var t={player:this.player,transform:function(n){if(n>-1)return e.player.sendNotification(J.END),e.player.removeTransform(t),n}};return this.player.addTransform($.TIME,t),void this.facade.ads.terminateAllAds()}this.playback.setEnabled(!1),this.playback.pause(),this.playback.seek(this.playback.getDuration()).then(this.sendNotification.bind(this,J.ENDED))}}},{key:"replay",value:function(){if("function"==typeof this.playback.replay)return void this.playback.replay();var e=this.media.getData();e.metadata=Object.assign({},e.metadata,{config:{autoplay:!0}}),this.sendNotification(J.SET_MEDIA,e)}},{key:"registerplaybackcore",value:function(e){this.playerCore.registerPlaybackCore(e)}},{key:"playbacktargetchange",value:function(e){var t=e.value,n="amp"===t?J.REMOVE_APPLICATION_STATE:J.ADD_APPLICATION_STATE;this.sendNotification(n,"remote-playback")}},{key:"playing",value:function(){0===this.facade.getMediaElement().currentTime&&this.media.started===!1&&this.applicationState.getSeeking()===!1&&(this.media.started=!0,this.sendNotification(J.MEDIA_SEQUENCE_STARTED)),this.applicationState.getPlayState()!==re.PLAYING&&this.sendNotification(J.CHANGE_PLAY_STATE,re.PLAYING)}},{key:"haspostcontent",value:function(e){this.applicationState.setHasPostContent(e)}},{key:"lock",value:function(e){var t=e?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE;this.sendNotification(t,"locked"),this.applicationState.setLocked(e)}},{key:"mediasequenceended",value:function(){this.config.getLoop()===!0?this.doAfter(this.sendNotification.bind(this,J.REPLAY)):(this.sendNotification(J.CHANGE_PLAY_STATE,re.ENDED),this.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE))}}],[{key:"NAME",get:function(){return"PlaybackController"}}]),t}(Ye),Qe={EXTERNAL:"external"},We=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.BUFFERING_CHANGE,J.WAITING,J.CHANGE_PLAY_STATE,J.TOGGLE_FULL_SCREEN,J.CHANGE_DISPLAY_STATE,J.CHANGE_ACTIVE_STATE,J.INITIALIZED]}},{key:"bufferingchange",value:function(e){this.applicationState.getBuffering()!==e&&this.applicationState.setBuffering(e)}},{key:"waiting",value:function(){this.applicationState.getWaiting()||this.applicationState.setWaiting(!0)}},{key:"changeplaystate",value:function(e){this.applicationState.setPlayState(e);
}},{key:"changeactivestate",value:function(e){this.applicationState.setActiveState(e)}},{key:"initialized",value:function(){this.playback.initialized=!0}},{key:"changedisplaystate",value:function(e){var t=this;if(e!==this.applicationState.getDisplayState()){var n=function(e){t.sendNotification(J.FULL_SCREEN_CHANGE,e===ie.FULL_SCREEN)};if(this.applicationState.setDisplayState(e),this.config.getFullscreen().mode===Qe.EXTERNAL)return void n(e);var i=this.facade.getMediaElement(),r=this.facade.getViewComponent(),a=L.getFullScreenApi(r,i);e===ie.FULL_SCREEN?(null!=a.event?null!=r.mozRequestFullScreen?document[a.event]=function(e){if(!document.mozFullScreen)return t.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL)}:document[a.event]=function(e){if(null==document[a.element])return t.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL)}:(this.facade.timers.clearInterval(this.interval),this.interval=this.facade.timers.setInterval(function(){i.webkitDisplayingFullscreen!==!0&&(t.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL),t.facade.timers.clearInterval(t.interval))},100)),null!=a.error&&document.addEventListener(a.error,this.facade.logger.error.bind(this.facade.logger)),a.enter()):e===ie.NORMAL&&(null!=a&&"function"==typeof a.exit&&a.exit(),i[a.event]=null,this.facade.timers.clearInterval(this.interval)),n(e)}}},{key:"togglefullscreen",value:function(){var e=this.applicationState.getDisplayState()===ie.FULL_SCREEN?ie.NORMAL:ie.FULL_SCREEN;return this.sendNotification(J.CHANGE_DISPLAY_STATE,e)}}],[{key:"NAME",get:function(){return"StateController"}}]),t}(Ye),Ze=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.enabled=!0,n.plugin=null,n.appState=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getDefaults",value:function(){var e=babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getDefaults",this).call(this);return null==e.debug&&(e.debug=null),e}},{key:"getValue",value:function(e){var t=this.facade.player.evaluateBindings(this.config);return null!=e?t[e]:t}},{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.appState=this.facade.player.appState}},{key:"getMediaElement",value:function(){return this.facade.player.getMediaElement()}},{key:"setEnabled",value:function(e){return this.enabled=e,e}},{key:"getEnabled",value:function(){return this.enabled}},{key:"getDebug",value:function(){return null!=this.value.debug?this.value.debug:this.facade.player.getConfig().debug===!0}},{key:"createPlugin",value:function(){}},{key:"initialize",value:function(){this.plugin=this.createPlugin()}},{key:"error",value:function(e){this.facade.logger.error("[AMP "+this.facade.getModuleName().toUpperCase()+" Error]",e)}},{key:"value",get:function(){return this.getValue()}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Q),Xe=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.player=null,e.proxy=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initialize",value:function(e,n){this.player=n,this.logger=this.player.logger,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initialize",this).call(this,e,n)}},{key:"isAvailable",value:function(){return!0}},{key:"loadModuleResources",value:function(){return this.isAvailable()?babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"loadModuleResources",this).call(this):Promise.resolve()}},{key:"resourcesLoaded",value:function(){"function"==typeof this.oninitialized&&this.oninitialized(this)}},{key:"onRegister",value:function(){if(this.isAvailable()){this.createFramework();var e=this.retrieveProxy(Ze.NAME);e&&"function"==typeof e.initialize&&e.initialize()}this.performance.record("ready"),this.sendNotification(te.PLUGIN_REGISTERED,this)}},{key:"logEvent",value:function(e){if(this.ignoreEvents.test(e.type)!==!0){var t=this.player.getModuleName().toUpperCase()+" "+this.getModuleName().toUpperCase();null!=e.dispatcher&&(t+=" "+e.dispatcher),this.logger.log("["+t+" EVENT] "+e.type,e)}}},{key:"listNotificationPublications",value:function(){var e=[J.ADD_LAYER,J.REMOVE_LAYER,J.ADD_OVERLAY,J.REMOVE_OVERLAY,J.ADD_APPLICATION_STATE,J.REMOVE_APPLICATION_STATE,J.PLAYBACK_CORE_CHANGE];return e.concat(Object.values(te))}}]),t}(ee),$e=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));return e.plugins=[],e.registered=0,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[te.REGISTER_PLUGINS,te.PLUGIN_REGISTERED,te.PLUGINS_INITIALIZED,J.DESTROY]}},{key:"handleNotification",value:function(e){var t=this,n=e.getName(),i=e.getBody();switch(n){case te.REGISTER_PLUGINS:var r=i;this.facade.plugins=[],T.each(dt.plugins,function(e,n){if(n in r){var i=r[n];if(null!=i&&i.enabled!==!1){if(null==e)return void t.facade.logger.debug("[AMP] Plugin could not be found: "+n);try{var a=new e;a.oninitialized=t.onplugininitialized.bind(t,n),a.onerror=t.onpluginerror.bind(t,n),t.plugins.push(a.initialize.bind(a,i,t.facade))}catch(e){return void t.facade.logger.error("[AMP] Plugin could not be created: "+n+". "+e)}}}});r.plugins||{};T.each(r.plugins||{},function(e,n){if(null!=e&&e.enabled!==!1){var i=function(e,n,i,r,a){return t.facade.loadResources(n.resources).then(function(){var t=dt.plugins[i];return null==t&&a("[AMP] Plugin could not be found: "+i),t(e,n,i)}).then(r).catch(a)};t.plugins.push(i.bind(null,t.facade,e,n,t.onpluginregistered.bind(t,n),t.onpluginerror.bind(t,n)))}}),this.plugins.forEach(function(e){return e()});break;case te.PLUGIN_REGISTERED:this.onpluginregistered(i.getModuleName(),i);break;case te.PLUGINS_INITIALIZED:this.sendNotification(J.STARTUP,this.facade.config);break;case J.DESTROY:T.each(this.facade.plugins,function(e){if(e.destroy)try{e.destroy()}catch(e){t.facade.logger.error(e)}})}}},{key:"initializedCheck",value:function(){this.registered===this.plugins.length&&this.sendNotification(te.PLUGINS_INITIALIZED,this.plugins)}},{key:"onplugininitialized",value:function(e,t){t.oninitialized=null,t.onerror=null,this.facade.registerModule(t)}},{key:"onpluginerror",value:function(e,t){this.registered++,this.facade.logger.error("[AMP] Plugin could not be registered: "+e),this.facade.logger.error(t),this.initializedCheck()}},{key:"onpluginregistered",value:function(e,t){if(null==this.facade[e]){this.registered++,this.facade.logger.debug("[AMP] Plugin registered: "+e),this.facade[e]=t,this.facade.plugins.push(e);var n=t.feature;null!=n&&(this.facade[n]=t),this.initializedCheck()}}}],[{key:"NAME",get:function(){return"PluginsController"}}]),t}(puremvc.Mediator),Je=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.SET_MEDIA,J.CHANGE_MEDIA,J.MEDIA_VALIDATED,se.AUTHORIZED,J.RECORD_CONTENT_CHANGE]}},{key:"setmedia",value:function(e){var t=this;this.sendNotification(J.LOCK,!0),this.facade.busy=!0,this.applicationState.setBuffering(!1),this.applicationState.setEnded(!1),this.playback.setEnabled(!1),this.playback.pause(),null!=this.tracks&&this.tracks.clear(),this.sendNotification(J.HAS_POST_CONTENT,!1),this.sendNotification(J.CHANGE_PLAY_STATE,re.READY),this.sendNotification(J.CHANGE_ACTIVE_STATE,ae.ACTIVE),e=this.media.applyDefaults(e),this.security.setMedia(e),this.facade.transform($.MEDIA,e).then(function(e){null!=e&&(e=t.media.applyDefaults(e),t.sendNotification(J.CHANGE_MEDIA,e))}).catch(function(e){t.sendNotification(J.ERROR,e)})}},{key:"changemedia",value:function(e){try{e=this.media.setData(e)}catch(e){return void this.sendNotification(J.ERROR,e.message)}e=this.media.getData(),null!=e.authorization&&this.security.setAuthorization(e.authorization),this.security.getAuthorized()?this.sendNotification(se.AUTHORIZED,this.security.getAuthorization()):this.sendNotification(se.AUTHORIZE,{media:e})}},{key:"mediavalidated",value:function(e){var t=this,n=this.facade.getMediaElement();this.sendNotification(J.MEDIA_CHANGE,e),this.playerCore.setPlaybackCore(e).then(function(i){if(t.sendNotification(J.LOCK,!1),t.facade.busy=!1,null==i&&(i=t.player.playback),i.reset(),i.setCurrentTime(e.startTime||0),"amp"!==t.applicationState.getPlaybackTarget())return void t.sendNotification(J.MEDIA_SEQUENCE_INITIALIZED,{media:e});t.tracks.setMedia(e);var r=t.facade.getAutoplay()&&t.applicationState.getLocked()===!1,a=t.config.getMuted(),o=t.config.getPlaysInline();if(t.applicationState.calculateAutoplay!==!1&&(t.applicationState.calculateAutoplay=!1,r===!0)){var s=t.facade.autoplayThreshold,l=t.facade.autoplayPolicy;if(s!==U.ALLOWED&&l!==G.NONE){var u=a===!0,c=o===!0,h=l.includes(G.MUTED),d=s===U.MUTED,f=s===U.MUTED_INLINE&&c,p=a!==!1,y=d||f;r=u&&y||h&&y&&p,r===!0?a=!0:t.sendNotification(J.AUTOPLAY_BLOCKED,{threshold:s,policy:l})}}if(null!=o&&(n.playsInline=o),null!=a&&t.playback.setMuted(a,!0,J.INTERNAL),t.sendNotification(J.MEDIA_SEQUENCE_INITIALIZED,{media:e,autoplay:r,muted:a===!0,playsinline:o===!0}),r===!0)t.doAfter(t.sendNotification.bind(t,J.PLAY,!0));else{var A=t.facade.getPreload()||B.NONE;A!==B.NONE&&t.playback.preload(A)}}).catch(function(e){t.sendNotification(J.ERROR,e)})}},{key:"authorized",value:function(){null==this.security.getSession()&&(this.security.setSession(L.createUID()),this.sendNotification(J.MEDIA_VALIDATED,this.media.getData()))}},{key:"recordcontentchange",value:function(e){this.media.updateData(e)}}],[{key:"NAME",get:function(){return"MediaController"}}]),t}(Ye),et=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.TIMED_METADATA,J.TIME_CHANGE,J.SEEK,J.SEEKING,J.SEEK_COMPLETE,J.GO_LIVE]}},{key:"timedmetadata",value:function(e,t){var n={startTime:e.startTime,endTime:e.endTime,type:e.type,track:e.track,value:{key:e.value.key,data:e.value.data,info:e.value.info}},i=n.value;try{null==i.info&&("string"==typeof i.data?i.info=i.data:i.data instanceof ArrayBuffer&&(i.info=L.arrayBufferToString(i.data)))}catch(e){this.facade.logger.log("[AMP ERROR]: Could not parse timed metadata")}t.body=n}},{key:"timechange",value:function(e){var t=this;null!=e.currentTime&&this.facade.transform($.TIME,e.currentTime).then(function(e){return t.applicationState.setCurrentTime(e)}),null!=e.duration&&this.facade.transform($.TIME,e.duration).then(function(e){return t.applicationState.setDuration(e)})}},{key:"seek",value:function(e){var t=this;this.facade.transform($.SEEK,e).then(function(e){if(null!=e&&e!==t.playback.getCurrentTime()){0===e&&t.media.getType()===L.mimeTypes.m3u8&&(e=.25),t.playback.getStarted()===!0&&t.sendNotification(J.WAITING);t.facade.getMediaElement();t.playback.setCurrentTime(e),t.playback.getStarted()!==!0&&t.sendNotification(J.TIME_CHANGE,e)}})}},{key:"seeking",value:function(){return this.applicationState.getSeeking()===!0?void this.applicationState.setSeekRequested(!0):(this.applicationState.getEnded()&&this.applicationState.setEnded(!1),0===this.facade.getMediaElement().currentTime&&(this.media.started=!1),void this.applicationState.setSeeking(!0))}},{key:"seekcomplete",value:function(e,t){var n=this;this.facade.timers.setTimeout(function(){if(n.applicationState.setSeeking(!1),n.applicationState.setSeekRequested(!1),n.sendNotification(J.SEEKED,e),n.applicationState.getPlayState()!==re.READY&&"full-screen"===n.applicationState.displayState&&"ipad"===n.applicationState.device&&n.facade.retrieveProxy(he.NAME).getPaused()!==n.facade.getMediaElement().paused){var t=n.facade.getMediaElement().paused===!0?re.PAUSED:re.PLAYING;n.sendNotification(J.CHANGE_PLAY_STATE,t)}},1)}},{key:"golive",value:function(){"function"==typeof this.playback.goLive&&this.playback.goLive()}}],[{key:"NAME",get:function(){return"TimeController"}}]),t}(Ye),tt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.VOLUME_CHANGE,J.CHANGE_VOLUME,J.CHANGE_MUTED,J.TOGGLE_MUTED]}},{key:"changevolume",value:function(e){e=L.clamp(e,0,1),this.playback.getVolume()!==e&&(this.playback.setVolume(e),0===e?this.sendNotification(J.ADD_APPLICATION_STATE,"muted"):this.sendNotification(J.REMOVE_APPLICATION_STATE,"muted"))}},{key:"volumechange",value:function(e){this.applicationState.setVolume(e)}},{key:"changemuted",value:function(e){this.playback.setMuted(e)}},{key:"togglemuted",value:function(){this.playback.setMuted(!this.playback.getMuted())}}],[{key:"NAME",get:function(){return"VolumeController"}}]),t}(Ye),nt=function(){function e(t){babelHelpers.classCallCheck(this,e);var n=Object.assign({},e.defaults);n=L.override(n,t,!1),L.override(this,n,!1)}return babelHelpers.createClass(e,null,[{key:"create",value:function(t){return new e(t)}}]),e}();nt.defaults={version:"1.0.0",volume:1,captions:{presets:{fontFamily:{monospacedSerif:"'Courier New', Courier, 'Nimbus Mono L', 'Cutive Mono', monospace",proportionalSerif:"'Times New Roman', Times, Georgia, Cambria, 'PT Serif Caption', serif",monospacedSansSerif:"'Deja Vu Sans Mono', 'Lucida Console', Monaco, Consolas, 'PT Mono', monospace",proportionalSansSerif:"Roboto, 'Arial Unicode Ms', Arial, Helvetica, Verdana, 'PT Sans Caption', sans-serif",casual:"'Comic Sans MS', Impact, Handlee, fantasy",cursive:"'Monotype Corsiva', 'URW Chancery L', 'Apple Chancery', 'Dancing Script', cursive",smallCapitals:"'Arial Unicode Ms', Arial, Helvetica, Verdana, 'Marcellus SC', sans-serif; font-variant: small-caps"},fontSize:{smallest:"x-small",small:"small",medium:"medium",large:"large",largest:"x-large"},edgeType:{none:"0px 0px 0px",depressed:"0px 1px 0px",leftShadow:"-3px 3px 2px",raised:"0px 1px 1px",rightShadow:"3px 3px 2px",uniform:"0px 0px 4px"},color:{white:"rgb(255, 255, 255)",yellow:"rgb(255, 255, 0)",green:"rgb(0, 128, 0)",cyan:"rgb(0, 255, 255)",blue:"rgb(0, 0, 255)",magenta:"rgb(255, 0, 255)",red:"rgb(255, 0, 0)",black:"rgb(0, 0, 0)"}},visible:!1,fontFamily:"monospacedSerif",fontSize:"medium",scroll:"popout",fontColor:"white",fontOpacity:"100%",edgeType:"rightShadow",edgeColor:"black",edgeOpacity:"75%",backgroundColor:"black",backgroundOpacity:"0%",windowColor:"black",windowOpacity:"50%",styles:{window:{backgroundColor:"rgba(0,0,0,0.5)"},text:{fontFamily:"Courier New, Courier, Nimbus Mono L, Cutive Mono, monospace",fontSize:"100%",color:"rgba(255,255,255,1)",textShadow:"2px 2px 3px rgba(0,0,0,0.75)",backgroundColor:"rgba(0,0,0,0)"}}}};var it="akamai_amp",rt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));return e.namespace=t.NAMESPACE,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){var e=this.config.getSettings()||{};null!=e.namespace&&(this.namespace=it=e.namespace),this.settings=nt.create(e.defaults);var t=Object.assign({},e);delete t.defaults,delete t.namespace;try{var n=localStorage.getItem(this.namespace),i=void 0;null!=n&&(i=L.override(JSON.parse(n),t)),this.save(i)}catch(e){}}},{key:"listNotificationInterests",value:function(){return[J.READY,J.VOLUME_CHANGE,J.CHANGE_SETTINGS,J.CHANGE_AUTOPLAY,J.CHANGE_LOOP,J.CHANGE_PRELOAD,J.CHANGE_CONTROLS,J.MEDIA_CHANGE]}},{key:"changesettings",value:function(e){this.change(e)}},{key:"changeautoplay",value:function(e){this.config.setAutoplay(e)}},{key:"changeloop",value:function(e){this.config.setLoop(e)}},{key:"changepreload",value:function(e){this.config.setPreload(e)}},{key:"changecontrols",value:function(e){this.config.setControls(e),this.updateControls()}},{key:"updateControls",value:function(){this.player.mediaElement.controls=this.config.getControls()}},{key:"mediachange",value:function(e){this.updateControls()}},{key:"ready",value:function(){var e=this.settings.volume;null!=e&&this.sendNotification(J.CHANGE_VOLUME,e)}},{key:"volumechange",value:function(e,t){this.settings.volume!==e&&"internal"!=t.getType()&&this.change({volume:e})}},{key:"computeStyles",value:function(e,t){function n(n){var i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:e[n];return t[n][i]||i}function i(t){var i=I.toColor(n("color",e[t+"Color"])),r=e[t+"Opacity"];return null!=r&&(i.a=I.fromPercent(r)),I.fromColor(i)}return e=L.override(this.settings.captions,e),null==t&&(t=e.presets),{window:{backgroundColor:i("window")},text:{fontFamily:n("fontFamily"),fontSize:n("fontSize"),color:i("font"),textShadow:n("edgeType")+" "+i("edge"),backgroundColor:i("background")}}}},{key:"change",value:function(e){if(!(null==e||"object"!==("undefined"==typeof e?"undefined":babelHelpers.typeof(e))||e instanceof Array)){var t=L.diff(this.settings,e);if(null!=t){var n=t.captions;null!=n&&(n.styles=L.override(this.computeStyles(n),n.styles)),this.save(t),this.sendNotification(J.SETTINGS_CHANGE,t)}}}},{key:"getSettings",value:function(){return Object.freeze(Object.assign({change:this.change.bind(this)},this.settings))}},{key:"save",value:function(e){this.settings=L.override(this.settings,e);try{localStorage.setItem(this.namespace,JSON.stringify(this.settings))}catch(e){}}}],[{key:"GET",value:function(){var e=localStorage.getItem(t.NAMESPACE);try{e=JSON.parse(e)}catch(t){e={}}return e||{}}},{key:"NAMESPACE",get:function(){return it}},{key:"NAME",get:function(){return"SettingsController"}}]),t}(Ye),at=function(e){function t(e,n){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,n))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e,t){this.facade.dispatch(e,t)}},{key:"listNotificationInterests",value:function(){return Object.values(D).concat(Object.values(se)).concat([J.ENABLE_VIDEO_EVENTS,J.DISABLE_VIDEO_EVENTS])}},{key:"handleNotification",value:function(e){var n=e.getName();null!=this[n]?babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"handleNotification",this).call(this,e):this.dispatchEvent(n,e.getBody())}},{key:"error",value:function(){}},{key:"enablevideoevents",value:function(e){var t=this,n=this.facade.getMediaElement();e.forEach(function(e){return n.addEventListener(e,t.playback.handlers[e])})}},{key:"disablevideoevents",value:function(e){var t=this,n=this.facade.getMediaElement();e.forEach(function(e){return n.removeEventListener(e,t.playback.handlers[e])})}}],[{key:"NAME",get:function(){return"EventController"}}]),t}(Ye),ot=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.ads=a.create(),n.ads.enabled=!1,n.ads.getEnabled=function(){return!1},n.ads.inprogress=!1,n.ads.getInProgress=function(){return!1},n.loadResources=n.loadModuleResources.bind(n),n.presentationModeChanged=n.presentationModeChanged.bind(n),n.moduleName="amp",n.l10n=null,n.appState=null,n.mediaProxy=null,n.bindings=null,n.configuration=null,n.security=null,n.playerCore=null,n.tracks=null,n.mediator=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.appState=new oe,this.registerProxy(this.appState),this.security=new le,this.registerProxy(this.security),this.mediaProxy=new _e(this.config),this.registerProxy(this.mediaProxy),this.configuration=new ue(this.config),this.registerProxy(this.configuration),this.localization=new Ae(this.config),this.registerProxy(this.localization);var e=new de;this.registerProxy(e),this.playerCore=new Ee(e,this.config),this.registerProxy(this.playerCore),this.tracks=new we,this.registerProxy(this.tracks),this.fps=L.override(ne,this.config.fps)}},{key:"createView",value:function(){this.mediator=new De("html5",this.getViewComponent()),this.registerMediator(this.mediator),this.registerMediator(new Ue),this.registerMediator(new Ge),this.adMediator=new Be,this.registerMediator(this.adMediator)}},{key:"createController",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this),this.registerMediator(new Fe),this.registerMediator(new Ke),this.registerMediator(new We),this.registerMediator(new $e),this.registerMediator(new Je),this.registerMediator(new qe),this.registerMediator(new et),this.registerMediator(new tt),this.registerMediator(new at),this._settings=new rt,this.registerMediator(this._settings)}},{key:"dispatchEvent",value:function(e){e.player=this,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e)}},{key:"setViewComponent",value:function(e){return e.amp=this,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"setViewComponent",this).call(this,e)}},{key:"getPID",value:function(){return dt.LICENSE||this.config.pid}},{key:"getVersion",value:function(){return dt.getVersion()}},{key:"getDebug",value:function(){return this.config.debug}},{key:"createPlugins",value:function(){this.sendNotification(te.REGISTER_PLUGINS,this.config)}},{key:"createMediaElement",value:function(){var e=this.getViewComponent()||{},t=("function"==typeof e.querySelector?e.querySelector("video"):null)||"video";this.mediator=new be("html5",t),this.sendNotification(J.PLAYBACK_CORE_CHANGE,this.mediator);var n=this.mediator.getViewComponent();return null==n.dataset&&(n.dataset={}),n}},{key:"createFramework",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createFramework",this).call(this),this.setMediaElement(this.createMediaElement()),this.createPlugins()}},{key:"getLanguage",value:function(){return this.localization.getLanguage()}},{key:"setLanguage",value:function(e){return this.localization.setLanguage(e),e}},{key:"getLocalizedString",value:function(e,t){try{return this.localization.getString(e,t)}catch(t){return e}}},{key:"getMediaElement",value:function(){return this.appState.getMediaElement()}},{key:"setMediaElement",value:function(e){var t=this.getMediaElement();return null!=t&&t.removeEventListener("webkitpresentationmodechanged",this.presentationModeChanged),e.addEventListener("webkitpresentationmodechanged",this.presentationModeChanged),this.appState.setMediaElement(e),null==e.once&&(e.once=function(e,t){var n=L.createUID(),i=function(e,t,n,i){this.removeEventListener(t,this[e]),delete this[e],n(i)};return this[n]=i.bind(this,n,e,t),this.addEventListener(e,this[n]),n},e.once=e.once.bind(e)),e.amp=this,e}},{key:"presentationModeChanged",value:function(e){"inline"===e.target.webkitPresentationMode&&(e.target.controls=this.getControls())}},{key:"setControls",value:function(e){return this.sendNotification(J.CHANGE_CONTROLS,e)}},{key:"getControls",value:function(){return this.configuration.getControls()}},{key:"getContainer",value:function(){return this.getViewComponent()}},{key:"getAdContainer",value:function(){return this.adMediator.getContainer()}},{key:"setAdContainer",value:function(e){this.adMediator.setContainer(e)}},{key:"getPreviewTracks",value:function(){return this.tracks.getPreviewTracks()}},{key:"getAudioTracks",value:function(){return this.tracks.getAudioTracks()}},{key:"evaluateBindings",value:function(e,t){return t=null!=t?Object.assign({},this,t):this,q.evaluateBindings(e,t)}},{key:"canPlayType",value:function(e){return this.retrieveProxy(he.NAME).canPlayType(e)}},{key:"load",value:function(){this.sendNotification(J.LOAD)}},{key:"play",value:function(){var e=this;return new Promise(function(t,n){var i=function(){e.removeEventListener(D.PLAYING,r),e.removeEventListener(D.AUTOPLAY_BLOCKED,a),e.removeEventListener(D.ERROR,a)},r=function(){i(),t()},a=function(){i(),n()};e.addEventListener(D.PLAYING,r),e.addEventListener(D.AUTOPLAY_BLOCKED,a),e.addEventListener(D.ERROR,a),e.sendNotification(J.PLAY,!0)})}},{key:"replay",value:function(){this.sendNotification(J.REPLAY)}},{key:"pause",value:function(){var e=this;return new Promise(function(t,n){return e.once(D.PAUSED,t),e.sendNotification(J.PAUSE)})}},{key:"seek",value:function(e){var t=this;return new Promise(function(n,i){return t.once(D.SEEKED,n),t.setCurrentTime(e)})}},{key:"end",value:function(){this.sendNotification(J.END)}},{key:"setAutoplay",value:function(e){return this.sendNotification(J.CHANGE_AUTOPLAY,e),e}},{key:"getAutoplay",value:function(){return this.configuration.getAutoplay()}},{key:"setPreload",value:function(e){return this.sendNotification(J.CHANGE_PRELOAD,e),e}},{key:"getPreload",value:function(){return this.configuration.getPreload()}},{key:"setLoop",value:function(e){return this.sendNotification(J.CHANGE_LOOP,e),e}},{key:"getLoop",value:function(){return this.configuration.getLoop()}},{key:"setMuted",value:function(e){return this.sendNotification(J.CHANGE_MUTED,e),e}},{key:"getMuted",value:function(){return this.retrieveProxy(he.NAME).getMuted()}},{key:"mute",value:function(){return this.setMuted(!0)}},{key:"unmute",value:function(){return this.setMuted(!1)}},{key:"setMedia",value:function(e){return this.sendNotification(J.SET_MEDIA,e),e}},{key:"getMedia",value:function(){return this.mediaProxy.getData()}},{key:"setCurrentTime",value:function(e){return this.sendNotification(J.SEEK,e),e}},{key:"getCurrentTime",value:function(){return this.appState.getCurrentTime()}},{key:"setAbsoluteCurrentTime",value:function(e){return this.sendNotification(J.SEEK,e),e}},{key:"getAbsoluteCurrentTime",value:function(){return this.retrieveProxy(he.NAME).getCurrentTime()}},{key:"toUTC",value:function(e){return this.retrieveProxy(he.NAME).toUTC(e)}},{key:"fromUTC",value:function(e){return this.retrieveProxy(he.NAME).fromUTC(e)}},{key:"getDuration",value:function(){return this.appState.getDuration()}},{key:"getAbsoluteDuration",value:function(){return this.mediaProxy.getDuration()}},{key:"setSrc",value:function(e){return this.sendNotification(J.SET_MEDIA,{src:e}),e}},{key:"getSrc",value:function(){return this.mediaProxy.getSrc()}},{key:"setSource",value:function(e){return this.sendNotification(J.SET_MEDIA,{source:e}),e}},{key:"getSource",value:function(){return this.mediaProxy.getSource()}},{key:"setVolume",value:function(e){return this.sendNotification(J.CHANGE_VOLUME,e),e}},{key:"getVolume",value:function(){return this.retrieveProxy(he.NAME).getVolume()}},{key:"getSeeking",value:function(){return this.retrieveProxy(he.NAME).getSeeking()}},{key:"getPaused",value:function(){return this.retrieveProxy(he.NAME).getPaused()}},{key:"getEnded",value:function(){return this.appState.getEnded()}},{key:"getBuffering",value:function(){return this.appState.getBuffering()}},{key:"setDisplayState",value:function(e){this.sendNotification(J.CHANGE_DISPLAY_STATE,e)}},{key:"getDisplayState",value:function(e){return this.appState.getDisplayState()}},{key:"getWaiting",value:function(){return this.appState.getWaiting()}},{key:"setWaiting",value:function(e){return this.appState.setWaiting(e)}},{key:"getBusy",value:function(){return this.appState.getBusy()}},{key:"setBusy",value:function(e){return this.appState.setBusy(e)}},{key:"getError",value:function(){return this._error||this.getMediaElement().error}},{key:"enterFullScreen",value:function(){this.sendNotification(J.CHANGE_DISPLAY_STATE,ie.FULL_SCREEN)}},{key:"exitFullScreen",value:function(){this.sendNotification(J.CHANGE_DISPLAY_STATE,ie.NORMAL)}},{key:"setHidden",value:function(e){if(e!==this.appState.getHidden()){this.appState.setHidden(e);var t=this.viewComponent.style;e===!0?(this.hiddenData={width:t.width,height:t.height,paused:this.getPaused()},t.width=t.height="0px",this.hiddenData.paused===!1&&this.pause()):(t.width=this.hiddenData.width,t.height=this.hiddenData.height,this.hiddenData.paused===!1&&this.play(),this.hiddenData=null)}}},{key:"getHidden",value:function(){return this.appState.getHidden()}},{key:"getWidth",value:function(){var e=this.getViewComponent()||{};return e.offsetWidth}},{key:"getHeight",value:function(){var e=this.getViewComponent()||{};return e.offsetHeight}},{key:"getVideoWidth",value:function(){var e=this.getMediaElement()||{};return e.videoWidth}},{key:"getVideoHeight",value:function(){var e=this.getMediaElement()||{};return e.videoHeight}},{key:"getLeft",value:function(){var e=this.getViewComponent()||{};return e.offsetLeft}},{key:"getRight",value:function(){return this.getLeft()+this.getWidth()}},{key:"getTop",value:function(){var e=this.getViewComponent()||{};return e.offsetTop}},{key:"getBottom",value:function(){return this.getTop()+this.getHeight()}},{key:"getMouseX",value:function(){return L.clientX-this.getLeft()}},{key:"getMouseY",value:function(){return L.clientY-this.getTop()}},{key:"getMouseOver",value:function(){var e=this.getMouseX(),t=this.getMouseY();return L.isMouseOverDocument()&&e>=0&&e<=this.getWidth()&&t>=0&&t<=this.getHeight()}},{key:"recordContentChange",value:function(e){this.sendNotification(J.RECORD_CONTENT_CHANGE,e)}},{key:"setPlaybackRate",value:function(e){this.ads.inProgress!==!0&&e!==this.getMediaElement().playbackRate&&(this.appState.setPlaybackRate(e),this.getMediaElement().playbackRate=e)}},{key:"getPlaybackRate",value:function(){return this.getMediaElement().playbackRate}},{key:"setCues",value:function(e){return this.mediaProxy.setCues(e),e}},{key:"getCues",value:function(){return this.mediaProxy.getCues()}},{key:"setQuality",value:function(e){return this.retrieveProxy(he.NAME).setQuality(e)}},{key:"getQuality",value:function(){return this.retrieveProxy(he.NAME).getQuality()}},{key:"getQualityLevels",value:function(){return this.retrieveProxy(he.NAME).getQualityLevels()}},{key:"getQualityMode",value:function(){return this.retrieveProxy(he.NAME).getQualityMode()}},{key:"setQualityMode",value:function(e){return this.retrieveProxy(he.NAME).setQualityMode(e)}},{key:"getPlayState",value:function(){return this.appState.getPlayState()}},{key:"getPlaybackTarget",value:function(){return this.appState.getPlaybackTarget()}},{key:"setPlaybackTarget",value:function(e){this.appState.setPlaybackTarget(e)}},{key:"getMediaTransforms",value:function(){return this.mediaProxy.getTransforms()}},{key:"authorize",value:function(e){this.security.authorize(e)}},{key:"goLive",value:function(){return this.retrieveProxy(he.NAME).goLive()}},{key:"appendChild",value:function(e){this.mediator.addLayer(e)}},{key:"removeChild",value:function(e){this.mediator.removeLayer(e)}},{key:"getSettings",value:function(){return this._settings&&this._settings.getSettings()||{change:function(){}}}},{key:"createMediaError",value:function(e,t){var n=null;switch(e){case MediaError.MEDIA_ERR_ABORTED:n=this.l10n.MSG_ERROR_ABORTED;break;case MediaError.MEDIA_ERR_DECODE:n=this.l10n.MSG_ERROR_DECODE;break;case MediaError.MEDIA_ERR_NETWORK:n=this.l10n.MSG_ERROR_NETWORK;break;case MediaError.MEDIA_ERR_SRC_NOT_SUPPORTED:n=this.l10n.MSG_ERROR_SRC}return i.create(n,e,t)}},{key:"destroy",value:function(){var e=this,n=this.retrieveProxy(Ee.NAME);if(null!=n){var i=n.activePlaybackCore;null!=i&&"function"==typeof i.destroy&&i.destroy()}this.sendNotification(J.DESTROY,this),setTimeout(function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",e).call(e),L.timerGroup(e.multitonKey,!0)},1)}},{key:"now",get:function(){return Date.now();
}},{key:"paths",get:function(){return this.configuration.getPaths()}},{key:"timers",get:function(){return L.timerGroup(this.multitonKey)}},{key:"autoplayPolicy",get:function(){return this.configuration.getAutoplayPolicy()}},{key:"autoplayThreshold",get:function(){return U.threshold}},{key:"temporalType",get:function(){return this.mediaProxy.getTemporalType()}},{key:"isLive",get:function(){return this.mediaProxy.getIsLive()}},{key:"textTracks",get:function(){return this.getMediaElement().textTracks}},{key:"defaultMediaTransform",get:function(){return this.mediaProxy.applyDefaults}},{key:"pid",get:function(){return this.getPID()}},{key:"version",get:function(){return this.getVersion()}},{key:"debug",get:function(){return this.getDebug()}},{key:"language",get:function(){return this.getLanguage()},set:function(e){return this.setLanguage(e)}},{key:"mediaElement",get:function(){return this.getMediaElement()}},{key:"controls",set:function(e){return this.setControls(e)},get:function(){return this.getControls()}},{key:"container",get:function(){return this.getContainer()}},{key:"adContainer",get:function(){return this.getAdContainer()},set:function(e){return this.setAdContainer(e)}},{key:"previewTracks",get:function(){return this.getPreviewTracks()}},{key:"audioTracks",get:function(){return this.getAudioTracks()}},{key:"autoplay",set:function(e){return this.setAutoplay(e)},get:function(){return this.getAutoplay()}},{key:"preload",set:function(e){return this.setPreload(e)},get:function(){return this.getPreload()}},{key:"loop",set:function(e){return this.setLoop(e)},get:function(){return this.getLoop()}},{key:"muted",set:function(e){return this.setMuted(e)},get:function(){return this.getMuted()}},{key:"media",set:function(e){return this.setMedia(e)},get:function(){return this.getMedia()}},{key:"currentTime",set:function(e){return this.setCurrentTime(e)},get:function(){return this.getCurrentTime()}},{key:"absoluteCurrentTime",set:function(e){return this.setAbsoluteCurrentTime(e)},get:function(){return this.getAbsoluteCurrentTime()}},{key:"duration",get:function(){return this.getDuration()}},{key:"absoluteDuration",get:function(){return this.getAbsoluteDuration()}},{key:"src",set:function(e){return this.setSrc(e)},get:function(){return this.getSrc()}},{key:"volume",set:function(e){return this.setVolume(e)},get:function(){return this.getVolume()}},{key:"seeking",get:function(){return this.getSeeking()}},{key:"paused",get:function(){return this.getPaused()}},{key:"ended",get:function(){return this.getEnded()}},{key:"buffering",get:function(){return this.getBuffering()}},{key:"displayState",set:function(e){return this.setDisplayState(e)},get:function(){return this.getDisplayState()}},{key:"waiting",get:function(){return this.getWaiting()},set:function(e){return this.setWaiting(e)}},{key:"busy",get:function(){return this.getBusy()},set:function(e){return this.setBusy(e)}},{key:"error",get:function(){return this.getError()}},{key:"hidden",set:function(e){return this.setHidden(e)},get:function(){return this.getHidden()}},{key:"width",get:function(){return this.getWidth()}},{key:"height",get:function(){return this.getHeight()}},{key:"videoWidth",get:function(){return this.getVideoWidth()}},{key:"videoHeight",get:function(){return this.getVideoHeight()}},{key:"left",get:function(){return this.getLeft()}},{key:"right",get:function(){return this.getRight()}},{key:"top",get:function(){return this.getTop()}},{key:"bottom",get:function(){return this.getBottom()}},{key:"mouseX",get:function(){return this.getMouseX()}},{key:"mouseY",get:function(){return this.getMouseY()}},{key:"mouseOver",get:function(){return this.getMouseOver()}},{key:"playbackRate",set:function(e){return this.setPlaybackRate(e)},get:function(){return this.getPlaybackRate()}},{key:"cues",set:function(e){return this.setCues(e)},get:function(){return this.getCues()}},{key:"quality",set:function(e){return this.setQuality(e)},get:function(){return this.getQuality()}},{key:"qualityLevels",get:function(){return this.getQualityLevels()}},{key:"qualityMode",get:function(){return this.getQualityMode()},set:function(e){return this.setQualityMode(e)}},{key:"playState",get:function(){return this.getPlayState()}},{key:"playbackTarget",get:function(){return this.getPlaybackTarget()},set:function(e){this.setPlaybackTarget(e)}},{key:"settings",get:function(){return this.getSettings()}}],[{key:"create",value:function(e,n){return new Promise(function(i,r){try{var a=new t(e);e.amp=a,a.onready=function(e){i(e)},a.initialize(n)}catch(e){r(e)}})}}]),t}(ee),st=function(){function e(){babelHelpers.classCallCheck(this,e),this.map={}}return babelHelpers.createClass(e,[{key:"add",value:function(e,t){this.map[e]=t}},{key:"item",value:function(e){return this.map[e]}},{key:"remove",value:function(e){var t=this.map[e];return null!=t&&(this.map[e]=null,delete this.map[e]),t}}]),e}(),lt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"js",value:function(e,t){return L.loadScript(e,document.body)}},{key:"css",value:function(e,t){return new Promise(function(n,i){try{L.loadStyleSheet(e)}catch(e){i()}n(t)})}},{key:"json",value:function(e,t){return L.requestJson(t.src).then(function(e){return t.data=e,t})}},{key:"img",value:function(e,t){return L.loadImage(e)}},{key:"require",value:function(e){var t=this.item(e);return null==t?"string"==typeof e?this.add({src:e}):null!=e.src?this.add(e):Promise.resolve(e):"function"==typeof t?(st.prototype.add.call(this,e,null),Promise.resolve().then(function(){return t()})):"function"==typeof t.then?t:Promise.resolve(t)}},{key:"add",value:function(e){var n=this;if(e.enabled===!1)return Promise.resolve();var i=w.instance.enabled&&null!=e.debug?e.debug:e.src,r=e.id||e.src||i;if(e.defer===!0)return e.defer=!1,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,r,this.add.bind(this,e)),Promise.resolve();var a=this.item(r);if(null!=a){if("function"==typeof a.then)return a;if("function"!=typeof a)return Promise.resolve(a)}var o=e.type||L.getMimeType(i),s=void 0;return o===L.mimeTypes.js||/javascript/.test(o)?s=this.js(i,e):o===L.mimeTypes.css?s=this.css(i,e):o===L.mimeTypes.json||/json/.test(o)?s=this.json(i,e):o!==L.mimeTypes.swf?s=L.request(i):/image/.test(o)&&(s=this.img(i,e)),null==s?Promise.resolve():(s=s.then(function(e){return st.prototype.add.call(n,r,e),e}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"add",this).call(this,r,s),s)}},{key:"addResources",value:function(e){var t=this;if(!e||0==e.length)return Promise.resolve();var n=[],i=[];e.forEach(function(e){e instanceof Array?n.push(t.addResources.bind(t,e)):e.async===!0?i.push(t.add(e)):n.push(t.add.bind(t,e))});var r=i.length>0?Promise.all(i):Promise.resolve();return r.then(function(){return L.chain(n)})}}]),t}(st),ut={},ct=new lt,ht=[],dt=function(){function e(){babelHelpers.classCallCheck(this,e)}return babelHelpers.createClass(e,null,[{key:"VERSION",get:function(){return"AMP v9.0.10"}},{key:"plugins",get:function(){return ut}},{key:"instances",get:function(){return ht}},{key:"resourceManager",get:function(){return ct}}]),babelHelpers.createClass(e,null,[{key:"create",value:function(e,t,n){var r=this,a=Date.now();null!=e.container&&(t=e,e=e.container,delete t.container);var o=L.select(e);if(null==o)return Promise.reject(i.create("Invalid container. Could not find DOM element: "+e));t=t instanceof F?t:F.create(t),w.instance=new w(t.debug);var s=this.getVersion();return null==o.dataset&&(o.dataset={}),o.dataset["amp.version"]=s,w.instance.log("[AMP] "+s),Promise.all([U.init(t),ot.create(o,t)]).then(function(e){var t=e[1],i=t.player;return i.initTime=a,i.performance.record("init",a),i.request=r.request.bind(r),i.require=r.require.bind(r),i.once(D.DESTROY,function(e){return ft.dispatchEvent(e)}),ft.dispatch(D.CREATE,i),"function"==typeof n&&n(t),i}).catch(function(e){throw i.create(e)})}},{key:"getVersion",value:function(){return this.VERSION}},{key:"registerPlugin",value:function(e,t,n){"function"==typeof t&&(n=t),this.plugins[e]=n}},{key:"getResourceManager",value:function(){return ct}},{key:"addResource",value:function(e){return this.getResourceManager().add(e)}},{key:"addResources",value:function(e){return this.getResourceManager().addResources(e)}},{key:"request",value:function(e){return L.request(e)}},{key:"requestJson",value:function(e){return L.requestJson(e)}},{key:"require",value:function(e){return this.resourceManager.require(e)}},{key:"getResource",value:function(e){return this.getResourceManager().item(e)}},{key:"removeResource",value:function(e){return this.getResourceManager().remove(e)}},{key:"evaluateBindings",value:function(e,t){return q.evaluateBindings(e,t)}},{key:"defaults",value:function(e){return L.override(F.defaults,e,!1)}},{key:"embed",value:function(t){function n(e,t){return o[e]||o[e[0]]||t}function r(e){var t=n(e);return null==t?Promise.resolve():Promise.resolve().then(function(){return/^\{[\s\S]*\}$/.test(t)?t:L.requestText(t).catch(function(n){throw i.create('Could not load resource "'+e+'" at "'+t+'"')})}).then(function(n){try{return JSON.parse(n)}catch(n){throw i.create('Could not parse resource "'+e+'". "'+t+'"')}})}function a(e){function i(e,t,n,i){if(null!=n)return L.set(e,t,null!=i?i(n):n)}return i(e,["media","src"],n("src")),i(e,["media","poster"],n("poster")),i(e,["media","startTime"],n("time"),parseFloat),i(e,["autoplay"],n("autoplay"),function(e){return/true|false/.test(e)?"true"==e:e}),i(e,["container"],"SCRIPT"!==t.nodeName?t:t.parentNode.insertBefore(document.createElement("div"),t.nextSibling)),i(e,["container","style","width"],n("width"),I.toSize),i(e,["container","style","height"],n("height"),I.toSize),e}if(null==t)return Promise.reject(i.create("Invalid DOM element"));var o=t.dataset;o.embedded=!0;var s=n("id",t.id||L.createUID());return o.id!==s&&(o.id=s),null!=e.instances[s]?Promise.reject(i.create('Player with id "'+s+'" already exists.')):(e.instances[s]=!0,Promise.all([r("defaults"),r("config"),r("media")]).then(function(n){var i=n[0];if(null==i||(e.defaults(i),"script"!=t.nodeName.toLowerCase()||1!==n.filter(function(e){return null!=e}).length)){null!=n[2]&&(n[2]={media:n[2]}),n.push(a({id:s,dataset:L.clone(o)}));var r=L.merge(n);return e.create(r)}}))}}]),e}(),ft=a.create(dt);L.mixin(dt,ft),dt.addEventListener(D.CREATE,function(e){var t=e.detail;ht.push(e.detail),null!=t.id&&(ht[t.id]=t)}),dt.addEventListener(D.DESTROY,function(e){var t=e.detail,n=ht.indexOf(t);ht.splice(n,1),null!=t.id&&delete ht[t.id]});var pt=function(){function e(t,n,i,r){babelHelpers.classCallCheck(this,e),this.id=t,this.name=n,this.logo=i,this.metadata=r}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r){return new e(t,n,i,r)}}]),e}(),yt=function(){function e(t){var n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:[],i=this,r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:[],a=arguments[3];babelHelpers.classCallCheck(this,e),this.list=[],this.featured=n,this.footprints=r,this.metadata=a,t.forEach(function(e){return i.add(e)})}return babelHelpers.createClass(e,[{key:"add",value:function(e){return this.list.push(e),this[e.id]=e,e}},{key:"slice",value:function(e,t){return this.list.forEach(e,t)}},{key:"splice",value:function(e,t){for(var n,i=arguments.length,r=Array(i>2?i-2:0),a=2;a<i;a++)r[a-2]=arguments[a];return(n=this.list).splice.apply(n,[e,t].concat(r))}},{key:"forEach",value:function(e){return this.list.forEach(e)}},{key:"some",value:function(e){return this.list.some(e)}},{key:"filter",value:function(e){return this.list.filter(e)}},{key:"map",value:function(e){return this.list.map(e)}},{key:"reduce",value:function(e,t){return this.list.reduce(e,t)}},{key:"includes",value:function(e){return this.list.includes(e)}},{key:"indexOf",value:function(e){return this.list.indexOf(e)}},{key:"item",value:function(e){return this.list[e]}},{key:"length",get:function(){return this.list.length}}],[{key:"create",value:function(t,n,i,r){return new e(t,n,i,r)}}]),e}(),At={VIDEO:"video",AUDIO:"audio"},vt={AUTO:"auto",MANUAL:"manual"},gt=function e(t,n,i){babelHelpers.classCallCheck(this,e),this.key=t,this.token=n,this.expiration=i},mt=function e(){babelHelpers.classCallCheck(this,e),this.src=null,this.debug=null,this.type=null,this.metadata={}},bt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.source=null,e.title=null,e.description=null,e.link=null,e.guid=null,e.pubDate=null,e.poster=null,e.thumbnail=null,e.embed=null,e.category=null,e.medium=null,e.duration=null,e.track=null,e.scenes=null,e.startTime=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,null,[{key:"DEFAULT",get:function(){return{src:L.blankVideo(),type:L.mimeTypes.mp4,temporalType:"vod",medium:"video"}}}]),t}(mt),kt=function(e){function t(e,n,i){babelHelpers.classCallCheck(this,t);var r=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return r.player=e,r.config=n||{},r.key=i,r.logger=new w(r.debug),Object.values(D).forEach(function(e){var t=r["on"+e];null!=t&&"function"==typeof t&&(t=r["on"+e]=t.bind(r),r.player.addEventListener(e,t))}),r}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"destroy",value:function(){var e=this;Object.values(D).forEach(function(t){var n=e["on"+t];null!=n&&"function"==typeof n&&e.player.removeEventListener(t,n)}),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.player=null,this.config=null,this.key=null}},{key:"bindHandlers",value:function(e){var t=this;e instanceof Array==0&&(e=[e]),e.forEach(function(e){t[e]=t[e].bind(t)})}},{key:"debug",get:function(){return null!=this.config.debug?this.config.debug:this.player.config.debug}},{key:"data",get:function(){return this.player.evaluateBindings(this.config)}}],[{key:"createFactory",value:function(e){return function(e,t,n){var i=this;return new Promise(function(r,a){try{var o=new i(e,t,n);r(o)}catch(e){a(e)}})}.bind(e)}},{key:"createPureMVCFactory",value:function(e){return function(t,n,i){return new Promise(function(i,r){try{var a=new e;a.parentModule=t,a.player=t,a.config=n,t.registerModule(a),i(a)}catch(e){r(e)}})}}}]),t}(a),Et=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.feature="ads",i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e){var n=e.type;"timeupdate"!=n&&"timeremaining"!=n&&this.player.logger.log("[AMP AD EVENT] "+n,e),"function"==typeof this.player.sendNotification&&this.player.sendNotification("ads"+n,e.detail),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e),this.player.dispatch("ad"+n,e.detail)}}]),t}(kt),_t=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.feature="auth",i.provider=null,i.providers=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"dispatchEvent",this).call(this,e),Object.values(se).includes(e.type)&&this.player.dispatchEvent(e)}}]),t}(kt),Tt=function(){function e(t,n,i,r,a,o,s,l,u,c,h,d,f){babelHelpers.classCallCheck(this,e),this.id=t,this.title=n,this.duration=i,this.position=r,this.type=a,this.partner=o,this.advertiser=s,this.companions=l,this.request=u,this.metadata=c,this.totalAds=h,this.time=d,this.clickThrough=f}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r,a,o,s,l,u,c,h,d,f){return new e(t,n,i,r,a,o,s,l,u,c,h,d,f)}}]),e}(),Ct=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.plugin=null,n.proxy=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.proxy=this.facade.retrieveProxy(Q.NAME),this.plugin=this.facade}},{key:"dispatchEvent",value:function(e,t){"string"!=typeof e&&(t=e.getBody(),null==t&&(t={}),e=e.getName()),this.player.sendNotification(J.DISPATCH_EVENT,r.create(e,t));var n=this.plugin.feature;null!=n&&"auth"!==n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),"");var i=r.create(e,t);return this.sendNotification(J.DISPATCH_EVENT,i),i}}]),t}(Ye),Nt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.STARTED,J.ENDED]}},{key:"started",value:function(){this.proxy.contentStarted()}},{key:"ended",value:function(){this.proxy.contentEnded()}}],[{key:"NAME",get:function(){return"AdContentController"}}]),t}(Ct),Pt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.START,J.PLAY,J.PAUSE,J.TOGGLE_PLAY_PAUSE,J.VOLUME_CHANGE,J.PLAY_STATE_CHANGE]}},{key:"start",value:function(){this.sendNotification(J.REQUEST_PLAY),this.playback.initialized===!1&&this.player.sendNotification(J.INITIALIZED),this.proxy.start()}},{key:"play",value:function(){if(this.applicationState.getLocked()!==!0){if(this.sendNotification(J.REQUEST_PLAY),this.proxy.getStarted()===!1)return void this.sendNotification(J.START,!0);this.proxy.play(),this.player.sendNotification(J.CHANGE_PLAY_STATE,re.PLAYING)}}},{key:"pause",value:function(){var e=this,t=this.proxy.adVO.time,n=this.proxy.adVO.duration;if("undefined"===t||!t||t===n){var i={transform:function(t){if(t===J.PLAYING)return e.player.timers.setTimeout(function(){return e.player.removeTransform($.PLAY_STATE,i),e.player.sendNotification(J.PAUSE)},300),t},priority:2};return void this.player.addTransform($.PLAY_STATE,i)}this.proxy.pause(),this.player.sendNotification(J.CHANGE_PLAY_STATE,re.PAUSED)}},{key:"toggleplaypause",value:function(){var e=this.proxy.getPaused()||this.proxy.getStarted()===!1?J.PLAY:J.PAUSE;this.sendNotification(e,!0)}},{key:"volumechange",value:function(e){this.proxy.setVolume(e)}},{key:"playstatechange",value:function(e){"playing"===e.value&&this.sendNotification(je.AD_PLAYING,this.proxy.adVO)}}],[{key:"NAME",get:function(){return"AdCoreController"}}]),t}(Ct),St=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.pods=[],n.content=new Nt,n.ads=new Pt,n.processAdBreak=n.processAdBreak.bind(n),n.processAdRequest=n.processAdRequest.bind(n),n.inProgress=!1,n.paused=!1,n.started=!1,n.adVO=null,n.contextName="ad",n.container=null,n.partner=null,n.pods=null,n.mediaChanging=!1,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createDefaultAdVO",value:function(){return new Tt(null,null,null,null,null,this.partner,null,null,null,null,null)}},{key:"getContainer",value:function(){return this.facade.player.adContainer||this.facade.player.container}},{key:"setCompanions",value:function(e){return this.adVO.companions=e,this.sendNotification(je.AD_COMPANION,this.adVO),e}},{key:"getCompanions",value:function(){var e;return null!=(e=this.adVO)?e.companions:void 0}},{key:"getInProgress",value:function(){return this.inProgress}},{key:"setInProgress",value:function(e){return this.inProgress=e,e}},{key:"getStarted",value:function(){return this.started}},{key:"setStarted",value:function(e){return this.started=e,e}},{key:"getPaused",value:function(){return this.paused}},{key:"setPaused",value:function(e){return this.paused=e,e}},{key:"setCues",value:function(e){var t=T.transform(e,T.map(function(e){return{startTime:e,endTime:e}}));return this.facade.player.mediaProxy.setCues(t),e}},{key:"play",value:function(){this.setPaused(!1),this.sendNotification(je.AD_PLAY,this.adVO)}},{key:"pause",value:function(){this.setPaused(!0),this.sendNotification(je.AD_PAUSE,this.adVO)}},{key:"breakStart",value:function(){this.setInProgress(!0)}},{key:"breakEnd",value:function(){this.setInProgress(!1),this.reset()}},{key:"error",value:function(e){var t=!(arguments.length>1&&void 0!==arguments[1])||arguments[1],n=("function"==typeof e.getMessage?e.getMessage():void 0)||e.message;this.facade.logger.error("[AMP AD ERROR]",n+" Skipping ad content.",e),null==this.adVO&&(this.adVO={}),this.adVO.error=e,this.sendNotification(je.AD_ERROR,this.adVO),t===!0&&this.endBreak()}},{key:"engage",value:function(e){this.getEnabled()!==!1&&(this.setStarted(!1),this.getInProgress()&&(this.reset(),this.facade.player.sendNotification(J.REMOVE_APPLICATION_STATE,"ad-mode")),this.engageAds())}},{key:"engageAds",value:function(){this.engaged!==!0&&(this.engaged=!0,this.core=this.facade.player.removeMediator(Fe.NAME),this.facade.removeMediator(Nt.NAME),this.facade.registerMediator(this.ads))}},{key:"reset",value:function(){this.engaged=!1,this.facade.removeMediator(Pt.NAME),this.facade.player.registerMediator(this.core),this.facade.registerMediator(this.content)}},{key:"processAdRequest",value:function(e){var t=this;return this.facade.player.transform($.AD_REQUEST,e).then(function(e){return t.facade.transform($.AD_REQUEST,e)})}},{key:"processAdBreak",value:function(e){var t=this;return this.facade.player.transform($.AD_BREAK,e).then(function(e){return t.facade.transform($.AD_BREAK,e)})}},{key:"requestAd",value:function(){this.sendNotification(je.REQUEST,this.adVO)}},{key:"getPodById",value:function(e){return this.pods.find(function(t){return t.id===e})}},{key:"setPodLocks",value:function(e){var t=this;e.forEach(function(e){var n=t.getPodById(e.id);null!=n&&(n.locked=e.locked)})}},{key:"resize",value:function(e){}},{key:"startBreak",value:function(e){return null!=e&&(this.adVO=e),this.setStarted(!0),this.sendNotification(je.BREAK_START,this.adVO),this.getEnabled()!==!1||(this.endBreak(),!1)}},{key:"endBreak",value:function(){this.sendNotification(je.BREAK_END,this.adVO)}},{key:"start",value:function(){this.mediaChanging=!1,this.startBreak()}},{key:"contentPlay",value:function(){this.facade.player.sendNotification(J.PLAY,!0)}},{key:"contentPause",value:function(){var e=this.facade.player.mediaElement;e.seeking===!0?e.once("seeked",function(){e.pause()}):e.pause()}},{key:"contentStarted",value:function(){}},{key:"contentSeek",value:function(e){}},{key:"contentEnded",value:function(){}},{key:"setVolume",value:function(e){}},{key:"getVolume",value:function(){}},{key:"terminateAd",value:function(){}},{key:"terminateAllAds",value:function(){}}],[{key:"NAME",get:function(){return Ze.NAME}}]),t}(Ze),Ot=function(){function e(t,n,i,r){var a=this;babelHelpers.classCallCheck(this,e),this.request=t,this.partner=n,this.config=i,T.each(r,function(e,t){return a[t]=e})}return babelHelpers.createClass(e,null,[{key:"create",value:function(t,n,i,r){return new e(t,n,i,r)}}]),e}(),Mt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.MEDIA_CHANGE,je.BREAK_START,je.BREAK_END,J.SEEKED,je.AD_CONTAINER_CREATED,J.REPLAY]}},{key:"mediachange",value:function(e){this.proxy.getEnabled()!==!1&&(this.proxy.mediaChanging=!0,this.proxy.engage(e))}},{key:"seeked",value:function(e){this.proxy.contentSeek(e)}},{key:"replay",value:function(){"function"==typeof this.proxy.replay&&this.player.getAutoplay()===!1&&this.proxy.replay()}},{key:"adscontainercreated",value:function(e){this.proxy.container=e}},{key:"adsbreakstart",value:function(){this.proxy.breakStart()}},{key:"adsbreakend",value:function(e){var t,n=this;this.proxy.breakEnd(),"ima"===(null!=e?e.partner:void 0)&&(t=this.applicationState.getPlaybackRate(),this.facade.player.setPlaybackRate(t)),this.doAfter(function(){n.applicationState.getEnded()&&n.applicationState.getHasPostContent()===!0&&n.sendNotification(J.MEDIA_SEQUENCE_ENDED)})}}],[{key:"NAME",get:function(){return"AdController"}}]),t}(Ct),Rt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return Object.values(je)}},{key:"handleNotification",value:function(e){this.dispatchEvent(e.getName(),e.getBody())}},{key:"dispatchEvent",value:function(e,t){e=e.replace(/^(ads)/,""),this.sendNotification(J.DISPATCH_EVENT,r.create(e,t)),this.facade.player.sendNotification(J.DISPATCH_EVENT,r.create("ad"+e,t))}}],[{key:"NAME",get:function(){return"AdEventController"}}]),t}(Ct),Ht=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.feature="ads",e.container=null,Object.defineProperties(e,{enabled:{get:e.getEnabled,set:e.setEnabled,enumerable:!0,configurable:!1},inProgress:{get:e.getInProgress,enumerable:!0,configurable:!1},started:{get:e.getStarted,enumerable:!0,configurable:!1},paused:{get:e.getPaused,enumerable:!0,configurable:!1},companions:{get:e.getCompanions,enumerable:!0,configurable:!1},currentAd:{get:e.getCurrentAd,enumerable:!0,configurable:!1}}),e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.proxy=this.isFullscreenDevice()?this.createFullscreenProxy():this.createProxy(),this.registerProxy(this.proxy)}},{key:"createController",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this),this.registerMediator(new Mt),this.registerMediator(new Rt)}},{key:"isFullscreenDevice",value:function(){return L.isFullscreenDevice()}},{key:"createProxy",value:function(){}},{key:"createFullscreenProxy",value:function(){}},{key:"listNotificationInterests",value:function(){return[J.MEDIA_CHANGE,J.REPLAY,J.PLAY,J.PAUSE,J.PAUSED,J.START,J.STARTED,J.ENDED,J.READY,J.VOLUME_CHANGE,J.FULL_SCREEN_CHANGE,J.CHANGE_ACTIVE_STATE,J.PLAY_STATE_CHANGE,J.SEEKED,J.TOGGLE_PLAY_PAUSE]}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat(Object.values(je)).concat([J.REQUEST_PLAY,J.DISPLAY_TIME,J.DISABLE_FULL_SCREEN,J.ENABLE_VIDEO_EVENTS,J.DISABLE_VIDEO_EVENTS,J.HAS_POST_CONTENT,J.MEDIA_SEQUENCE_ENDED,J.CHANGE_PLAY_STATE,J.AUTOPLAY_BLOCKED])}},{key:"setEnabled",value:function(e){this.proxy.setEnabled(e)}},{key:"getEnabled",value:function(){return this.proxy.getEnabled()}},{key:"getInProgress",value:function(){return this.proxy.getInProgress()}},{key:"getStarted",value:function(){return this.proxy.getStarted()}},{key:"getPaused",value:function(){return this.proxy.getPaused()}},{key:"getCompanions",value:function(){return this.proxy.getCompanions()}},{key:"getCurrentAd",value:function(){return this.proxy.adVO}},{key:"setPodLocks",value:function(e){this.proxy.setPodLocks(e)}},{key:"resize",value:function(e){this.proxy.resize(e)}},{key:"terminateAd",value:function(){this.proxy.terminateAd()}},{key:"terminateAllAds",value:function(){this.proxy.terminateAllAds()}},{key:"requestAd",value:function(){this.proxy.start(!1)}}],[{key:"NAME",get:function(){return"AdPlugin"}}]),t}(Xe),Lt={VISIBILITY_CHANGE:"captioningvisibilitychange",ENABLED:"captioningenabled",TRACKS_LOADED:"captioningtracksloaded",TRACK_SELECTED:"captioningtrackselected",CHANGE_CUE:"captioningchangecue",CUE_CHANGE:"captioningcuechange",SETTINGS_VISIBILITY_CHANGE:"captioningsettingsvisibility",SETTINGS_CHANGE:"captioningsettingschange"},It=function(e){function t(e){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.plugin=this.facade.retrieveProxy(Q.NAME),this.media=this.facade.player.retrieveProxy(_e.NAME)}},{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.facade.viewComponent=this.viewComponent}}]),t}(Ve),wt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,"captioning"))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.captioningStyle=this.create(null,this.viewComponent,"style"),this.captioningStyle.type="text/css",this.applyStyles()}},{key:"listNotificationInterests",value:function(){return[Lt.VISIBILITY_CHANGE,Lt.ENABLED,Lt.TRACK_SELECTED,J.SETTINGS_CHANGE]}},{key:"onRemove",value:function(){this.captioningStyle&&this.viewComponent.removeChild(this.captioningStyle)}},{key:"handleNotification",value:function(e){var t=e.getBody(),n=t?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE,i=void 0;switch(e.getName()){case Lt.TRACK_SELECTED:i="cc-embedded",n="embedded"===t.type?J.ADD_APPLICATION_STATE:J.REMOVE_APPLICATION_STATE;break;case Lt.VISIBILITY_CHANGE:i="cc-active";break;case Lt.ENABLED:n=t?J.ADD_CONTROL_STATE:J.REMOVE_CONTROL_STATE,i="cc-enabled",t||this.sendNotification(J.REMOVE_APPLICATION_STATE,"cc-active");break;case J.SETTINGS_CHANGE:null!=t.captions&&this.applyStyles()}null!=i&&this.sendNotification(n,i)}},{key:"applyStyles",value:function(){var e=this.facade.settings,t=this.facade.settings.styles,n=I.toCSS(t.window,!0,"\n"),i=I.toCSS(t.text,!0,"\n"),r="#"+this.facade.player.viewComponent.id;null!=e.visible&&(this.facade.hidden=!e.visible);var a=r+" .amp-caption {"+n+"}\n"+(r+" .amp-caption p, "+r+" .amp-caption span {"+i+"}\n");a+=L.isChrome()?r+" video::cue {"+i+n+"}\n":r+" video::-webkit-media-text-track-display-backdrop {"+n+"}\n"+(r+" video::cue {"+i+"}\n")+(r+" video::-webkit-media-text-track-display span {"+i+"}"),this.captioningStyle.innerHTML=a}}]),t}(It),Dt={AUTO:"auto",HTML:"html",NATIVE:"native"},xt=/subtitles|captions|descriptions/i,Gt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.providers={},n.tracks=[],n.rendererMap=[],n.track={},n.defaults={renderer:Dt.AUTO,crossorigin:null},n.enabled=!1,n.hidden=!0,n.captions=null,n.loaded=!0,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"onRegister",value:function(){this.renderer=this.getValue("renderer")||Dt.AUTO}},{key:"getCrossOrigin",value:function(){return this.getValue("crossorigin")}},{key:"getTracks",value:function(){return this.tracks}},{key:"setTracks",value:function(e){var t=this;if(this.tracks=[],this.track=null,e=this.facade.player.evaluateBindings(e),
null!=e){var n=e.length,i=0,r=function(){i++,i===n&&(t.sendNotification(Lt.TRACKS_LOADED,t.tracks),t.autoSelectTrack())};return e.forEach(function(e){if(xt.test(e.kind)){var n=Le.create(e,r);n.once("error",function(e){return t.facade.dispatch(D.TRACK_ERROR,e.data)}),t.tracks.push(n)}}),e}}},{key:"registerRenderer",value:function(e){null!=e&&(e.proxy=this,this.rendererMap.push(e))}},{key:"retrieveRenderer",value:function(e){return this.rendererMap.find(function(t){return t.getRendererName()===e})}},{key:"removeRenderer",value:function(e){var t=this.retrieveRenderer(e);if(t.proxy=null,null==t)return null;var n=this.rendererMap.indexOf(t);return this.rendererMap.splice(n,1),t}},{key:"getRenderer",value:function(){return this.renderer}},{key:"setRenderer",value:function(e){return e===this.renderer?e:(this.renderer=e,this.selectRenderer(this.facade.player.media),e)}},{key:"getCurrentRenderer",value:function(){var e=this.facade.retrieveMediator(t.TEXT_TRACK_RENDERER);return e&&e.getRendererName()}},{key:"selectRenderer",value:function(e){var n=e.track;if(null!=n){var i=this.renderer;if(this.rendererMap.map(function(e){return e.getRendererName()}).includes(i)||(i=Dt.AUTO),"auto"===i&&(i=T.find(this.rendererMap,T.filter(function(e){return n.some(function(t){return e.canUseResource(t)})}),T.map(function(e){return e.getRendererName()}))),this.getCurrentRenderer()!==i){this.facade.removeMediator(t.TEXT_TRACK_RENDERER);var r=this.retrieveRenderer(i);null!=r&&this.facade.registerMediator(r)}}}},{key:"getTrack",value:function(){return this.track}},{key:"setTrack",value:function(e){return this.track=e,this.captions=this.track.cues,this.sendNotification(J.CHANGE_SETTINGS,{captions:{track:this.track.flatten()}}),this.sendNotification(Lt.TRACK_SELECTED,this.track),e}},{key:"selectTrackByIndex",value:function(e){var t=null;return e>=0&&e<this.tracks.length&&(t=this.tracks[e],this.setTrack(t)),t}},{key:"selectTrackByLanguage",value:function(e){var t=this.tracks.find(function(t){return t.language===e});return null!=t&&this.setTrack(t),t}},{key:"getHidden",value:function(){return this.hidden}},{key:"setHidden",value:function(e){return this.hidden=e,e}},{key:"getEnabled",value:function(){return this.enabled}},{key:"setEnabled",value:function(e){return this.enabled=e,e}},{key:"autoSelectTrack",value:function(){var e=null,t=this.facade.player.retrieveProxy(Ae.NAME).getLanguage();return null!=t&&(t=t.split("-").shift(),e=this.selectTrackByLanguage(t)),null==e&&(e=this.tracks[0],this.setTrack(e)),e}},{key:"getTextTracks",value:function(){return Array.from(this.facade.player.getMediaElement().textTracks)}},{key:"getTextTrack",value:function(){var e=this.getTrack();if(e){var t=e.kind,n=e.language,i=this.getTextTracks().filter(function(e){return xt.test(e.kind)&&(e.language===n||!e.language.length)}).sort(function(e,i){var r=0;return e.kind===t&&i.kind!==t&&r++,e.kind!==t&&i.kind===t&&r--,e.language===n&&i.language!==n&&r++,e.language!==n&&i.language===n&&r--,r});return i[i.length-1]}}}],[{key:"NAME",get:function(){return Q.NAME}},{key:"TEXT_TRACK_RENDERER",get:function(){return"caption-text"}}]),t}(Ze),Ut=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,null,e));return n.proxy=null,n.handleInline=n.handleInline.bind(n),n.inlineTypes=[L.mimeTypes.vtt,L.mimeTypes.cea608,L.mimeTypes.cea708],n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getRendererName",value:function(){return"html"}},{key:"onRegister",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onRegister",this).call(this),this.proxy=this.facade.retrieveProxy(Gt.NAME);var e=this.proxy.getTrack();if(null!=e){var n=e.activeCues;n.length>0&&this.render(n),this.initInline()}}},{key:"onRemove",value:function(){this.clear()}},{key:"canUseResource",value:function(e){if(null==e)return!1;var t=[L.mimeTypes.srt,L.mimeTypes.ttml].concat(this.inlineTypes);return t.includes(e.type)}},{key:"initInline",value:function(){var e=this.proxy.getTextTrack(),t=this.proxy.track;t&&e&&this.inlineTypes.includes(t.type)&&(this.proxy.getTextTracks().forEach(function(e){return e.mode="hidden"}),e.addEventListener("cuechange",this.handleInline,!0),this.handleInline({target:e}))}},{key:"handleInline",value:function(e){var t=this.convertCues(e.target.activeCues);this.sendNotification(Lt.CHANGE_CUE,t)}},{key:"convertCues",value:function(e){return Array.from(e,function(e){var t=e.text;if(!/^\{\".*}$/.test(t))return e.html=Me.createHTML(t),e}).filter(function(e){return!!e})}},{key:"getCaptionDisplayHeight",value:function(){for(var e=0,t=length=this.viewComponent.childNodes.length;--t&&(3!==length||0!==t);)e+=L.getActualSize(this.viewComponent.childNodes[t]).height;return e+"px"}},{key:"scrollCaptions",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.viewComponent.scrollHeight,t=this,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.viewComponent.scrollTop,i=arguments.length>2&&void 0!==arguments[2]?arguments[2]:20,r=(e-n)/i,a=this.viewComponent,o=function i(){if(n<e)return a.scrollTop=n+=r,t.facade.player.timers.setTimeout(i,20);for(var o=[];a.childNodes.length>2;)o.push(a.removeChild(a.firstChild));return o};o()}},{key:"computeStyles",value:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:0,n=arguments[2],i=function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:100;return e=parseInt(e),isNaN(e)?t:e},r=function(e){return e+"%"},a={position:"absolute",overflow:"visible",minWidth:"min-content"},o=e.align||"middle",s=i(e.position,"auto"),l=i(e.size),u=i(e.line,"auto"),c="auto"==s;switch(o){case"left":case"start":a.textAlign="start",c&&(s=0);break;case"middle":case"center":a.textAlign="center",c&&(s=(100-l)/2);break;case"right":case"end":a.textAlign="end",c&&(s=100)}return a.left=r(s),c||100!==l||(l-=s),a.width=r(l),u<0||u>100?u=100:"auto"===u&&(u=100-t),e.snapToLines===!0?a.top=u*(n.height+1)+"px":a.top=r(u),e.visible===!1&&(a.visibility="hidden"),a}},{key:"adjustCaptions",value:function(){var e=this,t=this.viewComponent.getBoundingClientRect();this.elements.forEach(function(n){return e.adjustCaption(n,t)})}},{key:"adjustCaption",value:function(e,t){var n=e.getBoundingClientRect(),i=e.style;n.bottom>t.bottom&&(i.top="auto",i.bottom="0%"),n.right>t.right&&(i.left="auto",i.right="0%")}},{key:"listNotificationInterests",value:function(){return[Lt.CUE_CHANGE,J.CHANGE_MEDIA,J.LOADED_METADATA,J.CAN_PLAY_THROUGH]}},{key:"handleNotification",value:function(e){var t=e.getName(),n=e.getBody();this.viewComponent;switch(t){case J.CHANGE_MEDIA:this.clear();break;case Lt.CUE_CHANGE:this.render(n);break;case J.LOADED_METADATA:case J.CAN_PLAY_THROUGH:this.initInline()}}},{key:"clear",value:function(){this.viewComponent.innerHTML="",this.elements=null}},{key:"createCaption",value:function(e,t,n){return this.viewComponent.appendChild(ye.createElement({class:"amp-caption-area",style:this.computeStyles(e,t,n),children:[{class:"amp-caption",innerHTML:e.html}]}))}},{key:"getLineBounds",value:function(){var e=this.createCaption({html:"CUE",visible:!1},0),t=e.getBoundingClientRect();return this.viewComponent.removeChild(e),t}},{key:"processCues",value:function(e){for(var t=e.slice(),n=e.length,i=0,r="";i<n;){var a=t[i],o=a.line;("auto"==o||o>=100||o<0)&&(o=100),100==o?(t.splice(i,1),n--,r+=a.text+"\n"):++i}return r.length>0&&t.push({text:r,html:Me.createHTML(r),line:100}),t}},{key:"render",value:function(e){var t=this,n=this.viewComponent,i=this.facade.player.settings.captions||{};switch(i.scroll=i.scroll.toLowerCase().replace("-",""),"painton"===i.scroll?this.classList.add("captioning-typed"):this.classList.remove("captioning-typed"),i.scroll){case"popout":this.clear();var r=e.length-1,a=this.getLineBounds();this.elements=T.transform(this.processCues(e),T.map(function(e){return t.createCaption(e,r--,a)})),this.adjustCaptions();break;case"rollon":case"painton":var o=e.reduce(function(t,n){return t+(n.html||e.text)}),s=document.createElement("div");s.innerHTML=o,Array.from(s.children).forEach(function(e){n.children.length&&new RegExp(e.innerText).test(n.lastChild.innerText)||n.appendChild(e)}),n.style.maxHeight=this.getCaptionDisplayHeight(),this.scrollCaptions()}}}],[{key:"NAME",get:function(){return Gt.TEXT_TRACK_RENDERER}}]),t}(me),jt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME,e));return n.proxy=null,n.track=null,n.handleInline=n.handleInline.bind(n),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getRendererName",value:function(){return"native"}},{key:"canUseResource",value:function(e){if(null==e)return!1;var t=null!=document.createElement("video").textTracks;if(!t)return!1;var n=[L.mimeTypes.vtt,L.mimeTypes.cea608,L.mimeTypes.cea708],i=/iphone|ipad/.test(L.getDevice());return!!i&&n.indexOf(e.type)!==-1}},{key:"onRegister",value:function(){this.proxy=this.facade.retrieveProxy(Gt.NAME),this.loadTracks(),this.updateTrack()}},{key:"onRemove",value:function(){this.unloadTracks()}},{key:"listNotificationInterests",value:function(){return[Lt.VISIBILITY_CHANGE,Lt.TRACK_SELECTED,J.LOADED_METADATA,J.CAN_PLAY_THROUGH]}},{key:"handleNotification",value:function(e){e.getBody();switch(e.getName()){case Lt.TRACK_SELECTED:case Lt.VISIBILITY_CHANGE:case J.CAN_PLAY_THROUGH:this.updateTrack();break;case J.LOADED_METADATA:this.loadTracks()}}},{key:"unloadTracks",value:function(){this.proxy.getTextTracks().forEach(function(e){return e.mode="hidden"});var e=this.facade.player.getMediaElement(),t=Array.from(e.children);t.forEach(function(t){return e.removeChild(t)})}},{key:"loadTracks",value:function(){this.unloadTracks();var e=this.proxy.getTracks();if(null!=e){var t=this.facade.player.getMediaElement(),n=this.proxy.getCrossOrigin();null!=n&&t.setAttribute("crossorigin",n),e.forEach(function(e){if(e.type===L.mimeTypes.vtt){var n=document.createElement("track");n.src=e.src,null!=e.kind&&(n.kind=e.kind),null!=e.language&&(n.srclang=e.language),null!=e.label&&(n.label=e.label),n.default="default"in e,t.appendChild(n)}})}}},{key:"updateTrack",value:function(){null!=this.track&&(this.track.mode="hidden");var e=this.proxy.getTextTrack();e&&(this.track=e,this.proxy.getHidden()?(this.track.removeEventListener("cuechange",this.handleInline,!0),this.track.mode="hidden"):(this.track.addEventListener("cuechange",this.handleInline,!0),this.track.mode="showing"))}},{key:"handleInline",value:function(e){this.sendNotification(Lt.CHANGE_CUE,Array.from(e.target.activeCues))}}],[{key:"NAME",get:function(){return Gt.TEXT_TRACK_RENDERER}}]),t}(ge),Vt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME));e.captions=[],e.head=document.getElementsByTagName("head")[0];var n=window.com||{};return n.akamai=n.akamai||{},n.akamai.amp=n.akamai.amp||{},n.akamai.amp.plugins=n.akamai.amp.plugins||{},n.akamai.amp.plugins.subply=n.akamai.amp.plugins.subply||{},n.akamai.amp.plugins.subply.response=function(t){e.parse(t),e.poll()},null==window.com&&(window.com=n),e.data={base:"http://test.plymedia.com.s3.amazonaws.com/online/Akamai_",interval:1e3},e.caption=null,e.head=null,e.script=null,e.timeout=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getURL",value:function(){return this.data.url}},{key:"setURL",value:function(e){return this.data.url=e,e}},{key:"start",value:function(){this.send()}},{key:"poll",value:function(){var e,t=this;e=this.facade.player.timers.setTimeout(function(){t.send()},this.data.interval||1e3)}},{key:"send",value:function(){var e=this;null!=this.script&&this.head.removeChild(this.script),this.script=L.loadScript(this.data.base+this.data.url+".js?nocache="+Date.now()).then(function(t){return e.script=t}).catch(function(t){return e.facade.logger.error("[AMP CAPTIONING ERROR]",t)})}},{key:"stop",value:function(){clearTimeout(timeout)}},{key:"parse",value:function(e){if(e.Stream===this.data.url&&!(null!=this.caption&&this.caption.id>=e.Ticks))return this.caption=new Ne(L.flattenTimecode(e.From),L.flattenTimecode(e.To),e.Ticks),this.caption.text=e.Text,html="",T.each(e.Text.split("\n"),function(e){""!==html&&(html+="<br />"),html+="<span>"+e+"</span>"}),this.caption.html="<p>"+html+"</p>",this.sendNotification(Lt.CUE_CHANGE,[this.caption]),this.caption}}]),t}(puremvc.Proxy);Vt.NAME="LiveCaptionProxy";var Bt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,t.NAME))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"listNotificationInterests",value:function(){return[J.CHANGE_MEDIA,J.STARTED,J.TIME_UPDATE,Lt.VISIBILITY_CHANGE,Lt.ENABLED,Lt.CHANGE_CUE,Lt.TRACK_SELECTED,Lt.TRACKS_LOADED,Lt.CUE_CHANGE]}},{key:"changemedia",value:function(e){return this.proxy.setTracks(e.track),0===this.proxy.getTracks().length?void this.sendNotification(Lt.ENABLED,!1):(this.proxy.selectRenderer(e),void this.sendNotification(Lt.ENABLED,!0))}},{key:"started",value:function(){var e=this.proxy,t=e.getTrack();null==t&&e.getTracks().length>0&&(t=e.autoSelectTrack()),null!=t&&t.isLive===!0&&(e=this.facade.retrieveProxy(Vt.NAME),null==e&&(e=new Vt,this.facade.registerProxy(e)),e.setURL(t.src),e.start())}},{key:"timeupdate",value:function(e){var t=this.proxy.getTrack();if(null!=t&&t.isLive!==!0){var n=t.activeCues,i=!1;t.cues.forEach(function(t){if(null!=t){var r=n.indexOf(t);i=!0,e>=t.startTime&&e<t.endTime?r===-1&&n.push(t):r!==-1&&n.splice(r,1)}}),i===!0&&this.sendNotification(Lt.CHANGE_CUE,n)}}},{key:"captioningvisibilitychange",value:function(e,t){var n=!e;n!==this.proxy.getHidden()&&(this.proxy.setHidden(n),this.dispatchEvent(t))}},{key:"captioningenabled",value:function(e,t){this.proxy.setEnabled(e),this.dispatchEvent(t)}},{key:"captioningchangecue",value:function(e){var t=this;this.player.transform($.CUE_CHANGE,e).then(function(e){null!=e&&t.sendNotification(Lt.CUE_CHANGE,e)}).catch(function(n){t.sendNotification(Lt.CUE_CHANGE,e)})}},{key:"captioningtrackselected",value:function(e,t){this.dispatchEvent(t)}},{key:"captioningtracksloaded",value:function(e,t){this.dispatchEvent(t)}},{key:"captioningcuechange",value:function(e,t){this.dispatchEvent(t)}}],[{key:"NAME",get:function(){return"CaptioningController"}}]),t}(Ct),Yt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.applicationState=null,e.media=null,e.player=null,e.playback=null,e.config=null,e.logger=null,e.bindings=null,e.params=null,e.playerCore=null,e.security=null,e.tracks=null,e.plugin=null,e.proxy=null,e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"initializeNotifier",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"initializeNotifier",this).call(this,e),this.player=this.facade.player||this.facade,this.applicationState=this.player.appState,this.media=this.player.mediaProxy,this.config=this.player.configuration,this.logger=this.player.logger,this.bindings=this.player.bindings,this.params=this.player.params,this.playerCore=this.player.playerCore,this.security=this.player.security,this.tracks=this.player.tracks,this.playback=this.player.playerCore.getActivePlaybackCore()||this.player.playback,this.localization=this.player.localization,this.proxy=this.facade.retrieveProxy(Q.NAME),this.plugin=this.facade}},{key:"doAfter",value:function(e){var t=this;return new Promise(function(n,i){var r=function(){try{e(),n()}catch(e){t.facade.logger.error(e),i(e)}};return t.player.timers.setImmediate(r)})}}]),t}(puremvc.SimpleCommand),Ft=(function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"dispatchEvent",value:function(e,t){"string"!=typeof e&&(t=e.getBody(),null==t&&(t={}),e=e.getName()),this.player.sendNotification(J.DISPATCH_EVENT,r.create(e,t));var n=this.plugin.feature;null!=n&&"auth"!==n&&(e=e.replace(new RegExp("^("+n+")"),"")),n=this.plugin.getModuleName(),e=e.replace(new RegExp("^("+n+")"),"");var i=r.create(e,t);return this.sendNotification(J.DISPATCH_EVENT,i),i}},{key:"dispatchEventAfterCommand",value:function(e,t){this.player.timers.setImmediate(this.dispatchEvent.bind(this,e,t))}},{key:"execute",value:function(e){this.dispatchEvent(e)}}]),t}(Yt),function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.feature="captioning",e.moduleName="captioning",e.mediatorname="",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createController",value:function(){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this),this.registerMediator(new Bt)}},{key:"createModel",value:function(){this.proxy=new Gt(this.config),this.registerProxy(this.proxy)}},{key:"createView",value:function(){var e=new wt;this.registerMediator(e),this.mediatorname=e.getMediatorName();var t=e.viewComponent;this.proxy.registerRenderer(new jt(t)),this.proxy.registerRenderer(new Ut(t))}},{key:"destroy",value:function(){for(;this.proxy.rendererMap.length>=1;){var e=this.proxy.rendererMap[0],t=e.getMediatorName();this.removeMediator(t),this.proxy.removeRenderer(e.getRendererName())}this.removeMediator(this.mediatorname)}},{key:"listNotificationInterests",value:function(){return[J.LOADED_METADATA,J.CAN_PLAY_THROUGH,J.CHANGE_MEDIA,J.STARTED,J.TIME_UPDATE,J.SETTINGS_CHANGE,Lt.TRACK_SELECTED]}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat([Lt.CUE_CHANGE,J.ADD_CONTROL_STATE,J.REMOVE_CONTROL_STATE,J.CHANGE_SETTINGS,Lt.VISIBILITY_CHANGE,Lt.SETTINGS_CHANGE])}},{key:"getEnabled",value:function(){return this.proxy.getEnabled()}},{key:"setEnabled",value:function(e){return this.sendNotification(Lt.ENABLED,e),e}},{key:"getHidden",value:function(){return this.proxy.getHidden()}},{key:"setHidden",value:function(e){return this.setVisible(!e),e}},{key:"getVisible",value:function(){return!this.proxy.getHidden()}},{key:"setVisible",value:function(e){return this.sendNotification(J.CHANGE_SETTINGS,{captions:{visible:e}}),this.sendNotification(Lt.VISIBILITY_CHANGE,e),e}},{key:"getTracks",value:function(){return this.proxy.getTracks()}},{key:"getTrack",value:function(){return this.proxy.getTrack()}},{key:"setTrack",value:function(e){return this.proxy.setTrack(e),e}},{key:"selectTrackByIndex",value:function(e){return this.proxy.selectTrackByIndex(e)}},{key:"selectTrackByLanguage",value:function(e){return this.proxy.selectTrackByLanguage(e)}},{key:"changeSettings",value:function(e){return this.sendNotification(J.CHANGE_SETTINGS,{captions:e}),this.sendNotification(Lt.SETTINGS_CHANGE,e),e}},{key:"getSettings",value:function(){return this.player.settings.captions}},{key:"getRenderer",value:function(){return this.proxy.getRenderer()}},{key:"setRenderer",value:function(e){return this.proxy.setRenderer(e)}},{key:"getCurrentRenderer",value:function(){return this.proxy.getCurrentRenderer()}},{key:"enabled",get:function(){return this.getEnabled()},set:function(e){return this.setEnabled(e)}},{key:"hidden",get:function(){return this.getHidden()},set:function(e){return this.setHidden(e)}},{key:"visible",get:function(){return this.getVisible()},set:function(e){return this.setVisible(e)}},{key:"tracks",get:function(){return this.getTracks()}},{key:"track",get:function(){return this.getTrack()},set:function(e){return this.setTrack(e)}},{key:"settings",get:function(){return this.getSettings()}},{key:"renderer",get:function(){return this.getRenderer()},set:function(e){return this.setRenderer(e)}},{key:"currentRenderer",get:function(){return this.getCurrentRenderer()}}]),t}(Xe)),zt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return Object.defineProperties(n,{instance:{get:n.getInstance,enumerable:!0,configurable:!1}}),n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"getPlaybackProxy",value:function(){return this.proxy.playbackProxy}},{key:"getInstance",value:function(){return this.getPlaybackProxy().player}}]),t}(Xe),Kt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.playbackProxy=null,n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createPlaybackProxy",value:function(){}},{key:"renderer",value:function e(){var t=this,e=this.playbackProxy.renderer(),n=e.id,i=function(t){return null!=(window.MediaSource||window.WebKitMediaSource)&&e.canPlay(t)},r=function(n){var i=T.transform(t.config.resources,T.map(function(e){return dt.resourceManager.item(n.evaluatePaths(e.src))}),T.filter(function(e){return"function"==typeof e}),T.map(function(e){return e()}));return Promise.all(i).then(function(t){return e.factory(n)})};return{id:n,canPlay:i,factory:r}}},{key:"initialize",value:function(){if(this.playbackProxy=this.createPlaybackProxy(),null!=this.playbackProxy){var e=this.facade.player.retrieveProxy(Ee.NAME);e.registerRenderer(this.renderer())}this.sendNotification(J.INITIALIZED)}},{key:"destroy",value:function(){null!=this.playbackProxy&&this.playbackProxy.destroy()}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Ze),qt=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.decryptionTypes=["com.widevine.alpha"],i.temporalTypes=["vod","live","dvr"],i.playbackCoreName="hls",i.player=null,i.hlsConfig=null,i.fragErrorTime=0,i.timedMedatadata=null,i.currentMedatadata=null,i.id3Track=null,i.manifestParsed=!1,i.details=null,i.quality=-1,i.qualityMode="auto",i.userSwitched=!1,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"canPlayMedium",value:function(e){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canPlayMedium",this).call(this,e)||"audio"===e}},{key:"getConfig",value:function(){var e=L.merge({},this.config.data,this.config.settings),t=this.facade.configuration.getValueOf("withCredentials",this.config);if(t===!0){var n="function"==typeof e.xhrSetup?e.xhrSetup:function(){};e.xhrSetup=function(e,t){e.withCredentials=!0,n(e,t)}}e.debug=this.plugin.proxy.getDebug();var i=this.facade.getPreload();i!==B.NONE&&null==e.autoStartLoad&&(e.autoStartLoad=!0),i===B.AUTO&&null==e.startFragPrefetch&&(e.startFragPrefetch=!0);var r=L.getKeySystem(),a=this.facade.getMedia().keys;return null!=a&&a[r]&&(e.emeEnabled=!0,e.widevineLicenseUrl=a[r].serverURL),e.enableSoftwareAES=null==e.enableSoftwareAES||e.enableSoftwareAES,e}},{key:"init",value:function(){var e=this;this.destroy(),this.manifestParsed=!1,this.userSwitched=!1,this.quality=-1;var n=this.getConfig(),i=new Hls(n);i.attachMedia(this.getMediaElement()),i.on(Hls.Events.MANIFEST_PARSED,this.onManifestParsed.bind(this)),i.on(Hls.Events.ERROR,this.onError.bind(this)),i.on(Hls.Events.LEVEL_LOADED,this.onLevelLoaded.bind(this)),i.on(Hls.Events.LEVEL_SWITCHING,this.onLevelSwitching.bind(this)),i.on(Hls.Events.LEVEL_SWITCHED,this.onLevelSwitched.bind(this)),i.on(Hls.Events.AUDIO_TRACK_SWITCHING,this.onAudioTrackSwitch.bind(this)),i.on(Hls.Events.AUDIO_TRACK_SWITCHED,this.onAudioTrackSwitch.bind(this)),i.on(Hls.Events.FRAG_LOADING,this.onFragmentLoadStart.bind(this)),i.on(Hls.Events.FRAG_LOADED,this.onFragmentLoaded.bind(this)),i.on(Hls.Events.FRAG_CHANGED,this.onFragmentChanged.bind(this)),T.each(Hls.Events,function(t){i.on(t,function(t,n){e.plugin.sendNotification(J.DISPATCH_EVENT,r.create(t,n))})});try{T.each(this.config.quality,function(e,t){return i[t]=e})}catch(e){}this.player=i,this.details=null,babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}},{key:"unload",value:function(){this.destroy()}},{key:"applySrc",value:function(){this.currentMedatadata=null,this.player.loadSource(this.getSrc()),this.load()}},{key:"onManifestParsed",value:function(e,t){this.manifestParsed=!0,this.sendNotification(J.QUALITY_LEVELS_LOADED,t.levels),this.player.loadLevel=-1}},{key:"onLevelLoaded",value:function(e,t){this.player.levels[t.level].level=t.level,this.sendNotification(J.QUALITY_CHANGE,this.player.levels[t.level]),this.details=t.details;var n=this.details.totalduration;n!==this.data.duration&&(this.data.duration=this.details.totalduration,this.sendNotification(J.CHANGE_DURATION,this.data.duration)),t.details.live===!0&&"dvr"!==this.facade.mediaProxy.getTemporalType()&&this.facade.mediaProxy.setTemporalType("live")}},{key:"onLevelSwitching",value:function(e,t){this.getQualityMode()===vt.MANUAL&&(this.userSwitched=!0),this.sendNotification(J.QUALITY_CHANGING,this.player.levels[t.level])}},{key:"onLevelSwitched",value:function(e,t){this.sendNotification(J.QUALITY_SWITCHED,this.player.levels[t.level])}},{key:"onAudioTrackSwitch",value:function(e,t){var n=e===Hls.Events.AUDIO_TRACK_SWITCHED;this.sendNotification(J.AUDIO_TRACK_SWITCH,{switched:n})}},{key:"onseeking",value:function(e){this.getQualityMode()===vt.MANUAL&&this.userSwitched||babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeking",this).call(this,e)}},{key:"onseeked",value:function(e){return this.getQualityMode()===vt.MANUAL&&this.userSwitched?void(this.userSwitched=!1):void babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeked",this).call(this,e)}},{key:"onFragmentLoadStart",value:function(e,t){try{var n=this.player.levels[t.frag.level].bitrate;this.sendNotification(J.FRAGMENT_LOAD_START,n)}catch(e){return}}},{key:"onFragmentLoaded",value:function(e,t){try{var n=this.player.levels[t.frag.level].bitrate;this.sendNotification(J.FRAGMENT_LOADED,n)}catch(e){return}}},{key:"onFragmentChanged",value:function(e,t){this.fragment=t.frag}},{key:"ontimeupdate",value:function(e){this.facade.ads.inProgress!==!0&&(this.data.currentTime=this.getCurrentTime(),this.sendNotification(J.TIME_CHANGE,{currentTime:this.data.currentTime}))}},{key:"ondurationchange",value:function(e){var t=this.getDetails().totalduration;t===this.data.duration||0===t||isNaN(t)||(this.data.duration=t,this.sendNotification(J.CHANGE_DURATION,t))}},{key:"oncanplaythrough",value:function(e){this.createTracks(),this.sendNotification(J.CAN_PLAY_THROUGH),this.sendNotification(J.PROGRESS,this.getDuration()),this.qualityMode===vt.MANUAL&&this.player.currentLevel!==this.quality&&this.setQuality(this.quality)}},{key:"getStartTime",value:function(){return this.getMediaElement().duration-this.getDuration()}},{key:"getCurrentTime",value:function(){return this.getMediaElement().currentTime-this.getStartTime()}},{key:"getDetails",value:function(){return this.details||{}}},{key:"getFragmentDuration",value:function(){return this.getDetails().targetduration||0}},{key:"getCurrentTimeUTC",value:function(){var e=void 0,t=void 0;try{e=1e3*(this.getMediaElement().currentTime-this.fragment.start),t=this.fragment.programDateTime||this.fragment.sn}catch(n){t=0,e=0}return Math.round(e+t)}},{key:"goLive",value:function(){this.setCurrentTime(this.getLiveTime())}},{key:"getLiveTime",value:function(){return this.getDuration()-this.getFragmentDuration()}},{key:"isLive",value:function(){return this.getStartTime()+this.getCurrentTime()>=this.getLiveTime()}},{key:"seek",value:function(e){var n=this,i=arguments.length>1&&void 0!==arguments[1]?arguments[1]:this.getStartTime();return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"seek",this).call(this,e+i).then(function(e){"dvr"===n.mediaProxy.getTemporalType()&&n.sendNotification(J.IS_LIVE,n.isLive())})}},{key:"onplaying",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onplaying",this).call(this),this.retried=!1}},{key:"onError",value:function(e,t){if(this.userSwitched=!1,this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(D.ERROR,{event:e,data:t})),this.config.ignoreErrors!==!0){if(this.config.retryOnError===!1||this.retried===!0)return this.retried=!1,void this.error(t);if(t.fatal&&t.type===Hls.ErrorTypes.MEDIA_ERROR&&t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(t.fatal=!1),t.fatal)switch(t.type){case Hls.ErrorTypes.NETWORK_ERROR:this.retried=!0,this.manifestParsed?this.player.startLoad():this.player.loadSource(this.getSrc()),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;case Hls.ErrorTypes.MEDIA_ERROR:this.retried=!0,this.player.recoverMediaError(),this.facade.logger.error("[AMP HLS] Playback Error trying to recover:",e);break;default:this.facade.logger.error("[AMP HLS] Playback Error:",e),this.error(t)}else t.details===Hls.ErrorDetails.FRAG_LOOP_LOADING_ERROR&&(this.fragErrorTime===this.getMediaElement().currentTime?(this.getMediaElement().currentTime++,this.facade.logger.error("[AMP HLS] Frag Loop Load Error, Seeking to :",this.getMediaElement().currentTime)):this.fragErrorTime=this.getMediaElement().currentTime)}}},{key:"error",value:function(e){switch(e.type){case Hls.ErrorTypes.NETWORK_ERROR:e.code=MediaError.MEDIA_ERR_NETWORK;break;case Hls.ErrorTypes.MEDIA_ERROR:e.code=MediaError.MEDIA_ERR_DECODE;break;default:e.toString=function(){return e.message}}e.message=e.type+": "+e.details,this.sendNotification(J.ERROR,e)}},{key:"createTracks",value:function(){function e(e,t){var n=this.facade.tracks.getAudioTracks();n.forEach(function(e){return e.data.enabled=!1}),t===!0&&(n[e.id].data.enabled=!0,this.player.audioTrack=e.id)}var t=this,n=this.player.audioTracks,i=this.player.audioTrack,r=this.facade.tracks.getAudioTracks(),a=n.length;n.forEach(function(n,o){if(L.fieldIsUnique(r,"id",n.id)!==!1){var s=new ce({kind:n.type,label:n.name||n.id,language:n.lang,id:n.id,enabled:n.id===i,data:n});s.changeEnabled=e.bind(t,n),r.add(s,o+1===a)}})}},{key:"setQuality",value:function(e){var t=this.qualityMode;return t=e>-1?vt.MANUAL:vt.AUTO,this.setQualityMode(t),e===this.player.currentLevel?(this.onLevelSwitching("hlsLevelSwitching",this.player.levels[e]),void this.onLevelSwitched("hlsLevelSwitched",{level:e})):(null!=this.player&&(this.player.currentLevel=this.quality=e),this.quality)}},{key:"getQuality",value:function(){var e=this.player,t=null!=e?e.currentLevel:null;return t===-1&&(t=null!=e?e.nextLoadLevel:null),t}},{key:"getQualityLevels",value:function(){var e=this.player;return null!=e?e.levels:babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getQualityLevels",this).call(this)}},{key:"getQualityMode",value:function(){return this.qualityMode}},{key:"setQualityMode",value:function(e){return this.qualityMode=e,e}},{key:"destroy",value:function(){if(null!=this.player)try{babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this),this.player.destroy(),this.player=null}catch(e){}}}]),t}(de),Qt=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaults={types:["application/x-mpegURL"],data:{enableWorker:!0,enableCEA708Captions:!0},settings:null,buffer:null,quality:null,withCredentials:null,retryOnError:!0,ignoreErrors:!1},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createPlaybackProxy",value:function(){
return new qt(this.getData(),this.facade)}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Kt),Wt=function(e){function t(){return babelHelpers.classCallCheck(this,t),babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this))}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"execute",value:function(e){var t,n;"freewheel"===(null!=(n=e.getBody())?n.partner:void 0)&&(t=this.facade.player.getPlaybackRate(),this.proxy.destroy(),this.facade.player.setPlaybackRate(t))}}]),t}(Yt),Zt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.moduleName="hls",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.proxy=new Qt(this.config),this.registerProxy(this.proxy)}},{key:"createController",value:function(){this.registerCommand(je.BREAK_START,Wt),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"createController",this).call(this)}},{key:"logEvent",value:function(e){/^hls/.test(e.type)!==!0&&babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"logEvent",this).call(this,e)}},{key:"listNotificationInterests",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationInterests",this).call(this).concat([je.BREAK_START])}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat([J.TIMED_METADATA,J.QUALITY_LEVELS_LOADED,J.QUALITY_CHANGE,J.QUALITY_CHANGING,J.FRAGMENT_LOAD_START,J.FRAGMENT_LOADED])}}]),t}(zt),Xt=function(e){function t(e,n){babelHelpers.classCallCheck(this,t);var i=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e,n));return i.buffer=e.buffer,i.decryptionTypes=["com.widevine.alpha","com.microsoft.playready","org.w3.clearkey"],i.temporalTypes=["vod","live","dvr"],t.SCTE="urn:scte:scte35:2013:xml",i.playbackCoreName="dash",i.context=null,i.player=null,i.buffer=null,i}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"resumecomplete",value:function(){try{var e=this.facade.getMediaElement(),n=null!=e?e.textTracks:void 0;if(0!==(null!=n?n.length:void 0)){var i=n[0];null!=i&&(i.mode="hidden")}}catch(e){}babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"resumecomplete",this).call(this)}},{key:"onerror",value:function(){}},{key:"ontimeupdate",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ontimeupdate",this).call(this,{target:{currentTime:this.getCurrentTime()}})}},{key:"onseeked",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeked",this).call(this,{target:{currentTime:this.getCurrentTime()}})}},{key:"onseeking",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onseeking",this).call(this,{target:{currentTime:this.getCurrentTime()}})}},{key:"ondurationchange",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"ondurationchange",this).call(this,{target:{duration:this.getDuration()}})}},{key:"onloadedmetadata",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"onloadedmetadata",this).call(this,e),this.sendNotification(J.CHANGE_DURATION,this.getDuration())}},{key:"oncanplaythrough",value:function(e){babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"oncanplaythrough",this).call(this,e),this.sendNotification(J.CHANGE_DURATION,this.getDuration())}},{key:"canPlayMedium",value:function(e){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"canPlayMedium",this).call(this,e)||"audio"===e}},{key:"getMedium",value:function(){return L.get(this.facade,["media","medium"])||"video"}},{key:"createTracks",value:function(){var e=this,t=this.player.getTracksFor("audio"),n=this.player.getCurrentTrackFor("audio"),i=this.facade.tracks.getAudioTracks(),r=t.length,a=function(e,t,n){this.facade.tracks.getAudioTracks().forEach(function(e){return e.data.enabled=e===t}),n===!0&&this.player.setCurrentTrack(e)};T.each(t,function(t,o){if(null==t.id||L.fieldIsUnique(i,"id",t.id)!==!1){var s=new ce({kind:t.roles.join(" "),label:t.id,language:t.lang,id:t.id,enabled:t===n,data:t});s.changeEnabled=a.bind(e,t,s),i.add(s,o+1===r)}})}},{key:"logLevel",value:function(){var e=this.plugin.proxy.getDebug(),t="undefined"==typeof e?"undefined":babelHelpers.typeof(e);switch(t){case"number":return e;case"boolean":return e===!0?dashjs.Debug.LOG_LEVEL_DEBUG:dashjs.Debug.LOG_LEVEL_NONE;default:return dashjs.Debug.LOG_LEVEL_NONE}}},{key:"init",value:function(){var e=this;try{var n=this.config;if(null==this.player){var i=dashjs.MediaPlayer().create();i.on(dashjs.MediaPlayer.events.ERROR,this.onError.bind(this)),i.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_STARTED,this.onFragmentLoadStart.bind(this)),i.on(dashjs.MediaPlayer.events.FRAGMENT_LOADING_COMPLETED,this.onFragmentLoaded.bind(this)),i.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_REQUESTED,this.onQualityChangeRequested.bind(this)),i.on(dashjs.MediaPlayer.events.QUALITY_CHANGE_RENDERED,this.onQualityChangeRendered.bind(this)),i.on(dashjs.MediaPlayer.events.MANIFEST_LOADED,this.onManifestLoaded.bind(this)),i.on(dashjs.Protection.events.PROTECTION_CREATED,this.onProtectionCreated.bind(this)),i.on(t.SCTE,this.onEmsg.bind(this)),i.initialize(this.getMediaElement(),null,!1);var r=L.merge({debug:{logLevel:this.logLevel()},streaming:{fastSwitchEnabled:!0}},n.data,n.settings);null!=n.lowLatencyEnabled&&L.set(r,["streaming","lowLatencyEnabled"],n.lowLatencyEnabled),null!=n.liveDelay&&L.set(r,["streaming","liveDelay"],n.liveDelay),null!=n.catchUpPlaybackRate&&L.set(r,["streaming","liveCatchUpPlaybackRate"],n.catchUpPlaybackRate),null!=n.initialBitrate&&L.set(r,["streaming","abr","initialBitrate",this.getMedium()],n.initialBitrate),i.updateSettings(r),this.player=i}var a=this.facade.configuration.getValueOf("withCredentials",n);null!=a&&("boolean"==typeof a&&(a={default:a}),T.each(a,function(t,n){return e.player.setXHRWithCredentialsForType(n,t)})),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"init",this).call(this)}catch(e){this.facade.logger.error(e)}}},{key:"applySrc",value:function(){var e=this.facade.getMedia().keys;null!=e&&this.player.setProtectionData(e),this.player.attachSource(this.getSrc()),this.load()}},{key:"preload",value:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:this.facade.getPreload();babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"preload",this).call(this,e),e===B.AUTO&&this.player.preload()}},{key:"seek",value:function(e){return Promise.resolve(this.player.seek(e))}},{key:"getCurrentTime",value:function(){return this.player?this.player.time():0}},{key:"getDuration",value:function(){return this.player?this.player.duration():0}},{key:"getCurrentTimeUTC",value:function(){return this.player?Math.round(1e3*this.player.timeAsUTC()):0}},{key:"getStats",value:function(){return{}}},{key:"onFragmentLoadStart",value:function(e){var t=e.request.mediaInfo.bitrateList[e.request.quality].bandwidth;this.sendNotification(J.FRAGMENT_LOAD_START,t)}},{key:"onFragmentLoaded",value:function(e){var t=e.request.mediaInfo.bitrateList[e.request.quality].bandwidth;this.sendNotification(J.FRAGMENT_LOADED,t)}},{key:"onQualityChangeRequested",value:function(e){this.sendNotification(J.QUALITY_CHANGING,this.getQualityLevels()[e.newQuality]),this.sendNotification(J.QUALITY_SWITCHED,this.getQualityLevels()[e.newQuality])}},{key:"onQualityChangeRendered",value:function(e){this.sendNotification(J.QUALITY_SWITCHED,this.getQualityLevels()[e.newQuality])}},{key:"onManifestLoaded",value:function(e){this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(dashjs.MediaPlayer.events.MANIFEST_LOADED,e.data))}},{key:"onProtectionCreated",value:function(e){this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(dashjs.Protection.events.PROTECTION_CREATED,e.data))}},{key:"onEmsg",value:function(e){var n=e.event;this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(e.type,n));var i=DataCue||VTTCue,a=n.presentationTime/n.presentationTimeDelta*1e4,o=a+n.duration/n.presentationTimeDelta*1e4,s=String.fromCharCode.apply(null,n.messageData),l=Pe.parse(s);n.text=s;var u=new i(a,o,{key:t.SCTE,data:n,info:l});this.sendNotification(J.TIMED_METADATA,u)}},{key:"onError",value:function(e){var t=e.error;this.plugin.sendNotification(J.DISPATCH_EVENT,r.create(D.ERROR,t)),this.sendNotification(J.ERROR,t)}},{key:"setQuality",value:function(e){if(this.player){var t=e===-1?vt.AUTO:vt.MANUAL;return this.setQualityMode(t),this.player.setQualityFor("video",e),e}}},{key:"getQuality",value:function(){if(this.player)return this.player.getQualityFor("video")}},{key:"getQualityLevels",value:function(){if(this.player)return this.player.getBitrateInfoListFor("video")||babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"getQualityLevels",this).call(this)}},{key:"getQualityMode",value:function(){if(this.player){var e=this.player.getSettings(),t=L.get(e,["streaming","abr","autoSwitchBitrate",this.getMedium()]);return t===!0?vt.AUTO:vt.MANUAL}}},{key:"setQualityMode",value:function(e){if(this.player&&e!==this.getQualityMode()){var t=this.player.getSettings();return L.set(t,["streaming","abr","autoSwitchBitrate",this.getMedium()],e==vt.AUTO),this.player.updateSettings(this.settings),e}}},{key:"destroy",value:function(){this.player&&(this.player.reset(),babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"destroy",this).call(this))}}]),t}(de),$t=function(e){function t(e){babelHelpers.classCallCheck(this,t);var n=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this,e));return n.defaults={types:["application/dash+xml"],buffer:null,initialBitrate:null,lowLatencyEnabled:null,liveDelay:null,catchUpPlaybackRate:null,withCredentials:null,data:null,settings:null},n}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createPlaybackProxy",value:function(){return new Xt(this.getData(),this.facade)}}],[{key:"NAME",get:function(){return Q.NAME}}]),t}(Kt),Jt=function(e){function t(){babelHelpers.classCallCheck(this,t);var e=babelHelpers.possibleConstructorReturn(this,(t.__proto__||Object.getPrototypeOf(t)).call(this));return e.moduleName="dash",e}return babelHelpers.inherits(t,e),babelHelpers.createClass(t,[{key:"createModel",value:function(){this.proxy=new $t(this.config),this.registerProxy(this.proxy)}},{key:"listNotificationPublications",value:function(){return babelHelpers.get(t.prototype.__proto__||Object.getPrototypeOf(t.prototype),"listNotificationPublications",this).call(this).concat([J.FRAGMENT_LOAD_START,J.FRAGMENT_LOADED])}}]),t}(zt);C.constructed=C.construct(),J.init(),dt.registerPlugin("hls","html",Zt),dt.registerPlugin("dash","html",Jt),dt.registerPlugin("captioning","html",Ft);var en=MutationObserver||WebKitMutationObserver,tn=new en(function(e,n){e.forEach(function(e){t(e.addedNodes)})});if(document.body)e();else{var nn=function t(){document.removeEventListener("DOMContentLoaded",t),n(),e()};document.addEventListener("DOMContentLoaded",nn)}n();var rn={fp:T,amp:{ActiveState:ae,Ad:Tt,AdEvents:Object.entries(je).reduce(function(e,t){return e[t[0].replace(/^AD_/,"")]=t[1].replace(/^ads/,""),e},{}),AdPlugin:Et,ads:{AdNotifications:je,AdPlugin:Ht,AdProxy:St,AdRequest:Ot,AdVO:Tt},ApplicationStateProxy:oe,AMP:dt,AMPError:i,AmpError:i,AuthEvents:se,Authorization:gt,AuthPlugin:_t,AuthProvider:pt,AuthProviderList:yt,AutoplayPolicy:G,AutoplayThreshold:U,CaptionRenderer:Dt,CaptionCue:Ne,CaptionTrack:Le,Config:F,CSS:I,Cue:Ce,DataBinding:q,DataBoundConfigurationProxy:Q,DisplayState:ie,Event:r,Events:D,EventDispatcher:a,Logger:w,Media:bt,MediaProxy:_e,Medium:At,ModuleProxy:Q,Notifications:J,OverlayMediator:Ve,PlayerProxy:Ee,PlayState:re,Plugin:kt,Preload:B,QualityMode:vt,QueryString:C,Resource:mt,get Settings(){return rt.GET()},SMPTETTParser:Se,SRTParser:Oe,Timer:o,Transformer:X,TransformType:$,URL:N,Utils:L,XMLUtils:Pe,utils:{Logger:w,QueryString:C,Timer:o,Utils:L,XMLUtils:Pe},WebVTTParser:Me}};return rn}();
!function(e,t){"object"==typeof exports&&"undefined"!=typeof module?t(exports,require("lodash.merge")):"function"==typeof define&&define.amd?define(["exports","lodash.merge"],t):t(e.VuexPersistence={},e._.merge)}(this,function(e,r){"use strict";r=r&&r.hasOwnProperty("default")?r.default:r;var i=function(){function e(){this._queue=[],this._flushing=!1}return e.prototype.enqueue=function(e){return this._queue.push(e),this._flushing?Promise.resolve():this.flushQueue()},e.prototype.flushQueue=function(){var t=this;this._flushing=!0;var r=function(){var e=t._queue.shift();if(e)return e.then(r);t._flushing=!1};return Promise.resolve(r())},e}();function n(e,t){return r({},e,t)}var u=JSON,t=function(e){var s=this;this._mutex=new i,this.subscriber=function(t){return function(e){return t.subscribe(e)}},void 0===e&&(e={}),this.key=null!=e.key?e.key:"vuex",this.subscribed=!1,this.supportCircular=e.supportCircular||!1,this.supportCircular&&(u=require("circular-json")),this.storage=e.storage||window.localStorage,this.reducer=null!=e.reducer?e.reducer:null==e.modules?function(e){return e}:function(s){return e.modules.reduce(function(e,t){var r;return n(e,((r={})[t]=s[t],r))},{})},this.filter=e.filter||function(e){return!0},this.strictMode=e.strictMode||!1,this.RESTORE_MUTATION=function(e,t){for(var r=n(e,t||{}),s=0,i=Object.keys(r);s<i.length;s++){var u=i[s];this._vm.$set(e,u,r[u])}},this.asyncStorage=e.asyncStorage||!1;var t=this.storage&&this.storage._config;this.asyncStorage=this.asyncStorage||"localforage"===(t&&t.name),this.asyncStorage?(this.restoreState=null!=e.restoreState?e.restoreState:function(e,t){return t.getItem(e).then(function(e){return"string"==typeof e?s.supportCircular?u.parse(e||"{}"):JSON.parse(e||"{}"):e||{}})},this.saveState=null!=e.saveState?e.saveState:function(e,t,r){return r.setItem(e,"localforage"===(r&&r._config&&r._config.name)?n({},t||{}):s.supportCircular?u.stringify(t):JSON.stringify(t))},this.plugin=function(t){s.restoreState(s.key,s.storage).then(function(e){s.strictMode?t.commit("RESTORE_MUTATION",e):t.replaceState(n(t.state,e||{})),s.subscriber(t)(function(e,t){s.filter(e)&&s._mutex.enqueue(s.saveState(s.key,s.reducer(t),s.storage))}),s.subscribed=!0})}):(this.restoreState=null!=e.restoreState?e.restoreState:function(e,t){var r=t.getItem(e);return"string"==typeof r?s.supportCircular?u.parse(r||"{}"):JSON.parse(r||"{}"):r||{}},this.saveState=null!=e.saveState?e.saveState:function(e,t,r){return r.setItem(e,s.supportCircular?u.stringify(t):JSON.stringify(t))},this.plugin=function(e){var t=s.restoreState(s.key,s.storage);s.strictMode?e.commit("RESTORE_MUTATION",t):e.replaceState(n(e.state,t||{})),s.subscriber(e)(function(e,t){s.filter(e)&&s.saveState(s.key,s.reducer(t),s.storage)}),s.subscribed=!0})};e.VuexPersistence=t,e.default=t,Object.defineProperty(e,"__esModule",{value:!0})});
//# sourceMappingURL=index.min.js.map

var QRCode;!function(){function a(a){this.mode=c.MODE_8BIT_BYTE,this.data=a,this.parsedData=[];for(var b=[],d=0,e=this.data.length;e>d;d++){var f=this.data.charCodeAt(d);f>65536?(b[0]=240|(1835008&f)>>>18,b[1]=128|(258048&f)>>>12,b[2]=128|(4032&f)>>>6,b[3]=128|63&f):f>2048?(b[0]=224|(61440&f)>>>12,b[1]=128|(4032&f)>>>6,b[2]=128|63&f):f>128?(b[0]=192|(1984&f)>>>6,b[1]=128|63&f):b[0]=f,this.parsedData=this.parsedData.concat(b)}this.parsedData.length!=this.data.length&&(this.parsedData.unshift(191),this.parsedData.unshift(187),this.parsedData.unshift(239))}function b(a,b){this.typeNumber=a,this.errorCorrectLevel=b,this.modules=null,this.moduleCount=0,this.dataCache=null,this.dataList=[]}function i(a,b){if(void 0==a.length)throw new Error(a.length+"/"+b);for(var c=0;c<a.length&&0==a[c];)c++;this.num=new Array(a.length-c+b);for(var d=0;d<a.length-c;d++)this.num[d]=a[d+c]}function j(a,b){this.totalCount=a,this.dataCount=b}function k(){this.buffer=[],this.length=0}function m(){return"undefined"!=typeof CanvasRenderingContext2D}function n(){var a=!1,b=navigator.userAgent;return/android/i.test(b)&&(a=!0,aMat=b.toString().match(/android ([0-9]\.[0-9])/i),aMat&&aMat[1]&&(a=parseFloat(aMat[1]))),a}function r(a,b){for(var c=1,e=s(a),f=0,g=l.length;g>=f;f++){var h=0;switch(b){case d.L:h=l[f][0];break;case d.M:h=l[f][1];break;case d.Q:h=l[f][2];break;case d.H:h=l[f][3]}if(h>=e)break;c++}if(c>l.length)throw new Error("Too long data");return c}function s(a){var b=encodeURI(a).toString().replace(/\%[0-9a-fA-F]{2}/g,"a");return b.length+(b.length!=a?3:0)}a.prototype={getLength:function(){return this.parsedData.length},write:function(a){for(var b=0,c=this.parsedData.length;c>b;b++)a.put(this.parsedData[b],8)}},b.prototype={addData:function(b){var c=new a(b);this.dataList.push(c),this.dataCache=null},isDark:function(a,b){if(0>a||this.moduleCount<=a||0>b||this.moduleCount<=b)throw new Error(a+","+b);return this.modules[a][b]},getModuleCount:function(){return this.moduleCount},make:function(){this.makeImpl(!1,this.getBestMaskPattern())},makeImpl:function(a,c){this.moduleCount=4*this.typeNumber+17,this.modules=new Array(this.moduleCount);for(var d=0;d<this.moduleCount;d++){this.modules[d]=new Array(this.moduleCount);for(var e=0;e<this.moduleCount;e++)this.modules[d][e]=null}this.setupPositionProbePattern(0,0),this.setupPositionProbePattern(this.moduleCount-7,0),this.setupPositionProbePattern(0,this.moduleCount-7),this.setupPositionAdjustPattern(),this.setupTimingPattern(),this.setupTypeInfo(a,c),this.typeNumber>=7&&this.setupTypeNumber(a),null==this.dataCache&&(this.dataCache=b.createData(this.typeNumber,this.errorCorrectLevel,this.dataList)),this.mapData(this.dataCache,c)},setupPositionProbePattern:function(a,b){for(var c=-1;7>=c;c++)if(!(-1>=a+c||this.moduleCount<=a+c))for(var d=-1;7>=d;d++)-1>=b+d||this.moduleCount<=b+d||(this.modules[a+c][b+d]=c>=0&&6>=c&&(0==d||6==d)||d>=0&&6>=d&&(0==c||6==c)||c>=2&&4>=c&&d>=2&&4>=d?!0:!1)},getBestMaskPattern:function(){for(var a=0,b=0,c=0;8>c;c++){this.makeImpl(!0,c);var d=f.getLostPoint(this);(0==c||a>d)&&(a=d,b=c)}return b},createMovieClip:function(a,b,c){var d=a.createEmptyMovieClip(b,c),e=1;this.make();for(var f=0;f<this.modules.length;f++)for(var g=f*e,h=0;h<this.modules[f].length;h++){var i=h*e,j=this.modules[f][h];j&&(d.beginFill(0,100),d.moveTo(i,g),d.lineTo(i+e,g),d.lineTo(i+e,g+e),d.lineTo(i,g+e),d.endFill())}return d},setupTimingPattern:function(){for(var a=8;a<this.moduleCount-8;a++)null==this.modules[a][6]&&(this.modules[a][6]=0==a%2);for(var b=8;b<this.moduleCount-8;b++)null==this.modules[6][b]&&(this.modules[6][b]=0==b%2)},setupPositionAdjustPattern:function(){for(var a=f.getPatternPosition(this.typeNumber),b=0;b<a.length;b++)for(var c=0;c<a.length;c++){var d=a[b],e=a[c];if(null==this.modules[d][e])for(var g=-2;2>=g;g++)for(var h=-2;2>=h;h++)this.modules[d+g][e+h]=-2==g||2==g||-2==h||2==h||0==g&&0==h?!0:!1}},setupTypeNumber:function(a){for(var b=f.getBCHTypeNumber(this.typeNumber),c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[Math.floor(c/3)][c%3+this.moduleCount-8-3]=d}for(var c=0;18>c;c++){var d=!a&&1==(1&b>>c);this.modules[c%3+this.moduleCount-8-3][Math.floor(c/3)]=d}},setupTypeInfo:function(a,b){for(var c=this.errorCorrectLevel<<3|b,d=f.getBCHTypeInfo(c),e=0;15>e;e++){var g=!a&&1==(1&d>>e);6>e?this.modules[e][8]=g:8>e?this.modules[e+1][8]=g:this.modules[this.moduleCount-15+e][8]=g}for(var e=0;15>e;e++){var g=!a&&1==(1&d>>e);8>e?this.modules[8][this.moduleCount-e-1]=g:9>e?this.modules[8][15-e-1+1]=g:this.modules[8][15-e-1]=g}this.modules[this.moduleCount-8][8]=!a},mapData:function(a,b){for(var c=-1,d=this.moduleCount-1,e=7,g=0,h=this.moduleCount-1;h>0;h-=2)for(6==h&&h--;;){for(var i=0;2>i;i++)if(null==this.modules[d][h-i]){var j=!1;g<a.length&&(j=1==(1&a[g]>>>e));var k=f.getMask(b,d,h-i);k&&(j=!j),this.modules[d][h-i]=j,e--,-1==e&&(g++,e=7)}if(d+=c,0>d||this.moduleCount<=d){d-=c,c=-c;break}}}},b.PAD0=236,b.PAD1=17,b.createData=function(a,c,d){for(var e=j.getRSBlocks(a,c),g=new k,h=0;h<d.length;h++){var i=d[h];g.put(i.mode,4),g.put(i.getLength(),f.getLengthInBits(i.mode,a)),i.write(g)}for(var l=0,h=0;h<e.length;h++)l+=e[h].dataCount;if(g.getLengthInBits()>8*l)throw new Error("code length overflow. ("+g.getLengthInBits()+">"+8*l+")");for(g.getLengthInBits()+4<=8*l&&g.put(0,4);0!=g.getLengthInBits()%8;)g.putBit(!1);for(;;){if(g.getLengthInBits()>=8*l)break;if(g.put(b.PAD0,8),g.getLengthInBits()>=8*l)break;g.put(b.PAD1,8)}return b.createBytes(g,e)},b.createBytes=function(a,b){for(var c=0,d=0,e=0,g=new Array(b.length),h=new Array(b.length),j=0;j<b.length;j++){var k=b[j].dataCount,l=b[j].totalCount-k;d=Math.max(d,k),e=Math.max(e,l),g[j]=new Array(k);for(var m=0;m<g[j].length;m++)g[j][m]=255&a.buffer[m+c];c+=k;var n=f.getErrorCorrectPolynomial(l),o=new i(g[j],n.getLength()-1),p=o.mod(n);h[j]=new Array(n.getLength()-1);for(var m=0;m<h[j].length;m++){var q=m+p.getLength()-h[j].length;h[j][m]=q>=0?p.get(q):0}}for(var r=0,m=0;m<b.length;m++)r+=b[m].totalCount;for(var s=new Array(r),t=0,m=0;d>m;m++)for(var j=0;j<b.length;j++)m<g[j].length&&(s[t++]=g[j][m]);for(var m=0;e>m;m++)for(var j=0;j<b.length;j++)m<h[j].length&&(s[t++]=h[j][m]);return s};for(var c={MODE_NUMBER:1,MODE_ALPHA_NUM:2,MODE_8BIT_BYTE:4,MODE_KANJI:8},d={L:1,M:0,Q:3,H:2},e={PATTERN000:0,PATTERN001:1,PATTERN010:2,PATTERN011:3,PATTERN100:4,PATTERN101:5,PATTERN110:6,PATTERN111:7},f={PATTERN_POSITION_TABLE:[[],[6,18],[6,22],[6,26],[6,30],[6,34],[6,22,38],[6,24,42],[6,26,46],[6,28,50],[6,30,54],[6,32,58],[6,34,62],[6,26,46,66],[6,26,48,70],[6,26,50,74],[6,30,54,78],[6,30,56,82],[6,30,58,86],[6,34,62,90],[6,28,50,72,94],[6,26,50,74,98],[6,30,54,78,102],[6,28,54,80,106],[6,32,58,84,110],[6,30,58,86,114],[6,34,62,90,118],[6,26,50,74,98,122],[6,30,54,78,102,126],[6,26,52,78,104,130],[6,30,56,82,108,134],[6,34,60,86,112,138],[6,30,58,86,114,142],[6,34,62,90,118,146],[6,30,54,78,102,126,150],[6,24,50,76,102,128,154],[6,28,54,80,106,132,158],[6,32,58,84,110,136,162],[6,26,54,82,110,138,166],[6,30,58,86,114,142,170]],G15:1335,G18:7973,G15_MASK:21522,getBCHTypeInfo:function(a){for(var b=a<<10;f.getBCHDigit(b)-f.getBCHDigit(f.G15)>=0;)b^=f.G15<<f.getBCHDigit(b)-f.getBCHDigit(f.G15);return(a<<10|b)^f.G15_MASK},getBCHTypeNumber:function(a){for(var b=a<<12;f.getBCHDigit(b)-f.getBCHDigit(f.G18)>=0;)b^=f.G18<<f.getBCHDigit(b)-f.getBCHDigit(f.G18);return a<<12|b},getBCHDigit:function(a){for(var b=0;0!=a;)b++,a>>>=1;return b},getPatternPosition:function(a){return f.PATTERN_POSITION_TABLE[a-1]},getMask:function(a,b,c){switch(a){case e.PATTERN000:return 0==(b+c)%2;case e.PATTERN001:return 0==b%2;case e.PATTERN010:return 0==c%3;case e.PATTERN011:return 0==(b+c)%3;case e.PATTERN100:return 0==(Math.floor(b/2)+Math.floor(c/3))%2;case e.PATTERN101:return 0==b*c%2+b*c%3;case e.PATTERN110:return 0==(b*c%2+b*c%3)%2;case e.PATTERN111:return 0==(b*c%3+(b+c)%2)%2;default:throw new Error("bad maskPattern:"+a)}},getErrorCorrectPolynomial:function(a){for(var b=new i([1],0),c=0;a>c;c++)b=b.multiply(new i([1,g.gexp(c)],0));return b},getLengthInBits:function(a,b){if(b>=1&&10>b)switch(a){case c.MODE_NUMBER:return 10;case c.MODE_ALPHA_NUM:return 9;case c.MODE_8BIT_BYTE:return 8;case c.MODE_KANJI:return 8;default:throw new Error("mode:"+a)}else if(27>b)switch(a){case c.MODE_NUMBER:return 12;case c.MODE_ALPHA_NUM:return 11;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 10;default:throw new Error("mode:"+a)}else{if(!(41>b))throw new Error("type:"+b);switch(a){case c.MODE_NUMBER:return 14;case c.MODE_ALPHA_NUM:return 13;case c.MODE_8BIT_BYTE:return 16;case c.MODE_KANJI:return 12;default:throw new Error("mode:"+a)}}},getLostPoint:function(a){for(var b=a.getModuleCount(),c=0,d=0;b>d;d++)for(var e=0;b>e;e++){for(var f=0,g=a.isDark(d,e),h=-1;1>=h;h++)if(!(0>d+h||d+h>=b))for(var i=-1;1>=i;i++)0>e+i||e+i>=b||(0!=h||0!=i)&&g==a.isDark(d+h,e+i)&&f++;f>5&&(c+=3+f-5)}for(var d=0;b-1>d;d++)for(var e=0;b-1>e;e++){var j=0;a.isDark(d,e)&&j++,a.isDark(d+1,e)&&j++,a.isDark(d,e+1)&&j++,a.isDark(d+1,e+1)&&j++,(0==j||4==j)&&(c+=3)}for(var d=0;b>d;d++)for(var e=0;b-6>e;e++)a.isDark(d,e)&&!a.isDark(d,e+1)&&a.isDark(d,e+2)&&a.isDark(d,e+3)&&a.isDark(d,e+4)&&!a.isDark(d,e+5)&&a.isDark(d,e+6)&&(c+=40);for(var e=0;b>e;e++)for(var d=0;b-6>d;d++)a.isDark(d,e)&&!a.isDark(d+1,e)&&a.isDark(d+2,e)&&a.isDark(d+3,e)&&a.isDark(d+4,e)&&!a.isDark(d+5,e)&&a.isDark(d+6,e)&&(c+=40);for(var k=0,e=0;b>e;e++)for(var d=0;b>d;d++)a.isDark(d,e)&&k++;var l=Math.abs(100*k/b/b-50)/5;return c+=10*l}},g={glog:function(a){if(1>a)throw new Error("glog("+a+")");return g.LOG_TABLE[a]},gexp:function(a){for(;0>a;)a+=255;for(;a>=256;)a-=255;return g.EXP_TABLE[a]},EXP_TABLE:new Array(256),LOG_TABLE:new Array(256)},h=0;8>h;h++)g.EXP_TABLE[h]=1<<h;for(var h=8;256>h;h++)g.EXP_TABLE[h]=g.EXP_TABLE[h-4]^g.EXP_TABLE[h-5]^g.EXP_TABLE[h-6]^g.EXP_TABLE[h-8];for(var h=0;255>h;h++)g.LOG_TABLE[g.EXP_TABLE[h]]=h;i.prototype={get:function(a){return this.num[a]},getLength:function(){return this.num.length},multiply:function(a){for(var b=new Array(this.getLength()+a.getLength()-1),c=0;c<this.getLength();c++)for(var d=0;d<a.getLength();d++)b[c+d]^=g.gexp(g.glog(this.get(c))+g.glog(a.get(d)));return new i(b,0)},mod:function(a){if(this.getLength()-a.getLength()<0)return this;for(var b=g.glog(this.get(0))-g.glog(a.get(0)),c=new Array(this.getLength()),d=0;d<this.getLength();d++)c[d]=this.get(d);for(var d=0;d<a.getLength();d++)c[d]^=g.gexp(g.glog(a.get(d))+b);return new i(c,0).mod(a)}},j.RS_BLOCK_TABLE=[[1,26,19],[1,26,16],[1,26,13],[1,26,9],[1,44,34],[1,44,28],[1,44,22],[1,44,16],[1,70,55],[1,70,44],[2,35,17],[2,35,13],[1,100,80],[2,50,32],[2,50,24],[4,25,9],[1,134,108],[2,67,43],[2,33,15,2,34,16],[2,33,11,2,34,12],[2,86,68],[4,43,27],[4,43,19],[4,43,15],[2,98,78],[4,49,31],[2,32,14,4,33,15],[4,39,13,1,40,14],[2,121,97],[2,60,38,2,61,39],[4,40,18,2,41,19],[4,40,14,2,41,15],[2,146,116],[3,58,36,2,59,37],[4,36,16,4,37,17],[4,36,12,4,37,13],[2,86,68,2,87,69],[4,69,43,1,70,44],[6,43,19,2,44,20],[6,43,15,2,44,16],[4,101,81],[1,80,50,4,81,51],[4,50,22,4,51,23],[3,36,12,8,37,13],[2,116,92,2,117,93],[6,58,36,2,59,37],[4,46,20,6,47,21],[7,42,14,4,43,15],[4,133,107],[8,59,37,1,60,38],[8,44,20,4,45,21],[12,33,11,4,34,12],[3,145,115,1,146,116],[4,64,40,5,65,41],[11,36,16,5,37,17],[11,36,12,5,37,13],[5,109,87,1,110,88],[5,65,41,5,66,42],[5,54,24,7,55,25],[11,36,12],[5,122,98,1,123,99],[7,73,45,3,74,46],[15,43,19,2,44,20],[3,45,15,13,46,16],[1,135,107,5,136,108],[10,74,46,1,75,47],[1,50,22,15,51,23],[2,42,14,17,43,15],[5,150,120,1,151,121],[9,69,43,4,70,44],[17,50,22,1,51,23],[2,42,14,19,43,15],[3,141,113,4,142,114],[3,70,44,11,71,45],[17,47,21,4,48,22],[9,39,13,16,40,14],[3,135,107,5,136,108],[3,67,41,13,68,42],[15,54,24,5,55,25],[15,43,15,10,44,16],[4,144,116,4,145,117],[17,68,42],[17,50,22,6,51,23],[19,46,16,6,47,17],[2,139,111,7,140,112],[17,74,46],[7,54,24,16,55,25],[34,37,13],[4,151,121,5,152,122],[4,75,47,14,76,48],[11,54,24,14,55,25],[16,45,15,14,46,16],[6,147,117,4,148,118],[6,73,45,14,74,46],[11,54,24,16,55,25],[30,46,16,2,47,17],[8,132,106,4,133,107],[8,75,47,13,76,48],[7,54,24,22,55,25],[22,45,15,13,46,16],[10,142,114,2,143,115],[19,74,46,4,75,47],[28,50,22,6,51,23],[33,46,16,4,47,17],[8,152,122,4,153,123],[22,73,45,3,74,46],[8,53,23,26,54,24],[12,45,15,28,46,16],[3,147,117,10,148,118],[3,73,45,23,74,46],[4,54,24,31,55,25],[11,45,15,31,46,16],[7,146,116,7,147,117],[21,73,45,7,74,46],[1,53,23,37,54,24],[19,45,15,26,46,16],[5,145,115,10,146,116],[19,75,47,10,76,48],[15,54,24,25,55,25],[23,45,15,25,46,16],[13,145,115,3,146,116],[2,74,46,29,75,47],[42,54,24,1,55,25],[23,45,15,28,46,16],[17,145,115],[10,74,46,23,75,47],[10,54,24,35,55,25],[19,45,15,35,46,16],[17,145,115,1,146,116],[14,74,46,21,75,47],[29,54,24,19,55,25],[11,45,15,46,46,16],[13,145,115,6,146,116],[14,74,46,23,75,47],[44,54,24,7,55,25],[59,46,16,1,47,17],[12,151,121,7,152,122],[12,75,47,26,76,48],[39,54,24,14,55,25],[22,45,15,41,46,16],[6,151,121,14,152,122],[6,75,47,34,76,48],[46,54,24,10,55,25],[2,45,15,64,46,16],[17,152,122,4,153,123],[29,74,46,14,75,47],[49,54,24,10,55,25],[24,45,15,46,46,16],[4,152,122,18,153,123],[13,74,46,32,75,47],[48,54,24,14,55,25],[42,45,15,32,46,16],[20,147,117,4,148,118],[40,75,47,7,76,48],[43,54,24,22,55,25],[10,45,15,67,46,16],[19,148,118,6,149,119],[18,75,47,31,76,48],[34,54,24,34,55,25],[20,45,15,61,46,16]],j.getRSBlocks=function(a,b){var c=j.getRsBlockTable(a,b);if(void 0==c)throw new Error("bad rs block @ typeNumber:"+a+"/errorCorrectLevel:"+b);for(var d=c.length/3,e=[],f=0;d>f;f++)for(var g=c[3*f+0],h=c[3*f+1],i=c[3*f+2],k=0;g>k;k++)e.push(new j(h,i));return e},j.getRsBlockTable=function(a,b){switch(b){case d.L:return j.RS_BLOCK_TABLE[4*(a-1)+0];case d.M:return j.RS_BLOCK_TABLE[4*(a-1)+1];case d.Q:return j.RS_BLOCK_TABLE[4*(a-1)+2];case d.H:return j.RS_BLOCK_TABLE[4*(a-1)+3];default:return void 0}},k.prototype={get:function(a){var b=Math.floor(a/8);return 1==(1&this.buffer[b]>>>7-a%8)},put:function(a,b){for(var c=0;b>c;c++)this.putBit(1==(1&a>>>b-c-1))},getLengthInBits:function(){return this.length},putBit:function(a){var b=Math.floor(this.length/8);this.buffer.length<=b&&this.buffer.push(0),a&&(this.buffer[b]|=128>>>this.length%8),this.length++}};var l=[[17,14,11,7],[32,26,20,14],[53,42,32,24],[78,62,46,34],[106,84,60,44],[134,106,74,58],[154,122,86,64],[192,152,108,84],[230,180,130,98],[271,213,151,119],[321,251,177,137],[367,287,203,155],[425,331,241,177],[458,362,258,194],[520,412,292,220],[586,450,322,250],[644,504,364,280],[718,560,394,310],[792,624,442,338],[858,666,482,382],[929,711,509,403],[1003,779,565,439],[1091,857,611,461],[1171,911,661,511],[1273,997,715,535],[1367,1059,751,593],[1465,1125,805,625],[1528,1190,868,658],[1628,1264,908,698],[1732,1370,982,742],[1840,1452,1030,790],[1952,1538,1112,842],[2068,1628,1168,898],[2188,1722,1228,958],[2303,1809,1283,983],[2431,1911,1351,1051],[2563,1989,1423,1093],[2699,2099,1499,1139],[2809,2213,1579,1219],[2953,2331,1663,1273]],o=function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){function g(a,b){var c=document.createElementNS("http://www.w3.org/2000/svg",a);for(var d in b)b.hasOwnProperty(d)&&c.setAttribute(d,b[d]);return c}var b=this._htOption,c=this._el,d=a.getModuleCount();Math.floor(b.width/d),Math.floor(b.height/d),this.clear();var h=g("svg",{viewBox:"0 0 "+String(d)+" "+String(d),width:"100%",height:"100%",fill:b.colorLight});h.setAttributeNS("http://www.w3.org/2000/xmlns/","xmlns:xlink","http://www.w3.org/1999/xlink"),c.appendChild(h),h.appendChild(g("rect",{fill:b.colorDark,width:"1",height:"1",id:"template"}));for(var i=0;d>i;i++)for(var j=0;d>j;j++)if(a.isDark(i,j)){var k=g("use",{x:String(i),y:String(j)});k.setAttributeNS("http://www.w3.org/1999/xlink","href","#template"),h.appendChild(k)}},a.prototype.clear=function(){for(;this._el.hasChildNodes();)this._el.removeChild(this._el.lastChild)},a}(),p="svg"===document.documentElement.tagName.toLowerCase(),q=p?o:m()?function(){function a(){this._elImage.src=this._elCanvas.toDataURL("image/png"),this._elImage.style.display="block",this._elCanvas.style.display="none"}function d(a,b){var c=this;if(c._fFail=b,c._fSuccess=a,null===c._bSupportDataURI){var d=document.createElement("img"),e=function(){c._bSupportDataURI=!1,c._fFail&&_fFail.call(c)},f=function(){c._bSupportDataURI=!0,c._fSuccess&&c._fSuccess.call(c)};return d.onabort=e,d.onerror=e,d.onload=f,d.src="data:image/gif;base64,iVBORw0KGgoAAAANSUhEUgAAAAUAAAAFCAYAAACNbyblAAAAHElEQVQI12P4//8/w38GIAXDIBKE0DHxgljNBAAO9TXL0Y4OHwAAAABJRU5ErkJggg==",void 0}c._bSupportDataURI===!0&&c._fSuccess?c._fSuccess.call(c):c._bSupportDataURI===!1&&c._fFail&&c._fFail.call(c)}if(this._android&&this._android<=2.1){var b=1/window.devicePixelRatio,c=CanvasRenderingContext2D.prototype.drawImage;CanvasRenderingContext2D.prototype.drawImage=function(a,d,e,f,g,h,i,j){if("nodeName"in a&&/img/i.test(a.nodeName))for(var l=arguments.length-1;l>=1;l--)arguments[l]=arguments[l]*b;else"undefined"==typeof j&&(arguments[1]*=b,arguments[2]*=b,arguments[3]*=b,arguments[4]*=b);c.apply(this,arguments)}}var e=function(a,b){this._bIsPainted=!1,this._android=n(),this._htOption=b,this._elCanvas=document.createElement("canvas"),this._elCanvas.width=b.width,this._elCanvas.height=b.height,a.appendChild(this._elCanvas),this._el=a,this._oContext=this._elCanvas.getContext("2d"),this._bIsPainted=!1,this._elImage=document.createElement("img"),this._elImage.style.display="none",this._el.appendChild(this._elImage),this._bSupportDataURI=null};return e.prototype.draw=function(a){var b=this._elImage,c=this._oContext,d=this._htOption,e=a.getModuleCount(),f=d.width/e,g=d.height/e,h=Math.round(f),i=Math.round(g);b.style.display="none",this.clear();for(var j=0;e>j;j++)for(var k=0;e>k;k++){var l=a.isDark(j,k),m=k*f,n=j*g;c.strokeStyle=l?d.colorDark:d.colorLight,c.lineWidth=1,c.fillStyle=l?d.colorDark:d.colorLight,c.fillRect(m,n,f,g),c.strokeRect(Math.floor(m)+.5,Math.floor(n)+.5,h,i),c.strokeRect(Math.ceil(m)-.5,Math.ceil(n)-.5,h,i)}this._bIsPainted=!0},e.prototype.makeImage=function(){this._bIsPainted&&d.call(this,a)},e.prototype.isPainted=function(){return this._bIsPainted},e.prototype.clear=function(){this._oContext.clearRect(0,0,this._elCanvas.width,this._elCanvas.height),this._bIsPainted=!1},e.prototype.round=function(a){return a?Math.floor(1e3*a)/1e3:a},e}():function(){var a=function(a,b){this._el=a,this._htOption=b};return a.prototype.draw=function(a){for(var b=this._htOption,c=this._el,d=a.getModuleCount(),e=Math.floor(b.width/d),f=Math.floor(b.height/d),g=['<table style="border:0;border-collapse:collapse;">'],h=0;d>h;h++){g.push("<tr>");for(var i=0;d>i;i++)g.push('<td style="border:0;border-collapse:collapse;padding:0;margin:0;width:'+e+"px;height:"+f+"px;background-color:"+(a.isDark(h,i)?b.colorDark:b.colorLight)+';"></td>');g.push("</tr>")}g.push("</table>"),c.innerHTML=g.join("");var j=c.childNodes[0],k=(b.width-j.offsetWidth)/2,l=(b.height-j.offsetHeight)/2;k>0&&l>0&&(j.style.margin=l+"px "+k+"px")},a.prototype.clear=function(){this._el.innerHTML=""},a}();QRCode=function(a,b){if(this._htOption={width:256,height:256,typeNumber:4,colorDark:"#000000",colorLight:"#ffffff",correctLevel:d.H},"string"==typeof b&&(b={text:b}),b)for(var c in b)this._htOption[c]=b[c];"string"==typeof a&&(a=document.getElementById(a)),this._android=n(),this._el=a,this._oQRCode=null,this._oDrawing=new q(this._el,this._htOption),this._htOption.text&&this.makeCode(this._htOption.text)},QRCode.prototype.makeCode=function(a){this._oQRCode=new b(r(a,this._htOption.correctLevel),this._htOption.correctLevel),this._oQRCode.addData(a),this._oQRCode.make(),this._el.title=a,this._oDrawing.draw(this._oQRCode),this.makeImage()},QRCode.prototype.makeImage=function(){"function"==typeof this._oDrawing.makeImage&&(!this._android||this._android>=3)&&this._oDrawing.makeImage()},QRCode.prototype.clear=function(){this._oDrawing.clear()},QRCode.CorrectLevel=d}();
